<ion-header>
    <ion-navbar class="mg2u-navbar">
        <!-- <img class="mg2u-logo" src="assets/img/myGolf2u.png" /> -->
        <img class="mg2u-logo" src="assets/img/mg2u-logo-top.svg" />
        <ion-buttons end>
            <button ion-button icon-only (click)="onRefreshClick($event)">
                <i class="fa fa-fw fa-lg fa-refresh"></i>
            </button>
        </ion-buttons>
    </ion-navbar>
    <ion-grid fixed *ngIf="innerWidth <= 768">
        <ion-toolbar>

            <ion-searchbar [(ngModel)]="searchQuery" debounce="1500" (ionInput)="onRefreshClick($event)" dark
            (keyup)="testKeyup($event)"
                (ionCancel)="onSearchCancel()" [showCancelButton]="true">
            </ion-searchbar>
            <!-- onSearchInput -->

        <ion-row *ngIf="innerWidth <= 768">
            <ion-col col-6 col-lg-5 col-xl-5 no-padding>
                <ion-item>
                    <ion-label style="max-width:10vw !important" item-left>From</ion-label>
                    <ion-datetime style="margin:0" item-right (ionChange)="confirmDate($event)" displayFormat="DD MMM YYYY"
                        pickerFormat="DD-MM-YYYY" [(ngModel)]="currentDate"></ion-datetime>
                </ion-item>
            </ion-col>
            <ion-col col-6 col-lg-5 col-xl-5 no-padding>
                <ion-item>
                    <ion-label style="max-width:10vw !important" item-left>To</ion-label>
                    <ion-datetime style="margin:0" item-right (ionChange)="confirmDate($event)" displayFormat="DD MMM YYYY"
                        pickerFormat="DD-MM-YYYY" [(ngModel)]="toDate"></ion-datetime>
                </ion-item>
            </ion-col>
            <ion-col col-12 no-padding (click)="changeFilterTime()">
                <ion-item>
                    <ion-label text-left item-start [innerHTML]="displayFilterTime()"></ion-label>
                </ion-item>
            </ion-col>
            <ion-col col-6 col-lg-2 col-xl-2 no-padding>
                <ion-item>
                    <ion-label>
                        <i class="fas fa-fw fa-cogs"></i>
                        <span *ngIf="innerWidth <= 768">Show more options</span>
                    </ion-label>
                    <ion-checkbox style="margin:1rem;" [(ngModel)]="showFilters"></ion-checkbox>
                    <!-- [checked]="checkFilterBookingStatus(status)" -->
                </ion-item>
            </ion-col>
            <ion-col col-6 col-lg-2 col-xl-2 no-padding>
                <ion-item>
                    <ion-label>
                        <i class="fas fa-fw fa-users"></i>
                        <span>Show details</span>
                    </ion-label>
                    <ion-checkbox style="margin:1rem;" [(ngModel)]="expandDetails"></ion-checkbox>
                    <!-- [checked]="checkFilterBookingStatus(status)" -->
                </ion-item>
            </ion-col>
        </ion-row>
        <button ion-button outline block text-center (click)="goRefundRedeemHistory()">
            <i class="fas fa-fw fa-comments-dollar"></i>View Refund/Redeem History
        </button>
        <button ion-button full text-center (click)="onRefreshClick($event)">
            Search
        </button>
        
    <ion-list no-margin>
        <div *ngIf="showFilters">
            <ion-row>
                <ion-col>
                    <ion-item-header>
                        Booking Status
                    </ion-item-header>
                </ion-col>
            </ion-row>

            <ion-row>
                <ion-col col-6 *ngFor="let status of avlBookingStatus">
                    <ion-item>
                        <ion-label>
                            {{status.name}}
                        </ion-label>
                        <ion-checkbox [(ngModel)]="status.checked"
                            (ionChange)="updateFilterBookingFlightStatus(status)"></ion-checkbox>
                        <!-- [checked]="checkFilterBookingStatus(status)" -->
                    </ion-item>
                </ion-col>
            </ion-row>
            <!-- <ion-item>
                <ion-label>Displaying max results of : </ion-label>
                <ion-input [min]="1" [max]="300" (ionChange)="onKeyMaxResults()" debounce="1000" maxlength="3" text-right type="tel" [(ngModel)]="searchMaxResults"></ion-input>
            </ion-item> -->
            <ion-row *ngIf="showRefundBy">
                <ion-col>
                    <ion-item-header>
                        View refunded by method
                    </ion-item-header>
                </ion-col>
            </ion-row>
            <ion-row *ngIf="showRefundBy">
                <ng-container *ngFor="let refMethod of refundMethodList">
                <ion-col col-6 *ngIf="refMethod.visible">
                    <ion-item>
                        <ion-label>
                            {{refMethod.name}}
                        </ion-label>
                        <ion-checkbox [disabled]="!refMethod.enabled" [(ngModel)]="refMethod.checked"
                        (ionChange)="updateFilterRefundMethod(refMethod)"></ion-checkbox>
                            
                        <!-- [checked]="checkFilterBookingStatus(status)" -->
                    </ion-item>
                </ion-col>
            </ng-container>
            </ion-row>
        </div>
        <ion-row>
            <ion-col col-12>
                <button block ion-button icon-right small outline (click)="onSelectCourse($event)"
                    class="starter-btn-courses">
                    <!-- (click)="openCourse()" -->
                    <span
                        *ngIf="teeFlightTabs === 'checkedInTab'">{{optionCourse?optionCourse.courseName:'All Courses'}}</span>
                    <span
                        *ngIf="teeFlightTabs === 'bookedTab'">{{optionCourse?optionCourse.courseName:'All Courses'}}</span>
                    <span
                        *ngIf="teeFlightTabs === 'allTab'">{{optionCourse?optionCourse.courseName:'All Courses'}}</span>
                    <!-- Category -->
                    <ion-icon primary name="arrow-down"></ion-icon>
                </button>
            </ion-col>
        </ion-row>
    </ion-list>
        </ion-toolbar>
    </ion-grid>
</ion-header>


<ion-content class="mygolf-page-background">
    <ion-grid fixed *ngIf="innerWidth <= 768">
        
        <!-- <ion-item text-wrap text-center *ngIf="upcomingList.length > 0">Displaying {{upcomingList.length}} flights for {{displayFilterBookingStatus()}}</ion-item> -->
        <button ion-button clear small full text-wrap text-center *ngIf="upcomingList && upcomingList.length > 0">
            Total flights found&nbsp;<b>{{getFlightStats('flights')}}</b>
        </button>
        <button ion-button clear small full text-wrap text-center *ngIf="upcomingList && upcomingList.length > 0">Displaying
            {{upcomingList.length}} 
            flights for {{displayFilterBookingStatus()}}</button>


        <ion-grid style="padding:0;" *ngIf="viewStats">
            <ion-row justify-content-around>
                <ion-col col-3 style="color:#1b6a34;text-align:center">Flights <br><span class="tee-top-items">
                        {{getFlightStats('flights')}}</span></ion-col>
                <ion-col col-3 style="color:#1b6a34;text-align:center">Players<br> <span
                        class="tee-top-items">{{getFlightStats('players')}}</span></ion-col>
                <ion-col col-3 style="color:#1b6a34;text-align:center">Buggies <br><span
                        class="tee-top-items">{{getFlightStats('buggies')}}</span></ion-col>
                <ion-col col-3 style="color:#1b6a34;text-align:center">Caddies <br><span
                        class="tee-top-items">{{getFlightStats('caddies')}}</span></ion-col>

            </ion-row>
        </ion-grid>



        <ion-list *ngIf="refresher">
            <ion-item style="text-align:center">
                <i class="fas fa-sync fa-spin"></i>
            </ion-item>
        </ion-list>
        <ion-list *ngIf="!refresher && (getFlightList() && getFlightList().length === 0 || !upcomingList) && innerWidth <= 768">
            <ion-item  text-wrap text-center>No flights found</ion-item>
        </ion-list>


        <ion-list *ngIf="!refresher && teeFlightTabs === 'bookedTab' && innerWidth <= 768"
            style="margin-top:0px;margin-bottom:10rem;">
            <ion-item-group [reorder]="itemReorder">
                <!-- (ionItemReorder)="onReorder($event,teeFlightTabs)" -->
                <!-- (ionItemReorder)="$event.applyTo(filteredBFL)" -->
                <span *ngIf="getFlightList() && getFlightList().length > 0">
                    <!-- upcomingList -->
                    <ion-item *ngFor="let tf of getFlightList(); let listIdx = index" style="padding-left:0!important"
                    (click)="tf.showDetails = !tf.showDetails">
                        <!-- *ngFor="let x of [1,2,3,4]; let i = index;" -->
                        <ion-card class="mygolf-table">
                            <!-- *ngIf="i % 2 === 0" -->
                            <div>
                                <ion-card-header class="mygolf-table-caption" no-padding>
                                    <ion-row no-padding>
                                        <ion-col width-50 class="mg-txt-left">

                                            <i
                                                class="far fa-fw fa-calendar"></i>{{getTeeOffDate(tf.slotAssigned.teeOffDate)}}
                                            <i class="far fa-fw fa-clock"></i>
                                            {{getTeeOffTime(tf.slotAssigned.teeOffTime)}}
                                            <!-- <span class="booker-name" *ngIf="tf.bookedByPlayer && tf.bookedByPlayer.playerName">({{tf.bookedByPlayer.firstName?tf.bookedByPlayer.firstName:tf.bookedByPlayer.playerName}})</span> -->
                                            <i *ngIf="tf.ninesPlayed" class="fas fa-fw fa-golf-ball"></i>{{tf.ninesPlayed?tf.ninesPlayed*9:''}}
                                            <!-- <ion-icon name="md-alarm"></ion-icon> -->
                                        </ion-col>
                                        <!-- <ion-col width-35 >
                                                
                                            </ion-col > -->
                                        <ion-col width-50 class="mg-txt-right">
                                            Ref. <i class="fa fa-fw fa-hashtag"></i>{{tf.bookingReference}}
                                            <!-- <span  class="booker-name" *ngIf="i % 2 === 0">(John)</span>
                                <span class="booker-name" *ngIf="i % 2 === 1">(Alexander)</span> -->
                                        </ion-col>
                                    </ion-row>
                                </ion-card-header>
                                <ion-card-content>
                                    <!-- <ion-grid> -->
                                    <!-- <ion-row style="place-content: center;">

                            <h2>T-Off Second Nine ( 10-18 )</h2>
                        </ion-row> -->
                                    <ion-row no-padding style="place-items: center;">
                                        <!-- margin:-0.7em -->
                                        <ion-col col-5 class="mg-txt-left">
                                            <button ion-button small clear
                                                class="p-flight-status">{{getStartCourse(tf)}}</button>
                                            
                                                <!-- <br>
                                                <button ion-button small clear 
                                                class="p-flight-status" text-wrap>
                                                    Amount : {{getBookingDetails(tf, 'finalAmount')}}
                                                </button> -->
                                            </ion-col>
                                        <!-- <ion-col width-35 >
                                                            
                                                        </ion-col > -->
                                        <ion-col style="text-align: right;">

                                            <!-- <button ion-button small clear>Waiting Players</button> -->
                                            <p class="p-flight-status">{{getFlightStatus(tf)}}</p>
                                            <span class="booker-name"
                                                *ngIf="tf.bookedByPlayer && tf.bookedByPlayer.playerName">({{tf.bookedByPlayer.firstName?tf.bookedByPlayer.firstName:tf.bookedByPlayer.playerName}})</span>
                                                <span class="booker-name"
                                                *ngIf="!tf.bookedByPlayer && tf.bookedByUser && tf.bookedByUser.name">
                                                ({{tf.bookedByUser.name?tf.bookedByUser.name:""}})</span>
                                        </ion-col>
                                        <!-- <ion-col col-7 class="mg-txt-right">
                                <button ion-button small item-right outline (click)="goFlightUpdate()">ACTION</button>
                                <button ion-button small item-right outline (click)="goFlightDetail(tf)">DETAILS</button>
                            </ion-col> -->
                                    </ion-row>
                                    <ion-row *ngIf="expandDetails || tf.showDetails">
                                        <ion-col>
                                            <ion-row no-padding justify-content-start style="padding-left:1.5rem">
                                                <ion-col *ngFor="let p of tf.bookingPlayers; let idx = index">
                                                    <!-- style="text-align: -webkit-center;" -->
                                                    <ion-row no-padding>
                                                        <ion-col no-padding col-12 style="align-self: flex-start;">

                                                            <span (click)="showDetailsPlayer(p)" *ngIf="p">
                                                                <!-- *ngIf="checkPlayerSlot(tf,1)" -->
                                                                <ion-avatar>
                                                                    <img class="player-img-flight"
                                                                        [src]="getPlayerSlotNew(p,'image')"
                                                                        onerror="this.src='img/default-user.jpg'">
                                                                </ion-avatar>
                                                                <span
                                                                    class="player-name">{{getPlayerSlotNew(p,'name')}}</span>

                                                            </span>
                                                        </ion-col>
                                                        <!-- </ion-row>
                                    <ion-row no-padding> -->
                                                        <ion-col no-padding col-12 style="align-self: flex-end;">
                                                            <span (click)="showDetailsCaddie(p)"
                                                                *ngIf="checkPlayerCaddyNew(p,tf,idx)">
                                                                <ion-avatar class="no-margin">
                                                                    <img class="caddie-img-flight"
                                                                        [src]="getCaddySlot(p,'image')"
                                                                        onerror="this.src='assets/img/caddie-image.svg'">
                                                                </ion-avatar>
                                                            </span><br>
                                                            <span class="caddie-name"
                                                                *ngIf="nameView">{{getCaddySlot(p,'name')}}</span>
                                                        </ion-col>
                                                    </ion-row>
                                                    <div *ngIf="0">
                                                        <span (click)="showDetailsPlayer(p)" *ngIf="p">
                                                            <!-- *ngIf="checkPlayerSlot(tf,1)" -->
                                                            <ion-avatar class="no-margin">
                                                                <!-- [src]="getPlayerSlot(tf,1,'image',tf.id)" -->
                                                                <img class="player-img-flight"
                                                                    [src]="getPlayerSlotNew(p,'image')"
                                                                    onerror="this.src='img/default-user.jpg'">
                                                            </ion-avatar>
                                                            <!-- class="hide-xs hide-sm" -->
                                                            <!-- <span >{{getPlayerSlot(tf,1,'name',tf.id)}}</span> -->

                                                        </span><br>
                                                        <span
                                                            class="player-name">{{getPlayerSlotNew(p,'name')}}</span><br>
                                                        <span (click)="showDetailsCaddie(p)"
                                                            *ngIf="checkPlayerCaddyNew(p,tf,idx)">
                                                            <!-- checkPlayerCaddy(p,tf,idx,'upcoming',listIdx) -->
                                                            <!-- p.caddyAssigned || p.caddyPreferred -->
                                                            <ion-avatar class="no-margin">
                                                                <img class="caddie-img-flight"
                                                                    [src]="getCaddySlot(p,'image')"
                                                                    onerror="this.src='assets/img/caddie-image.svg'">
                                                                <!-- src='assets/img/caddie-image.svg' -->

                                                            </ion-avatar>
                                                        </span><br>
                                                        <span class="caddie-name"
                                                            *ngIf="nameView">{{getCaddySlot(p,'name')}}</span>
                                                    </div>
                                                </ion-col>
                                                <!-- <ion-col col-3>
                                <span *ngIf="checkPlayerSlot(tf,1)">
                                    <ion-avatar class="no-margin" >
                                            <img class="player-img-flight" [src]="getPlayerSlot(tf,1,'image',tf.id)"
                                                onerror="this.src='img/default-user.jpg'">
                                        </ion-avatar><span *ngIf="nameView" >{{getPlayerSlot(tf,1,'name',tf.id)}}</span>
                                    </span>
                            </ion-col>
                            <ion-col col-3>
                                <span  *ngIf="checkPlayerSlot(tf,2)">
                                    <ion-avatar class="no-margin">
                                            <img class="player-img-flight" [src]="getPlayerSlot(tf,2,'image',tf.id)"
                                                onerror="this.src='img/default-user.jpg'">
                                        </ion-avatar><span *ngIf="nameView">{{getPlayerSlot(tf,2,'name',tf.id)}}</span>
                                    </span>
                            </ion-col>
                            <ion-col col-3>
                                <span *ngIf="checkPlayerSlot(tf,3)">
                                    <ion-avatar class="no-margin" >
                                            <img class="player-img-flight" [src]="getPlayerSlot(tf,3,'image',tf.id)"
                                                onerror="this.src='img/default-user.jpg'">
                                        </ion-avatar><span *ngIf="nameView">{{getPlayerSlot(tf,3,'name',tf.id)}}</span>
                                    </span>
                            </ion-col>
                            <ion-col col-3>
                                <span *ngIf="checkPlayerSlot(tf,4)">
                                    <ion-avatar class="no-margin" >
                                            <img class="player-img-flight" [src]="getPlayerSlot(tf,4,'image',tf.id)"
                                                onerror="this.src='img/default-user.jpg'">
                                        </ion-avatar><span *ngIf="nameView">{{getPlayerSlot(tf,4,'name',tf.id)}}</span>
                                    </span>
                            </ion-col> -->
                                            </ion-row>
                                            <!-- <ion-row no-padding>
                            <ion-col style="text-align: -webkit-center;" *ngFor="let p of tf.bookingPlayers">
                                <span *ngIf="p.caddyAssigned || p.caddyPreferred">
                                    <ion-avatar class="no-margin">
                                            <img class="player-img-flight" [src]="getCaddySlot(p,'image')"
                                                onerror="this.src='assets/img/caddie-image.svg'">
                                                
                                        </ion-avatar><span class="player-name" *ngIf="nameView">{{getCaddySlot(p,'name')}}</span>
                                    </span>
                            </ion-col>
                        </ion-row> -->
                                        </ion-col>

                                    </ion-row>

                                    <ion-row no-padding *ngIf="expandDetails || tf.showDetails">
                                        <ion-col class="booker-name" width-50 class="mg-txt-left">
                                            <button ion-button small clear class="p-flight-status" text-wrap>
                                                Amount : {{getBookingDetails(tf, 'finalAmount')}}
                                            </button>
                                            <br *ngIf="getBookingDetails(tf, 'paidAmount')">
                                            <button ion-button small clear class="p-flight-status" text-wrap>
                                                {{getBookingDetails(tf, 'paidAmount')?' (Paid : '+getBookingDetails(tf, 'paidAmount')+')':''}}
                                            </button>
                                        </ion-col>
                                        <ion-col class="booker-name" width-50 class="mg-txt-right">
                                            <button ion-button small clear class="p-flight-status" text-wrap>
                                                Refund : {{getBookingDetails(tf, 'refund')}}
                                            </button>
                                            <br *ngIf="getBookingDetails(tf, 'discount')">
                                            <button ion-button small clear class="p-flight-status" text-wrap>
                                                Deduction : {{getBookingDetails(tf, 'discount')}}
                                            </button>

                                        </ion-col>
                                    </ion-row>
                                    <ion-row>
                                        <ion-col col-3 style="text-align:center;padding-left: 1.5rem;">
                                            <!-- <h2 item-left class="score">{{getCount(tf.bookingPlayers,'caddy')}}</h2> -->
                                            <img item-right
                                                        style="width: 3.8rem;float:right;object-fit: cover;margin:0.5rem"
                                                        src="assets/img/icon-players-side.png">
                                            <ion-badge item-left class="scoring-badge" style="padding:0;margin-top:0">
                                                <h2 class="score">{{getCount(tf,'player')}}</h2> 
                                            </ion-badge>
                                        </ion-col>
                                        <!-- style="text-align: right;" -->
                                        <ion-col col-3 style="text-align:center;padding-left: 2rem;">
                                            <img item-right
                                                style="width: 3.3rem;float:right;object-fit: cover;margin:0.5rem"
                                                src="assets/img/icon-caddie_.svg">

                                            <ion-badge item-left class="scoring-badge" style="padding:0;margin-top:0">
                                                <h2 class="score">{{getCount(tf.bookingPlayers,'caddy')}}</h2>
                                            </ion-badge>
                                            <ion-badge *ngIf="0" class="scoring-badge" style="padding:0;margin-top:0">
                                                <div>
                                                    <!-- <h2 class="score">{{tf.buggyRequested}}</h2> -->
                                                    <h2 class="score">{{getCount(tf.bookingPlayers,'buggy')}}
                                                        <img style="width: 2.5rem;float:left;object-fit: cover;margin:0.5rem"
                                                            src="assets/img/icon-caddie_.svg"></h2>
                                                </div>
                                                <!-- <p class="score-type">Buggies</p> -->
                                            </ion-badge>
                                            <!-- </ion-col>
                            <ion-col  style="text-align: center;">  -->

                                        </ion-col>
                                        <ion-col col-3 style="text-align:center;padding-left: 1.5rem;">
                                            <!-- <h2 item-left class="score">{{getCount(tf.bookingPlayers,'caddy')}}</h2> -->
                                            <img item-right
                                                style="width: 3.8rem;float:right;object-fit: cover;margin:0.5rem"
                                                src="assets/img/icon-buggy-new.svg">
                                            <ion-badge item-left class="scoring-badge" style="padding:0;margin-top:0">
                                                <h2 class="score">{{getCount(tf.bookingPlayers,'buggy')}}</h2>
                                            </ion-badge>
                                        </ion-col>
                                        <ion-col col-3 class="mg-txt-right">
                                            <!-- <button *ngIf="checkActionAccess(tf)" ion-button small item-right outline (click)="goFlightUpdate(tf)">ACTION</button> -->
                                            <button ion-button small item-right outline style="margin-left:0; margin-right:0;"
                                                (click)="goFlightDetail(tf)"><i class="fas fa-fw fa-eye"></i></button>
                                            <button ion-button small item-right outline style="margin-left:0; margin-right:0;"
                                                (click)="goBookingDetails(tf)"><i class="fas fa-fw fa-cog"></i></button>
                                            <!-- <span><ion-reorder></ion-reorder></span>     -->
                                        </ion-col>
                                    </ion-row>
                                    <!-- <ion-row no-padding style="place-items: center">
                            <ion-col col-5 class="mg-txt-left">
                                <button ion-button small clear>Waiting players</button></ion-col>
                            <ion-col col-7 class="mg-txt-right">
                                <button ion-button small item-right outline (click)="goFlightUpdate()">ACTION</button>
                                <button ion-button small item-right outline (click)="goFlightDetail(2)">DETAILS</button>
                            </ion-col>
                        </ion-row> -->

                                    <!-- </ion-grid> -->
                                </ion-card-content>
                            </div>

                        </ion-card>
                    </ion-item>
                </span>
            </ion-item-group>
            <ion-infinite-scroll (ionInfinite) = "doInfinite($event)"
                threshold = "40%">
                <ion-infinite-scroll-content
                        loadingSpinner = "bubbles"
                        loadingText = "">
                    </ion-infinite-scroll-content>
                </ion-infinite-scroll>
        </ion-list>
        <!-- </div> -->
    </ion-grid>
    <ion-row col-12 *ngIf="innerWidth > 768">
        <ion-col>
            <ion-toolbar color="light">

                <ion-searchbar [(ngModel)]="searchQuery" debounce="1500" (ionInput)="onRefreshClick($event)" dark
                (keyup)="testKeyup($event)"
                    (ionCancel)="onSearchCancel()" [showCancelButton]="true">
                </ion-searchbar>
            </ion-toolbar>

            <ion-row *ngIf="innerWidth > 768">
                <ion-col col-12 no-padding>
                    <ion-item>
                        <ion-label text-left style="max-width:10vw !important" item-start>From</ion-label>
                        <ion-datetime text-right style="margin:0" item-end (ionChange)="confirmDate($event)"
                            displayFormat="DD MMM YYYY" pickerFormat="DD-MM-YYYY" [(ngModel)]="currentDate">
                        </ion-datetime>
                    </ion-item>
                </ion-col>
                <ion-col col-12 no-padding>
                    <ion-item>
                        <ion-label text-left style="max-width:10vw !important" item-start>To</ion-label>
                        <ion-datetime text-right style="margin:0" item-end (ionChange)="confirmDate($event)"
                            displayFormat="DD MMM YYYY" pickerFormat="DD-MM-YYYY" [(ngModel)]="toDate"></ion-datetime>
                    </ion-item>
                </ion-col>
                <ion-col col-12 no-padding (click)="changeFilterTime()">
                    <ion-item>
                        <ion-label text-left item-start [innerHTML]="displayFilterTime()"></ion-label>
                    </ion-item>
                </ion-col>
                <!-- <ion-col col-12 no-padding>
                    <ion-item>
                        <ion-label text-left style="max-width:10vw !important" item-start>To</ion-label>
                        <ion-datetime text-right style="margin:0" item-end (ionChange)="confirmDate($event)"
                            displayFormat="DD MMM YYYY" pickerFormat="DD-MM-YYYY" [(ngModel)]="toDate"></ion-datetime>
                    </ion-item>
                </ion-col> -->
                <ion-col col-6 no-padding>
                    <ion-item>
                        <ion-label>
                            <i class="fas fa-fw fa-cogs"></i>
                            <span>Show more options</span>
                        </ion-label>
                        <ion-checkbox style="margin:1rem;" [(ngModel)]="showFilters"></ion-checkbox>
                        <!-- [checked]="checkFilterBookingStatus(status)" -->
                    </ion-item>
                </ion-col>
                
                <ion-col col-6 no-padding>
                    <ion-item>
                        <ion-label>
                            <i class="fas fa-fw fa-users"></i>
                            <span>Show details</span>
                        </ion-label>
                        <ion-checkbox style="margin:1rem;" [(ngModel)]="expandDetails"></ion-checkbox>
                        <!-- [checked]="checkFilterBookingStatus(status)" -->
                    </ion-item>
                </ion-col>
            </ion-row>
            <ion-list>
            <div *ngIf="showFilters">
                <ion-row>
                    <ion-col>
                        <ion-item-header>
                            Booking Status
                        </ion-item-header>
                    </ion-col>
                </ion-row>

                <ion-row>
                    <ion-col col-6 *ngFor="let status of avlBookingStatus">
                        <ion-item>
                            <ion-label>
                                {{status.name}}
                            </ion-label>
                            <ion-checkbox [(ngModel)]="status.checked"
                                (ionChange)="updateFilterBookingFlightStatus(status)"></ion-checkbox>
                            <!-- [checked]="checkFilterBookingStatus(status)" -->
                        </ion-item>
                    </ion-col>
                </ion-row>
                <!-- <ion-item> 
                    <ion-label>Displaying max results of : </ion-label>
                    <ion-input [min]="1" [max]="300"  maxlength="3" text-right type="tel" [(ngModel)]="searchMaxResults"></ion-input>
                </ion-item> -->
            </div>
            
            <button ion-button outline block text-center (click)="goRefundRedeemHistory()">
                <i class="fas fa-fw fa-comments-dollar"></i>View Refund/Redeem History
            </button>
            <button ion-button full text-center (click)="onRefreshClick($event)">
                Search
            </button>
            <ion-row>
                <ion-col col-12>
                    <button block ion-button icon-right small outline (click)="onSelectCourse($event)"
                        class="starter-btn-courses">
                        <!-- (click)="openCourse()" -->
                        <span
                            *ngIf="teeFlightTabs === 'checkedInTab'">{{optionCourse?optionCourse.courseName:'All Courses'}}</span>
                        <span
                            *ngIf="teeFlightTabs === 'bookedTab'">{{optionCourse?optionCourse.courseName:'All Courses'}}</span>
                        <span
                            *ngIf="teeFlightTabs === 'allTab'">{{optionCourse?optionCourse.courseName:'All Courses'}}</span>
                        <!-- Category -->
                        <ion-icon primary name="arrow-down"></ion-icon>
                    </button>
                </ion-col>
            </ion-row>
            </ion-list>
            <!-- <ion-item text-wrap text-center *ngIf="upcomingList.length > 0">Displaying {{upcomingList.length}} flights for {{displayFilterBookingStatus()}}</ion-item> -->
            <ion-item text-wrap text-center *ngIf="upcomingList && upcomingList.length > 0">
                Total flights found&nbsp;<b>{{getFlightStats('flights')}}</b>
            </ion-item>
            <ion-item text-wrap text-center *ngIf="upcomingList && upcomingList.length > 0">Displaying
                {{upcomingList.length}} 
                flights for {{displayFilterBookingStatus()}}</ion-item>


            <ion-grid style="padding:0;" *ngIf="viewStats">
                <ion-row justify-content-around>
                    <ion-col col-3 style="color:#1b6a34;text-align:center">Flights <br><span class="tee-top-items">
                            {{getFlightStats('flights')}}</span></ion-col>
                    <ion-col col-3 style="color:#1b6a34;text-align:center">Players<br> <span
                            class="tee-top-items">{{getFlightStats('players')}}</span></ion-col>
                    <ion-col col-3 style="color:#1b6a34;text-align:center">Buggies <br><span
                            class="tee-top-items">{{getFlightStats('buggies')}}</span></ion-col>
                    <ion-col col-3 style="color:#1b6a34;text-align:center">Caddies <br><span
                            class="tee-top-items">{{getFlightStats('caddies')}}</span></ion-col>

                </ion-row>
            </ion-grid>
            
        </ion-col>
        <ion-col col-9>
            
            <ion-list *ngIf="!refresher && (getFlightList() && getFlightList().length === 0 || !upcomingList) && innerWidth <= 768">
                <ion-item  text-wrap text-center>No flights found</ion-item>
            </ion-list>
            <ion-list *ngIf="!refresher && teeFlightTabs === 'bookedTab' && innerWidth > 768"
                style="margin-top:0px;margin-bottom:10rem;">
                <!-- (ionItemReorder)="onReorder($event,teeFlightTabs)" -->
                <!-- (ionItemReorder)="$event.applyTo(filteredBFL)" -->
                <span *ngIf="getFlightList() && getFlightList().length > 0">
                <!-- <span *ngIf="upcomingList && upcomingList.length > 0"> -->
                    <!-- upcomingList -->
                    <ion-row col-12 no-padding no-margin>
                        <ion-col col-6 no-padding no-margin *ngFor="let tf of getFlightList(); let listIdx = index">
                            <ion-item (click)="tf.showDetails = !tf.showDetails"
                                style="padding-left:0!important">
                                <!-- *ngFor="let x of [1,2,3,4]; let i = index;" -->
                                <ion-card class="mygolf-table">
                                    <!-- *ngIf="i % 2 === 0" -->
                                    <div>
                                        <ion-card-header class="mygolf-table-caption" no-padding>
                                            <ion-row no-padding>
                                                <ion-col width-50 class="mg-txt-left">

                                                    <i
                                                        class="far fa-fw fa-calendar"></i>{{getTeeOffDate(tf.slotAssigned.teeOffDate)}}
                                                    <i class="far fa-fw fa-clock"></i>
                                                    {{getTeeOffTime(tf.slotAssigned.teeOffTime)}}
                                                    <i *ngIf="tf.ninesPlayed" class="fas fa-fw fa-golf-ball"></i>{{tf.ninesPlayed?tf.ninesPlayed*9:''}}

                                                    <!-- <span class="booker-name" *ngIf="tf.bookedByPlayer && tf.bookedByPlayer.playerName">({{tf.bookedByPlayer.firstName?tf.bookedByPlayer.firstName:tf.bookedByPlayer.playerName}})</span> -->

                                                    <!-- <ion-icon name="md-alarm"></ion-icon> -->
                                                </ion-col>
                                                <!-- <ion-col width-35 >
                                                                    
                                                                </ion-col > -->
                                                <ion-col width-50 class="mg-txt-right">
                                                    Ref. <i class="fa fa-fw fa-hashtag"></i>{{tf.bookingReference}}
                                                    <!-- <span  class="booker-name" *ngIf="i % 2 === 0">(John)</span>
                                                    <span class="booker-name" *ngIf="i % 2 === 1">(Alexander)</span> -->
                                                </ion-col>
                                            </ion-row>
                                        </ion-card-header>
                                        <ion-card-content>
                                            <!-- <ion-grid> -->
                                            <!-- <ion-row style="place-content: center;">
                    
                                                <h2>T-Off Second Nine ( 10-18 )</h2>
                                            </ion-row> -->
                                            <ion-row no-padding style="place-items: center;">
                                                <!-- margin:-0.7em -->
                                                <ion-col col-5 class="mg-txt-left">
                                                    <button ion-button small clear
                                                        class="p-flight-status">{{getStartCourse(tf)}}
                                                    </button>
                                                        <!-- <br>
                                                        <button ion-button small clear 
                                                        class="p-flight-status" text-wrap>
                                                            Amount : {{getBookingDetails(tf, 'finalAmount')}}
                                                        </button> -->
                                                </ion-col>
                                                <!-- <ion-col width-35 >
                                                                                
                                                                            </ion-col > -->
                                                <ion-col style="text-align: right;">

                                                    <!-- <button ion-button small clear>Waiting Players</button> -->
                                                    <p class="p-flight-status">{{getFlightStatus(tf)}}</p>
                                                    <span class="booker-name"
                                                        *ngIf="tf.bookedByPlayer && tf.bookedByPlayer.playerName">({{tf.bookedByPlayer.firstName?tf.bookedByPlayer.firstName:tf.bookedByPlayer.playerName}})</span>
                                                        <span class="booker-name"
                                                        *ngIf="!tf.bookedByPlayer && tf.bookedByUser && tf.bookedByUser.name">
                                                        ({{tf.bookedByUser.name?tf.bookedByUser.name:""}})</span>
                                                </ion-col>
                                                <!-- <ion-col col-7 class="mg-txt-right">
                                                    <button ion-button small item-right outline (click)="goFlightUpdate()">ACTION</button>
                                                    <button ion-button small item-right outline (click)="goFlightDetail(tf)">DETAILS</button>
                                                </ion-col> -->
                                            </ion-row>
                                            <ion-row *ngIf="expandDetails || tf.showDetails">
                                                <ion-col>
                                                    <ion-row no-padding justify-content-start
                                                        style="padding-left:1.5rem">
                                                        <ion-col *ngFor="let p of tf.bookingPlayers; let idx = index">
                                                            <!-- style="text-align: -webkit-center;" -->
                                                            <ion-row no-padding>
                                                                <ion-col no-padding col-12
                                                                    style="align-self: flex-start;">

                                                                    <span (click)="showDetailsPlayer(p)" *ngIf="p">
                                                                        <!-- *ngIf="checkPlayerSlot(tf,1)" -->
                                                                        <ion-avatar>
                                                                            <img class="player-img-flight"
                                                                                [src]="getPlayerSlotNew(p,'image')"
                                                                                onerror="this.src='img/default-user.jpg'">
                                                                        </ion-avatar>
                                                                        <span
                                                                            class="player-name">{{getPlayerSlotNew(p,'name')}}</span>

                                                                    </span>
                                                                </ion-col>
                                                                <!-- </ion-row>
                                                        <ion-row no-padding> -->
                                                                <ion-col no-padding col-12
                                                                    style="align-self: flex-end;">
                                                                    <span (click)="showDetailsCaddie(p)"
                                                                        *ngIf="checkPlayerCaddyNew(p,tf,idx)">
                                                                        <ion-avatar class="no-margin">
                                                                            <img class="caddie-img-flight"
                                                                                [src]="getCaddySlot(p,'image')"
                                                                                onerror="this.src='assets/img/caddie-image.svg'">
                                                                        </ion-avatar>
                                                                    </span><br>
                                                                    <span class="caddie-name"
                                                                        *ngIf="nameView">{{getCaddySlot(p,'name')}}</span>
                                                                </ion-col>
                                                            </ion-row>
                                                            <div *ngIf="0">
                                                                <span (click)="showDetailsPlayer(p)" *ngIf="p">
                                                                    <!-- *ngIf="checkPlayerSlot(tf,1)" -->
                                                                    <ion-avatar class="no-margin">
                                                                        <!-- [src]="getPlayerSlot(tf,1,'image',tf.id)" -->
                                                                        <img class="player-img-flight"
                                                                            [src]="getPlayerSlotNew(p,'image')"
                                                                            onerror="this.src='img/default-user.jpg'">
                                                                    </ion-avatar>
                                                                    <!-- class="hide-xs hide-sm" -->
                                                                    <!-- <span >{{getPlayerSlot(tf,1,'name',tf.id)}}</span> -->

                                                                </span><br>
                                                                <span
                                                                    class="player-name">{{getPlayerSlotNew(p,'name')}}</span><br>
                                                                <span (click)="showDetailsCaddie(p)"
                                                                    *ngIf="checkPlayerCaddyNew(p,tf,idx)">
                                                                    <!-- checkPlayerCaddy(p,tf,idx,'upcoming',listIdx) -->
                                                                    <!-- p.caddyAssigned || p.caddyPreferred -->
                                                                    <ion-avatar class="no-margin">
                                                                        <img class="caddie-img-flight"
                                                                            [src]="getCaddySlot(p,'image')"
                                                                            onerror="this.src='assets/img/caddie-image.svg'">
                                                                        <!-- src='assets/img/caddie-image.svg' -->

                                                                    </ion-avatar>
                                                                </span><br>
                                                                <span class="caddie-name"
                                                                    *ngIf="nameView">{{getCaddySlot(p,'name')}}</span>
                                                            </div>
                                                        </ion-col>
                                                    </ion-row>
                                                </ion-col>

                                            </ion-row>

                                            <ion-row no-padding>
                                                <ion-col class="booker-name" width-50 class="mg-txt-left">
                                                    <button ion-button small clear class="p-flight-status" text-wrap>
                                                        Amount : {{getBookingDetails(tf, 'finalAmount')}}
                                                    </button>
                                                    <br *ngIf="getBookingDetails(tf, 'paidAmount')">
                                                    <button ion-button small clear class="p-flight-status" text-wrap>
                                                        {{getBookingDetails(tf, 'paidAmount')?' (Paid : '+getBookingDetails(tf, 'paidAmount')+')':''}}
                                                    </button>
                                                </ion-col>
                                                <ion-col class="booker-name" width-50 class="mg-txt-right">
                                                    <button ion-button small clear class="p-flight-status" text-wrap>
                                                        Refund : {{getBookingDetails(tf, 'refund')}}
                                                    </button>
                                                    <br *ngIf="getBookingDetails(tf, 'discount')">
                                                    <button ion-button small clear class="p-flight-status" text-wrap>
                                                        Deduction : {{getBookingDetails(tf, 'discount')}}
                                                    </button>

                                                </ion-col>
                                            </ion-row>
                                            <ion-row style="display: flex; justify-content: space-between; max-width: 90%">
                                                <ion-col style="text-align:center; max-width: 9rem">
                                                    <!-- padding-left: 1.5rem; -->
                                                    <img item-right
                                                        style="width: 3.8rem;float:right;object-fit: cover;margin:0.5rem"
                                                        src="assets/img/icon-players-side.png">
                                                        
                                                          
                                                    <ion-badge item-left class="scoring-badge" style="padding:0;margin-top:0">
                                                        <h2 class="score">{{getCount(tf,'player')}}</h2>
                                                    </ion-badge>
                                                </ion-col>
                                                <!-- style="text-align: right;" -->
                                                <ion-col style="text-align:center; max-width: 8rem">
                                                    <!-- padding-left: 2rem; -->
                                                    <img item-right
                                                        style="width: 3.3rem;float:right;object-fit: cover;margin:0.5rem"
                                                        src="assets/img/icon-caddie_.svg">

                                                    <ion-badge item-left class="scoring-badge"
                                                        style="padding:0;margin-top:0">
                                                        <h2 class="score">{{getCount(tf.bookingPlayers,'caddy')}}</h2>
                                                    </ion-badge>
                                                    <ion-badge *ngIf="0" class="scoring-badge"
                                                        style="padding:0;margin-top:0">
                                                        <div>
                                                            <!-- <h2 class="score">{{tf.buggyRequested}}</h2> -->
                                                            <h2 class="score">{{getCount(tf.bookingPlayers,'buggy')}}
                                                                <img style="width: 2.5rem;float:left;object-fit: cover;margin:0.5rem"
                                                                    src="assets/img/icon-caddie_.svg"></h2>
                                                        </div>
                                                        <!-- <p class="score-type">Buggies</p> -->
                                                    </ion-badge>
                                                    <!-- </ion-col>
                                                <ion-col  style="text-align: center;">  -->

                                                </ion-col>
                                                <ion-col style="text-align:center; max-width: 9rem">
                                                    <!-- padding-left: 1.5rem; -->
                                                    <img item-right
                                                        style="width: 3.8rem;float:right;object-fit: cover;margin:0.5rem"
                                                        src="assets/img/icon-buggy-new.svg">
                                                    <ion-badge item-left class="scoring-badge"
                                                        style="padding:0;margin-top:0">
                                                        <h2 class="score">{{getCount(tf.bookingPlayers,'buggy')}}</h2>
                                                    </ion-badge>
                                                </ion-col>
                                                <ion-col col-2 class="mg-txt-right">
                                                    <!-- <button *ngIf="checkActionAccess(tf)" ion-button small item-right outline (click)="goFlightUpdate(tf)">ACTION</button> -->
                                                    <button ion-button small item-right outline
                                                        (click)="goFlightDetail(tf)"><i class="fas fa-fw fa-eye"></i>
                                                        <!-- SEATINGS -->
                                                    </button>
                                                    <button ion-button small item-right outline
                                                        (click)="goBookingDetails(tf)"><i class="fas fa-fw fa-cog"></i>
                                                        <!-- DETAILS -->
                                                    </button>
                                                    <!-- <span><ion-reorder></ion-reorder></span>     -->
                                                </ion-col>
                                            </ion-row>
                                            <!-- <ion-row no-padding style="place-items: center">
                                                <ion-col col-5 class="mg-txt-left">
                                                    <button ion-button small clear>Waiting players</button></ion-col>
                                                <ion-col col-7 class="mg-txt-right">
                                                    <button ion-button small item-right outline (click)="goFlightUpdate()">ACTION</button>
                                                    <button ion-button small item-right outline (click)="goFlightDetail(2)">DETAILS</button>
                                                </ion-col>
                                            </ion-row> -->

                                            <!-- </ion-grid> -->
                                        </ion-card-content>
                                    </div>

                                </ion-card>
                            </ion-item>
                        </ion-col>
                    </ion-row>

                </span>
                <ion-infinite-scroll (ionInfinite) = "doInfinite($event)"
                threshold = "40%">
                <ion-infinite-scroll-content
                        loadingSpinner = "bubbles"
                        loadingText = "">
                    </ion-infinite-scroll-content>
                </ion-infinite-scroll>
            </ion-list>
        </ion-col>



    </ion-row>
</ion-content>
<ion-footer *ngIf="0" style="background-color: #DDF6D6 !important;">
    <ion-row style="text-align: center;">
        <ion-col col-2>
            <img style="height: 5rem; padding:1rem;" class="footer-icons" src="assets/img/footer-icon-calendar.png" />
        </ion-col>
        <ion-col col-2 (click)="onNotificationsClick()">
            <img style="height: 5rem; padding:1rem;" class="footer-icons"
                src="assets/img/footer-icon-notification.png" />
        </ion-col>
        <ion-col col-4 (click)="onHomeClick()">
            <img style="height: 5rem;" src="assets/img/footer-icon-mg2u.png" />
        </ion-col>
        <ion-col col-2>
            <img style="height: 5rem; padding:1rem;" class="footer-icons" src="assets/img/icon-question-only.png" />
        </ion-col>
        <ion-col col-2>
            <img style="height: 5rem; padding:1rem;" class="footer-icons" src="assets/img/footer-icon-player.png" />
        </ion-col>
    </ion-row>

</ion-footer>