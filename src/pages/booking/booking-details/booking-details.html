<ion-header>
    <ion-navbar class="mg2u-navbar">
        <ion-title center><img class="mg2u-logo" src="assets/img/mg2u-logo-top.svg" /></ion-title>
        <ion-buttons end>
            <button *ngIf="!teeSlotNew" ion-button (click)="onRefreshClick()">Refresh</button>
        </ion-buttons>

    </ion-navbar>
    <!-- <ion-toolbar color = "light" *ngIf="!teeSlotNew" > -->
    <!-- <ion-segment [(ngModel)] = "bookings" color = "warning" padding>
            <ion-segment-button (click) = "setBookingType(1)" value = "search">
                SEARCH TEE TIMES
            </ion-segment-button>
            <ion-segment-button (click) = "setBookingType(2)" value = "mybookings">
                MY BOOKINGS
            </ion-segment-button>
        </ion-segment> -->
    <!-- <ion-item style="text-align: center;">Booking Reference #23512</ion-item> -->

    <!-- </ion-toolbar> -->
</ion-header>
<ion-content >
    <!-- <ion-grid fixed> -->
    <!-- <ion-refresher pullMin="100" (ionRefresh)="onRefreshClick()">
        <ion-refresher-content pullingIcon="arrow-down" pullingText="" refreshingSpinner="circles"
            refreshingText="Refreshing ...">
        </ion-refresher-content>
    </ion-refresher> -->
    <ion-item-group>
        
        <ion-item-divider sticky *ngIf="!teeSlotNew && !fromClub"
        style="margin:10px;margin-bottom:0;width:calc(100% - 2.3rem);padding-left:5px;padding-right:5px;
        border-style:solid;border-color:green;border-width:thin;border-radius:1em;background-color:#DDF6D6;">
        <ion-row >
            <ion-col col-6 style="text-align: left;font-size: medium;">
                <strong>{{teeTimeSlotDisplay.slot.teeOffDate | date:"EEEE, d MMMM yyyy"}}</strong><br>
                Status : <strong>{{getBookingDetails('status')}}</strong>
            </ion-col>
            <ion-col col-6 style="text-align: right;font-size:medium;font-weight: bold;">
            
            <span style="color:#1b6a34;">{{getProperTime(teeTimeSlotDisplay.slot.teeOffTime)}}</span><br>
                <span style="font-size: 2.3rem;
                letter-spacing: 1px;align-self: center;">
                <strong>{{getBookingDetails('currency')}} {{getBookingDetails('price')  | number: '1.2-2'}}</strong>
            </span>
            </ion-col>
        </ion-row></ion-item-divider>
        <ion-item *ngIf="teeSlotNew"
        style="margin-top:3px;margin:10px;width:calc(100% - 2.3rem);padding-left:5px;padding-right:5px;border-style:solid;border-color:green;border-width:thin;border-radius:1em;background-color:#DDF6D6;">
        <ion-row >
            <ion-col style="text-align:left;font-size: medium;font-weight: bold;">
                {{teeTimeSlotDisplay.slot.teeOffDate | date:"EEEE, d MMMM yyyy"}}
            </ion-col>
            <ion-col style="text-align:right;color:#1b6a34;font-size: medium;font-weight: bold;">
                {{getProperTime(teeTimeSlotDisplay.slot.teeOffTime)}}
            </ion-col>
        </ion-row> 
        </ion-item>
        <!-- class="hide-card" -->
    <ion-list *ngIf="!fromClub" >
        <!-- <ion-grid fixed> -->
        <ion-card no-padding class="slot-box"> <!-- booking information-->
            <ion-card-header no-padding class="slot-subtitle-box">
                <ion-row>
                    <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;"  (click)="toggleBookingClick(1)">
                        <img style="max-height:1.5em;width:webkit-fill-available"
                            src="assets/img/booking-item-time.svg" />
                    </ion-col>
                    <ion-col col-9 style="background-color: white;letter-spacing: 2px;"  (click)="toggleBookingClick(1)">
                        Booking Information
                    </ion-col>
                    <ion-col col-1 style="padding-left:0;padding-right:0;">
                        <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                        <i *ngIf="checkBookingTabsComplete('1')" class="fa fa-fw fa-check-circle "></i>
                        <i (click)="checkExclamationInfo('1')" *ngIf="!checkBookingTabsComplete('1')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        <!-- </ion-badge> -->
                    </ion-col> 
                </ion-row>
            </ion-card-header>
            <ion-card-content *ngIf="grpTeeSlotInfo" style="padding:1rem;" class="slot-detail-box">
                <!-- <ion-item>
                Booked by {{bookingSlot.bookedByPlayer?bookingSlot.bookedByPlayer.playerName:''}}
                </ion-item> -->
                <ion-item style="text-align: center;letter-spacing:1px;padding:0;">
                    <h1 *ngIf="getClubCourseDetails('club')" style="font-weight:bold;text-overflow: ellipsis;overflow: hidden;">{{getClubCourseDetails('club')}}</h1>
                    <h2 style="font-weight:bold;text-overflow: ellipsis;overflow: hidden;margin-bottom:1rem">{{getClubCourseDetails('course')}}</h2>
                            <span style="text-align: left;" *ngIf="!teeSlotNew 
                            && (bookingSlot.bookingStatus === 'CancelledByClub' || bookingSlot.bookingStatus === 'CancelledByPlayer')">
                            <p style="font-size: 1.5rem;" *ngIf="bookingSlot.cancellationReason"><b>Reason for cancellation </b>: {{bookingSlot.cancellationReason?bookingSlot.cancellationReason:''}}</p>
                            <p style="font-size: 1.5rem;" *ngIf="bookingSlot.canceledBy && bookingSlot.canceledBy.name"><b>Cancelled by</b>: {{bookingSlot.canceledBy?bookingSlot.canceledBy.name:''}}</p>
                            
                </span>
                    <!-- <span> -->
                    <!-- </span> -->
                    <span *ngIf="!teeSlotNew && bookingSlot">
                        <div class="row">
                            <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked by: </span><strong>{{bookingSlot?(bookingSlot.bookedByUser?bookingSlot.bookedByUser.name:bookingSlot.bookedByPlayer.playerName):''}}</strong></div>
                        </div>
                        <div class="row" *ngIf="bookingSlot.bookingCreatedAt">
                            <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked on: </span><strong>{{getBookingDetails('bookedOn')}}</strong></div>
                        </div>
                        <div class="row">
                            <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Ref: </span><strong>{{getBookingDetails('reference')}}</strong></div>
                        </div>
                        <br>
                        <h1 style="color:#30bb5b; text-align:left;"><strong>Booking Details</strong></h1>
                        <div class="row">
                            <div class="column info-item info-header" style="width:40%">Item</div>
                            <div class="column info-requested info-header" style="width:40%;">Requested</div>
                            <div class="column info-actual info-header" style="width:20%">Actual</div>
                        </div>
                        <div class="row" *ngIf="bookingSlot.slotAssigned.startCourse.id !== bookingSlot.slotPreferred.startCourse.id">
                            <div class="column info-item">Course Played</div>
                            <div class="column info-requested">{{bookingSlot.slotAssigned.startCourse.name}}</div>
                            <div class="column info-actual">{{bookingSlot.slotPreferred.startCourse.name}}</div>
                        </div>
                        <div class="row" *ngIf="bookingSlot.slotAssigned.teeOffTime !== bookingSlot.slotPreferred.teeOffTime">
                            <div class="column info-item">Tee Off Time</div>
                            <div class="column info-requested">{{getProperTime(bookingSlot.slotPreferred.teeOffTime)}}</div>
                            <div class="column info-actual">{{getProperTime(bookingSlot.slotAssigned.teeOffTime)}}</div>
                        </div>
                        <div class="row">
                            <div (click)="onChangeNinesBooking()" class="column info-item">Holes to Play<i *ngIf="checkHolesAllowedEnable() && bookingType!=='past'  && (bookingSlot.bookingStatus!=='CancelledByPlayer' && bookingSlot.bookingStatus !== 'CancelledByClub')" class="fa fa-fw fa-cog"></i></div>
                            <div class="column info-requested">{{bookingSlot.ninesPlayed?bookingSlot.ninesPlayed*9:'-'}}</div>
                            <div class="column info-actual">{{bookingSlot.ninesPlayed?bookingSlot.ninesPlayed*9:'-'}}</div>
                        </div>
                        <div class="row">
                            <div class="column info-item">Players</div>
                            <div class="column info-requested">{{bookingSlot.totalPlayers}}</div>
                            <div class="column info-actual">{{bookingSlot.bookingPlayers.length}}</div>
                        </div>
                        <div class="row">
                            <div class="column info-item">Buggies</div>
                            <div class="column info-requested">{{bookingSlot.buggyRequested}}</div>
                            <div class="column info-actual">{{buggyReq}}</div>
                        </div>
                        <div class="row">
                            <div class="column info-item">Caddies</div>
                            <div class="column info-requested">{{bookingSlot.caddyRequested}}</div>
                            <div class="column info-actual">{{caddyReq}}</div>
                        </div>
                        <div class="row" style="margin-bottom:1rem" (click)="onEstimatePriceClick()">
                            <div class="column info-item">Estimated Cost ({{bookingSlot.slotAssigned.currency.symbol}})<i style="color:#30bb5b; font-size:2rem;" class="fa fa-fw fa-question-circle"></i></div>
                            <div class="column info-requested">{{getEstimatedPrice('requested') | number: '1.0-2'}}</div>
                            <div class="column info-actual">{{getEstimatedPrice('actual') | number: '1.0-2'}}</div>
                        </div>
                        <h3 (click)="onMoreTeeSlotSettings()" style=" text-align:left;">See Tee Slot Settings<i style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i></h3>
                     </span>
                   
                </ion-item>
                
                <ion-item *ngIf="!teeSlotNew && getAllowUpdatePostPayment('deals')" style="text-align:center" no-padding>
                    <!-- *ngIf="prices || promoPrices" -->
                    <!-- <h1><span *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)" 
                        [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></h1> -->
                    <button style="height: 3em !important"  text-wrap ion-button clear (click)="togglePrices()" class="voucher-header">
                        <!-- *ngIf="promoPrices || prices" -->
                        <strong>
                        <span *ngIf="!displayPrices" style="color:red;font-size: large;"><i class="fas fa-fw fa-tags"></i>&nbsp;See other packages / deals</span>
                        <span *ngIf="displayPrices">Close</span>
                    </strong>
                    </button>
                    <ion-grid padding *ngIf="displayPrices">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Packages Available</button>
                        </ion-col>
                        
                        <ion-row *ngFor="let price of getClubPackages()" col-12>
                            <ion-col no-padding class="price-field">{{price.name}}</ion-col>
                            <ion-col no-padding class="price-param">
                                <span style="color:#5DBC81;font-weight:bold;">{{bookingSlot.slotAssigned.currency.symbol}} {{numberWithCommas(price.amount)}}</span>
                                <!-- <span [innerHTML]="getSlotPrice(clubs.slots[0],price.id)"></span> -->
                            </ion-col>
                        </ion-row>
                        <div *ngIf="0">
                        <ion-row *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)">
                            <ion-col class="price-field">Visitor</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.SENIOR) || (promoPrices && promoPrices.SENIOR)">
                                <ion-col class="price-field">Senior Citizen</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'SENIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.STAFF) || (promoPrices && promoPrices.STAFF)">
                                <ion-col class="price-field">Staff Member</ion-col>
                                <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STAFF')"></span></ion-col>
                            </ion-row>
                            <ion-row *ngIf="(prices && prices.LADIES) || (promoPrices && promoPrices.LADIES)">
                                    <ion-col class="price-field">Ladies</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'LADIES')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.ARMY) || (promoPrices && promoPrices.ARMY)">
                                <ion-col class="price-field">Army</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'ARMY')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GOVT) || (promoPrices && promoPrices.GOVT)">
                                <ion-col class="price-field">Civil Servants</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GOVT')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.JUNIOR) || (promoPrices && promoPrices.JUNIOR)">
                                <ion-col class="price-field">Junior</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'JUNIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.MEMBER) || (promoPrices && promoPrices.MEMBER)">
                                <ion-col class="price-field">Club Member</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'MEMBER')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.POLICE) || (promoPrices && promoPrices.POLICE)">
                                <ion-col class="price-field">Police</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'POLICE')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.WOMAN) || (promoPrices && promoPrices.WOMAN)">
                                <ion-col class="price-field">Women</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'WOMAN')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GUEST) || (promoPrices && promoPrices.GUEST)">
                                <ion-col class="price-field">Member's Guest</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GUEST')"></span></ion-col>
                        </ion-row>
                    </div>
                    </ion-grid>
                    <ion-row *ngIf="displayPrices && !getPromoPlan(bookingSlot.slotAssigned,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Package Details</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getNormalPlan(bookingSlot.slotAssigned,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getNormalPlan(bookingSlot.slotAssigned,'description')"></li>
                                <li>Discount(s) Applicable : {{getNormalPlan(bookingSlot.slotAssigned,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row *ngIf="displayPrices && getPromoPlan(bookingSlot.slotAssigned,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Promotion(s) Available</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getPromoPlan(bookingSlot.slotAssigned,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getPromoPlan(bookingSlot.slotAssigned,'description')"></li>
                                <li>Discount(s) Applicable : {{getPromoPlan(bookingSlot.slotAssigned,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row col-12 *ngIf="displayPrices && voucherSeries && voucherSeries.length>0">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">
                                {{!fromClub && playerVoucher && playerVoucher.length > 0?playerVoucher.length:''}} Voucher(s) Available</button>
                            <!-- (click)="clubs.showPromo = !clubs.showPromo" -->
                        </ion-col>
                        <ng-container *ngFor="let vs of voucherSeries" col-12>
                            <div no-padding col-12>
                            <ion-row col-12 no-padding>
                                <ion-col col-12 padding-left padding-right no-padding text-left style="white-space:normal; font-weight: bold;">
                                    <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                    <b>{{vs.name}}</b>
                                </ion-col>
                                
                            </ion-row>
                            <ion-row col-12>
                                <ion-col col-8
                                padding-left padding-right no-padding text-left>
                            <ul>
                                <li *ngIf="vs.description" [innerHTML]="escapeCRLF(vs.description)">
                                    <!-- {{vs.description}} -->
                                </li>
                                   <li *ngIf="vs.allowOnWeekdays || vs.allowOnWeekends || vs.allowOnPublicHolidays">
                                        {{getVoucherApplicableText(vs,'allowDays')}}
                                    </li>
                                    <li *ngIf="vs.appliesToBookingAmount">
                                        {{getVoucherApplicableText(vs,'bookingAmount')}}
                                    </li>
                                    <li *ngIf="vs.appliesToFlight">
                                        {{getVoucherApplicableText(vs,'flight')}}
                                    </li>
    
                                    <!-- <li>
                                        {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency)}}
                                    </li>                                         -->
                                    <li>
                                        Validity {{vs.validityDays}} days
                                    </li>
                            </ul>
                        </ion-col>
                        <ion-col col-4 padding-left padding-right no-padding text-right style="white-space:normal; text-align: right;color:#5DBC81;font-weight:bold;">
                            <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                            <span [innerHTML]="getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')">

                            </span>
                            <!-- {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')}} -->
                        </ion-col>
                        </ion-row>
                    </div>
                    </ng-container>
                    </ion-row>
                        <ion-row col-12 *ngIf="displayPrices && playerActiveClubDiscount && playerActiveClubDiscount.length>0">
                        <!-- <ion-col padding-left padding-right no-padding text-right col-6>- RM 30</ion-col> -->
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Club Discounts/Privilege Cards</button>
                        </ion-col>
                        <ng-container  *ngFor="let cDiscounts of playerActiveClubDiscount" col-12>
                            <div *ngIf="cDiscounts && cDiscounts.active" no-padding col-12>
                                <ion-row col-12 no-padding>
                                <ion-col col-12 padding-left padding-right no-padding text-left style="white-space: normal;">
                                    <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                    <b>{{cDiscounts.name}}</b>
                                    <span style="color:#5DBC81;" *ngIf="!getEligibleDiscount(cDiscounts,'approved')" 
                                    (click)="onEligibleClick('Yes')"><i class="fas fa-fw fa-check-circle"></i></span>
                                    <!-- <span style="color:red" *ngIf="getEligibleDiscount(cDiscounts,'approved')" 
                                    (click)="onEligibleClick('No')"><i class="fas fa-fw fa-info-circle"></i></span> -->
                                </ion-col>
                                
                                </ion-row>
                                <ion-row col-12>
                                <ion-col col-8 
                                 padding-left padding-right no-padding text-left>
                                    <ul>
                                <li *ngIf="cDiscounts && cDiscounts.description" [innerHTML]="escapeCRLF(cDiscounts.description)">
                                    <!-- {{cDiscounts.description}} -->
                                </li>
                                <li>Valid <b>{{getDateText(cDiscounts.validFrom)}}</b> to <b >{{getDateText(cDiscounts.validUntil)}}</b></li>
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesFor')">{{getDiscountText(cDiscounts, 'appliesFor')}}</li> 
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesTo')">{{getDiscountText(cDiscounts, 'appliesTo')}}</li>
                                <span *ngIf="0 && cDiscounts && !cDiscounts.applicableRate && cDiscounts.discountRates && cDiscounts.discountRates.length > 0">
                                    <li>Available Discounts rates :</li>
                                            <ul *ngFor="let rate of cDiscounts.discountRates">
                                                <li>{{rate.dayName}}</li>
                                            </ul>
                                    </span>
                                    </ul>
                                </ion-col>
                                <ion-col col-4 padding-left padding-right no-padding text-right style="white-space: normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                    <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                                    <span [innerHTML]="getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')" 
                                    style="color:#5DBC81;font-weight:bold;">
                                     <!-- {{getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')}} -->
                                 </span>
                                </ion-col>
                            </ion-row>
                        </div>
                              </ng-container>
                    </ion-row>
                    <button *ngIf="displayPrices" ion-button small clear block (click)="togglePrices()" class="voucher-header">
                        <span >Close</span>
                    </button>
                </ion-item>
                <ion-item *ngIf="teeSlotNew">
                    <h2>How many golfers playing?</h2>
                    <button class="button-subtract" clear icon-only color="danger" (click)="addPlayers(-1)" ion-button item-right>
                        <img src="assets/img/button-minus.svg" />
                    </button>
                    <button class="button-value" outline ion-button item-right>{{playerReq}}</button>
                    <button class="button-add"  clear icon-only (click)="addPlayers(1)" ion-button item-right>
                        <img src="assets/img/button-plus.svg" /> 
                    </button>
               
                        <!-- <button class="button-subtract" outline color="danger" (click)="addPlayers(-1)" small ion-button item-right><i class="fas fa-minus"></i></button>
                                <button class="button-value" outline ion-button item-right>{{playerReq}}</button>
                                <button class="button-add" outline (click)="addPlayers(1)" small ion-button item-right><i class="fas fa-plus"></i></button>  -->
                               
                </ion-item>
                <ion-item  *ngIf="teeSlotNew && fromClub" style="padding-left:0.5em">
                    <div class="row">
                        <div class="column" style="width:20%">
                            <img style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em"
                            [src]="getClubPlayerDetails('image')" onerror="this.src='img/default-user.jpg'">
                        </div>
                        <div class="column" style="width:80%">
                            <div class="row">
                                <div class="column" style="width:80%;white-space: nowrap;
                                overflow: hidden;">
                                    <h2 style="font-size: medium;font-weight: bold;color: green;">{{getClubPlayerDetails('name')}} {{getClubPlayerDetails('id')}}</h2>
                                    <!-- <h3 [innerHTML]="getPlayerSlotDetails(99,'discount')"></h3> -->
                                </div>
                                <div class="column" style="width:20%;text-align:right" >
                                         <button class="player-action" *ngIf="!clubBookingPlayers " (click)="onClubPlayerSelect()" clear ion-button >
                                                    <i class="fas fa-fw fa-plus-circle"></i>
                                                </button>
                                            <button class="player-action" *ngIf="clubBookingPlayers" (click)="onClubDeleteBookingPlayer()" ion-button clear >
                                                <i style="color:red" class="fa fa-times-circle "></i>
                                            </button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="column" style="width:80%">
                                    <span *ngIf="!clubBookingPlayers" style="display:inline-flex;">
                                        <input (keyup.enter)="searchClubBookingPlayer()" style="width:12rem;height:2rem;margin-right:2px" placeholder="Club Mship No." type="text" [disabled]="clubSearchById && clubSearchById > 0 || isBookingCancel()" [(ngModel)]="clubSearchByMembership"/> 
                                        <input (keyup.enter)="searchClubBookingPlayer()" style="width:7rem;height:2rem;margin-right:2px" type="number" placeholder="mg2u ID" [disabled]="clubSearchByMembership && clubSearchByMembership.length > 0 || isBookingCancel()" [(ngModel)]="clubSearchById"/>
                                      
                                    <button class="player-action" (click)="clearClubSearchPlayer()" ion-button clear >
                                                <i style="color:grey" class="fa fa-times-circle "></i>
                                            </button>
                                        </span>
                                        
                                </div>
                                <div class="column" style="width:20%;text-align:right">
                                        <button (click)="searchClubBookingPlayer()" class="player-action" *ngIf="!clubBookingPlayers" clear ion-button>
                                                <i class="fas fa-fw fa-search"></i>
                                            </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="" -->
                </ion-item>
                <div *ngIf="teeSlotNew ">
                    <!-- && teeTimeSlotDisplay.slot.allowWalking -->
                    <ion-item >
                        <!-- *ngIf="teeSlotNew" -->
                        <ion-label>*** Do you require buggy?&nbsp;&nbsp;<span style="color:green">{{buggyRequired?"Yes":"No"}}</span></ion-label>
                        <ion-toggle [disabled]="!teeTimeSlotDisplay.slot.allowWalking" [(ngModel)]="buggyRequired"></ion-toggle>
              </ion-item>
            </div>
            
        <div *ngIf="teeSlotNew">
            <!-- && !teeTimeSlotDisplay.slot.caddyMandatory -->
              <ion-item>
                <ion-label>*** Do you require caddy?&nbsp;&nbsp;<span style="color:green">{{caddyRequired?"Yes":"No"}}</span></ion-label>
                <ion-toggle [disabled]="teeTimeSlotDisplay.slot.caddyMandatory" [(ngModel)]="caddyRequired"></ion-toggle>
      </ion-item>
         </div>
    <!-- <div *ngIf="teeTimeSlotDisplay.slot.allowWalking || !teeTimeSlotDisplay.slot.caddyMandatory">
        <span style="font-style:italic" *ngIf="teeSlotNew">*** You can change this setting later in the booking</span>
        <span style="font-style:italic" *ngIf="!teeSlotNew">*** Note :  This will only affect current booking session</span>
    </div> -->
                    <!-- <ion-item> -->
                        <ion-item *ngIf="teeSlotNew">
                            <ion-label item-left>Playing 9 or 18 holes? <b style="color:green">{{holesPlayed==='1'?'9':'18'}}</b></ion-label>
                            <ion-segment  [disabled]="!checkHolesAllowedEnable()" item-right no-padding [(ngModel)]="holesPlayed">
                                <!-- [disabled]="!teeTimeSlotDisplay.slot.eighteenHolesAllowed" -->
                                <ion-segment-button value="1">
                                    9<span *ngIf="holesPlayed==='1'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                </ion-segment-button>
                                <ion-segment-button value="2">
                                    18<span *ngIf="holesPlayed==='2'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                </ion-segment-button>
                            </ion-segment>
                        </ion-item>
                        <ion-item *ngIf="teeSlotNew && !fromClub">
                                  <ion-label>Are you booking for someone else?&nbsp;&nbsp;<span style="color:green">{{bookForOther?"Yes":"No"}}</span></ion-label>
                                  <ion-toggle [(ngModel)]="bookForOther"></ion-toggle>
                        </ion-item> 
                        
          <!-- <ion-item *ngIf="teeSlotNew">
            <h2>How many buggies needed?</h2>
            <button class="button-subtract" clear icon-only color="danger" (click)="addBuggy(-1)" ion-button item-right>
                <img src="assets/img/button-minus.svg" />
            </button>
            <button class="button-value" outline ion-button item-right>{{buggyReq}}</button>
            <button class="button-add"  clear icon-only (click)="addBuggy(1)" ion-button item-right>
                <img src="assets/img/button-plus.svg" /> 
            </button>
       
             
        </ion-item> -->
        <!-- <ion-item *ngIf="teeSlotNew">
            <h2>How many caddies needed?</h2>
            <button class="button-subtract" clear icon-only color="danger" (click)="addCaddy(-1)" ion-button item-right>
                <img src="assets/img/button-minus.svg" />
            </button>
            <button class="button-value" outline ion-button item-right>{{caddyReq}}</button>
            <button class="button-add"  clear icon-only (click)="addCaddy(1)" ion-button item-right>
                <img src="assets/img/button-plus.svg" /> 
            </button>
       
        </ion-item> -->

                        <!-- <ion-item *ngIf="bookingSlot && bookingSlot.bookedByPlayer">Booked by {{bookingSlot.bookedByPlayer?bookingSlot.bookedByPlayer.playerName:''}}</ion-item> -->

                    <!-- <h3>{{this.teeTimeSlotDisplay.slot.eighteenHolesAllowed?18:9}} Holes</h3> -->
                    <ion-item *ngIf="teeSlotNew">
                        <h2 (click)="onMoreTeeSlotSettings()" style=" text-align:left;">See Tee Slot Settings<i style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i></h2>
                    </ion-item>
                    <ion-item *ngIf="getAllowUpdatePostPayment('deals') && (prices || promoPrices)" style="text-align:center" no-padding>
                    <h1><span *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)" 
                        [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></h1>
                        <!-- <h2 *ngIf="playerReq>1"></h2>
                        <h4 *ngIf="playerReq>1"></h4> -->
                    <button style="height: 3em !important" text-wrap *ngIf="getAllowUpdatePostPayment('deals') && (promoPrices || prices)" ion-button clear (click)="togglePrices()" class="voucher-header">
                        <!-- color="danger" -->
                        <strong>
                        <span *ngIf="!displayPrices" style="color:red;font-size: large;"><i class="fas fa-fw fa-tags"></i>&nbsp;See other packages / deals</span>
                        <span *ngIf="displayPrices">Close</span>
                    </strong>
                    </button>
                    <ion-grid padding *ngIf="displayPrices">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Packages Available</button>
                        </ion-col>
                        
                        <ion-row *ngFor="let price of getClubPackages('new')" col-12>
                            <ng-container *ngIf="price.id">
                            <ion-col no-padding class="price-field">{{price.name}}</ion-col>
                            <ion-col no-padding class="price-param">
                                <!-- <span style="color:#5DBC81;font-weight:bold;">{{teeTimeSlotDisplay.currency.symbol}} {{price.amount}}</span> -->
                                <span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,price.id)"></span>
                                <!-- <span [innerHTML]="getSlotPrice(clubs.slots[0],price.id)"></span> -->
                            </ion-col>
                        </ng-container>
                        </ion-row>
                        <div *ngIf="0">
                        <ion-row *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)">
                            <ion-col class="price-field">Visitor</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.SENIOR) || (promoPrices && promoPrices.SENIOR)">
                                <ion-col class="price-field">Senior Citizen</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'SENIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.STAFF) || (promoPrices && promoPrices.STAFF)">
                                <ion-col class="price-field">Staff Member</ion-col>
                                <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STAFF')"></span></ion-col>
                            </ion-row>
                            <ion-row *ngIf="(prices && prices.LADIES) || (promoPrices && promoPrices.LADIES)">
                                    <ion-col class="price-field">Ladies</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'LADIES')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.ARMY) || (promoPrices && promoPrices.ARMY)">
                                <ion-col class="price-field">Army</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'ARMY')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GOVT) || (promoPrices && promoPrices.GOVT)">
                                <ion-col class="price-field">Civil Servants</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GOVT')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.JUNIOR) || (promoPrices && promoPrices.JUNIOR)">
                                <ion-col class="price-field">Junior</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'JUNIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.MEMBER) || (promoPrices && promoPrices.MEMBER)">
                                <ion-col class="price-field">Club Member</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'MEMBER')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.POLICE) || (promoPrices && promoPrices.POLICE)">
                                <ion-col class="price-field">Police</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'POLICE')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.WOMAN) || (promoPrices && promoPrices.WOMAN)">
                                <ion-col class="price-field">Women</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'WOMAN')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GUEST) || (promoPrices && promoPrices.GUEST)">
                                <ion-col class="price-field">Member's Guest</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GUEST')"></span></ion-col>
                        </ion-row>
                    </div>
                    </ion-grid>
                    <ion-row *ngIf="displayPrices && !getPromoPlan(teeTimeSlotDisplay.slot,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Package Details</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getNormalPlan(teeTimeSlotDisplay.slot,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getNormalPlan(teeTimeSlotDisplay.slot,'description')"></li>
                                <li>Discount(s) Applicable : {{getNormalPlan(teeTimeSlotDisplay.slot,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row *ngIf="displayPrices && getPromoPlan(teeTimeSlotDisplay.slot,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Promotion(s) Available</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getPromoPlan(teeTimeSlotDisplay.slot,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getPromoPlan(teeTimeSlotDisplay.slot,'description')"></li>
                                <li>Discount(s) Applicable : {{getPromoPlan(teeTimeSlotDisplay.slot,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row col-12 *ngIf="displayPrices && voucherSeries && voucherSeries.length>0">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">
                                {{!fromClub && playerVoucher && playerVoucher.length > 0?playerVoucher.length:''}} Voucher(s) Available</button>
                            <!-- (click)="clubs.showPromo = !clubs.showPromo" -->
                        </ion-col>
                        <ng-container *ngFor="let vs of voucherSeries" col-12>
                            <div no-padding col-12>
                            <ion-row col-12 no-padding>
                                <ion-col col-12 padding-left padding-right no-padding text-left style="white-space:normal; font-weight: bold;">
                                    <b>{{vs.name}}</b>
                                </ion-col>
                                
                            </ion-row>
                            <ion-row col-12>
                                <ion-col col-8 
                                padding-left padding-right no-padding text-left>
                            <ul>
                                <li *ngIf="vs.description" [innerHTML]="escapeCRLF(vs.description)">
                                <!-- >{{vs.description}} -->
                                </li>
                                   <li *ngIf="vs.allowOnWeekdays || vs.allowOnWeekends || vs.allowOnPublicHolidays">
                                        {{getVoucherApplicableText(vs,'allowDays')}}
                                    </li>
                                    <li *ngIf="vs.appliesToBookingAmount">
                                        {{getVoucherApplicableText(vs,'bookingAmount')}}
                                    </li>
                                    <li *ngIf="vs.appliesToFlight">
                                        {{getVoucherApplicableText(vs,'flight')}}
                                    </li>
    
                                    <!-- <li>
                                        {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency)}}
                                    </li>                                         -->
                                    <li>
                                        Validity {{vs.validityDays}} days
                                    </li>
                            </ul>
                        </ion-col>
                        <ion-col col-4 padding-left padding-right no-padding text-right style="white-space:normal; text-align: right;color:#5DBC81;font-weight:bold;">
                            <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                            <span [innerHTML]="getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')">
                            </span>
                            <!-- {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')}} -->
                        </ion-col>
                        </ion-row>
                        </div>
                    </ng-container>
                    </ion-row>
                        <ion-row col-12 *ngIf="displayPrices && playerActiveClubDiscount && playerActiveClubDiscount.length>0">
                        <!-- <ion-col padding-left padding-right no-padding text-right col-6>- RM 30</ion-col> -->
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Club Discounts/Privilege Cards</button>
                        </ion-col>
                        <ng-container  *ngFor="let cDiscounts of playerActiveClubDiscount" col-12>
                            <div *ngIf="cDiscounts && cDiscounts.active" no-padding col-12>
                                <ion-row col-12 no-padding>
                                <ion-col col-8 padding-left padding-right no-padding text-left style="white-space: normal;">
                                    <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                    <b>{{cDiscounts.name}}</b>
                                    <span style="color:#5DBC81;" *ngIf="!getEligibleDiscount(cDiscounts,'approved')" 
                                    (click)="onEligibleClick('Yes')"><i class="fas fa-fw fa-check-circle"></i></span>
                                    <!-- <span style="color:red" *ngIf="getEligibleDiscount(cDiscounts,'approved')" 
                                    (click)="onEligibleClick('No')"><i class="fas fa-fw fa-info-circle"></i></span> -->
                                </ion-col>
                                
                                </ion-row>
                                <ion-row col-12>
                                <ion-col col-8 
                                 padding-left padding-right no-padding text-left>
                                <ul>
                                <li *ngIf="cDiscounts && cDiscounts.description" [innerHTML]="escapeCRLF(cDiscounts.description)">
                                    {{cDiscounts.description}}
                                </li>
                                <li>Valid <b>{{getDateText(cDiscounts.validFrom)}}</b> to <b >{{getDateText(cDiscounts.validUntil)}}</b></li>
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesFor')">{{getDiscountText(cDiscounts, 'appliesFor')}}</li> 
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesTo')">{{getDiscountText(cDiscounts, 'appliesTo')}}</li>
                                <span *ngIf="0 && cDiscounts && !cDiscounts.applicableRate && cDiscounts.discountRates && cDiscounts.discountRates.length > 0">
                                    <li>Available Discounts rates :</li>
                                        <ul *ngFor="let rate of cDiscounts.discountRates">
                                            <li>{{rate.dayName}}</li>
                                        </ul>
                                </span>
                                </ul>
                                </ion-col>
                                <ion-col col-4 padding-left padding-right no-padding text-right style="white-space: normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                    <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                                    <span [innerHTML]="getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')"
                                    style="color:#5DBC81;font-weight:bold;">
                                     <!-- {{getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')}} -->
                                 </span>
                                </ion-col>
                            </ion-row>
                        </div>
                              </ng-container>
                    </ion-row>
                        <!-- <ng-container *ngIf="clubDiscounts && clubDiscounts.length > 0">
                            <ion-col col-12 *ngFor="let cDiscounts of clubDiscounts" padding-left padding-right no-padding text-left>
                                {{cDiscounts.name}}
                                <ul>
                                    <li>Valid {{cDiscounts.validFrom}} to {{cDiscounts.validUntil}}</li>
                                    <li>
                                        {{getDealsAmount(cDiscounts.discount, cDiscounts.amountType,clubs.club.address.countryData.currencySymbol)}}
                                    </li>
                                </ul>
                            </ion-col>
                              </ng-container> -->
                        <button *ngIf="displayPrices" ion-button small clear block (click)="togglePrices()" class="voucher-header">
                            <span >Close</span>
                        </button>
                </ion-item>
            </ion-card-content>
            <ion-item text-wrap *ngIf="0 && !teeSlotNew" >
                <ion-toggle (ionChange)="onBookingCancelGuard()" item-start [(ngModel)]="bookingCancelGuard"></ion-toggle>
                <ion-label text-wrap item-end>Allow Players to Pay at the Club (avoids auto-cancellation)
                    <!-- &nbsp;&nbsp;<span style="color:green">{{buggyRequired?"Yes":"No"}}</span> -->
                </ion-label>
                
            </ion-item>
            <!-- <ion-item> -->
                <span *ngIf="grpTeeSlotInfo">
                <button class="booking-book-button" (click)="onCancelBooking()" 
                *ngIf="!teeSlotNew && bookingType!=='past' && (bookingSlot.bookingStatus!=='CancelledByPlayer' && bookingSlot.bookingStatus !== 'CancelledByClub')"
                 ion-button full color="danger">CANCEL THIS BOOKING</button>
                 

                 <button style="height: 3em;" text-wrap ion-button color="danger" clear full *ngIf="teeSlotNew && !allowPlayerUnpaidBooking()">
                    Currently you have {{playerMaxBooking.maxUnpaidBookings}} or more unpaid bookings, which is the maximum this club allows. 
                    Please make a payment before booking more slots.
                     <!-- Currently, you have ({{playerMaxBooking.totalUnpaidBookings}}) unpaid bookings.
                     This club's allowed max unpaid bookings is ({{playerMaxBooking.maxUnpaidBookings}}) -->
                 </button>
                 <div *ngIf="teeSlotNew && botsOut"  class="row">
                    <div class="col" style="padding:0; max-width:50%;
                        display: flex;
                        flex-flow: wrap;
                        justify-content: space-evenly;">
                        <re-captcha
                            #captchaRef="reCaptcha" style="visibility: hidden;"
                            (resolved)="resolved($event);scrollToBottom()"
                            siteKey="6LcJQM0ZAAAAAGVMmPWu6tTK4JzCj_TvNXm4gOIy"
                            size="invisible"
                            ></re-captcha>
                            <button text-wrap *ngIf="botsOut" style="height:3em;font-size:1.5rem;" ion-button outline 
                            (click)="captchaRef.execute()">
                                <i *ngIf="!captchaResponse" class="fa fa-fw fa-check"></i>
                                <i *ngIf="captchaResponse" class="fas fa-fw fa-redo-alt"></i>
                                &nbsp;Tap here before booking
                            </button><br>
                            <i *ngIf="botsOut" (click)="onTooltipRecaptcha()" style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i>
                            <!-- <br> -->
                           <button no-padding no-margin *ngIf="botsOut" ion-button clear item-end (click)="onRecaptchaToolTip()"  style="height: auto;">
                            <img style="height:2em; width:auto;" src="assets/img/recaptcha-seeklogo.com.svg">
                        </button>
                    </div>
                    <!-- <div class="col" style="padding:0; max-width:20%">
                    <i *ngIf="botsOut" (click)="onTooltipRecaptcha()" style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i>
                           <button no-padding no-margin *ngIf="botsOut" ion-button clear item-end (click)="onRecaptchaToolTip()"  style="height: auto;">
                            <img *ngIf="botsOut" (click)="onRecaptchaToolTip()" style="height:2em; width:auto;" src="assets/img/recaptcha-seeklogo.com.svg">
                        </button>
                    </div> -->
                    <div class="col" style="padding:0">
                    <ion-item  no-padding  *ngIf="captchaResponse" style="font-size: 1.2rem;">
                            <!-- *ngIf="teeSlotNew" -->
                            <ion-label text-wrap item-end>Allow club to contact me on booking issue via Phone Number and Email
                                <!-- &nbsp;&nbsp;<span style="color:green">{{bookingCancelGuard?"Yes":"No"}}</span> -->
                            </ion-label>
                            <ion-toggle style="padding-left:0; padding-right:0" [disabled]="true" item-start [(ngModel)]="allowClubContactInfo"></ion-toggle>
                        </ion-item>
                    </div>
                 </div>
                <ion-item *ngIf="0 && teeSlotNew && botsOut"  #scrollMe>
                    <!-- style='height:5em;' -->
                    <!-- <re-captcha (resolved)="resolved($event)" siteKey="6LdFJNcZAAAAAI1E_KFVSrbmAyUYIWRdp_Q4ayck"></re-captcha> -->
                    <!-- <re-captcha (resolved)="resolved($event)" siteKey="6LcJQM0ZAAAAAGVMmPWu6tTK4JzCj_TvNXm4gOIy"></re-captcha> -->
                    <!-- <re-captcha size="invisible" (resolved)="resolved($event)" siteKey="6LdNKdcZAAAAAD-Vweo5Fa4AqXJeN8UKknDIQE8z"></re-captcha> -->

                    <!-- resolved($event) -->
                    <re-captcha
                        #captchaRef="reCaptcha" style="visibility: hidden;"
                        (resolved)="resolved($event);scrollToBottom()"
                        siteKey="6LcJQM0ZAAAAAGVMmPWu6tTK4JzCj_TvNXm4gOIy"
                        size="invisible"
                        ></re-captcha>
                        <button *ngIf="botsOut" style="height:3em;font-size:1.5rem;" ion-button outline (click)="captchaRef.execute()">
                            <i *ngIf="!captchaResponse" class="fa fa-fw fa-check"></i>
                            <i *ngIf="captchaResponse" class="fas fa-fw fa-redo-alt"></i>
                            &nbsp;Tap here before booking
                           </button>
                           <i *ngIf="botsOut" (click)="onTooltipRecaptcha()" style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i>
                           <button *ngIf="botsOut" ion-button clear item-end (click)="onRecaptchaToolTip()"  style="height: auto;">
                            <img style="height:2em; width:auto;" src="assets/img/recaptcha-seeklogo.com.svg">
                        </button>
                        <ion-item no-padding  *ngIf="captchaResponse" style="font-size: 1.2rem;">
                            <!-- *ngIf="teeSlotNew" -->
                            <ion-label text-wrap item-end>Allow club to contact me on booking issue via Phone Number and Email
                                <!-- &nbsp;&nbsp;<span style="color:green">{{bookingCancelGuard?"Yes":"No"}}</span> -->
                            </ion-label>
                            <ion-toggle [disabled]="true" item-start [(ngModel)]="allowClubContactInfo"></ion-toggle>
                        </ion-item>
                </ion-item>
                
            <button class="booking-book-button" [disabled]="(!captchaResponse && botsOut)"  (click)="onBookNow()" *ngIf="teeSlotNew" ion-button full color="gold">BOOK NOW</button>
            <!-- [disabled]="!captchaResponse" -->
        </span>
            
            <!-- </ion-item> -->
        </ion-card>
    <!-- </ion-grid> -->
        <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box"> <!-- players -->
            <!-- || (teeSlotNew && fromClub) -->
            <ion-card-header no-padding class="slot-subtitle-box" >
                <ion-row>
                    <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;">
                        <img style="max-height:1.5em;width:webkit-fill-available"
                            src="assets/img/booking-item-players.svg" 
                            (click)="toggleBookingClick(2)"/>
                    </ion-col>
                    <ion-col col-9 style="background-color: white;letter-spacing: 2px;"
                    (click)="toggleBookingClick(2)">
                        Players
                    </ion-col>
                    <ion-col col-1 style="padding-left:0;padding-right:0;">
                        <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                        <i *ngIf="checkBookingTabsComplete('2')" class="fa fa-fw fa-check-circle "></i>
                        <i (click)="checkExclamationInfo('2')" *ngIf="!checkBookingTabsComplete('2')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        <!-- </ion-badge> -->
                    </ion-col>
                </ion-row>
            </ion-card-header>
            <ion-card-content *ngIf="grpPlayerDetails" class="slot-detail-box" no-padding>
                <!-- <div *ngIf="bookingSlot.bookingPlayers && bookingSlot.bookingPlayers.length > 0" > -->
                    <div *ngIf="0"> <!-- not used -->

                    <ion-item *ngFor="let x of slots;" style="padding-left:0.5em;margin-top:0.5em">
                            <div class="row">
                                <div class="column" style="width:20%">
                                    <img style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em;"
                                    [src]="getPlayerSlotDetails(x,'image')" onerror="this.src='img/default-user.jpg'">
                                    <!-- <div class="circle" *ngIf="getPlayerSlotDetails(x,'image') === null">
                                        <span class="initials">{{getPlayerSlotDetails(x,'name')}}</span>
                                      </div> -->
                                </div>
                                <div class="column" style="width:80%">
                                    <div class="row">
                                        <div class="column">
                                            <h2>{{getPlayerSlotDetails(x,'name')}} {{getPlayerSlotDetails(x,'id')}}</h2>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="column" style="width:50%">
                                                <!-- {{getPlayerType(x)}} -->
                                            <h3 *ngIf="!slotFilled(x)"><input type="text" /> <input type="text" /></h3>
                                        </div>
                                        <div class="column" style="width:50%;text-align:right">
                                            <button class="player-action" *ngIf="slotFilled(x)" ion-button clear >
                                                <i class="fas fa-fw fa-pen"></i>
                                            </button>
                                            <button class="player-action" *ngIf="slotFilled(x)" ion-button clear>
                                                <i class="fas fa-user-cog"></i>
                                            </button>
                                            <!-- && (slot === 2 || slotFilled(x - 1)) -->
                                            <button class="player-action" *ngIf="!slotFilled(x) " (click)="onPlayerSelect(x)" clear ion-button >
                                                    <i class="fas fa-fw fa-plus-circle"></i>
                                                </button>
                                            <button class="player-action" *ngIf="slotFilled(x)" (click)="onDeleteBookingPlayer(x)" ion-button clear >
                                                <i style="color:red" class="fa fa-fw fa-times-circle "></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ion-item>
                        </div>

                        <ion-item *ngFor="let x of slots;" style="padding-left:0.5em">
                                <div class="row">
                                    <div class="column" style="width:20%">
                                        <img  style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em"
                                        [src]="getPlayerSlotDetails(x,'image')" onerror="this.src='img/default-user.jpg'">
                                        <!-- *ngIf="getPlayerSlotDetails(x,'image')" -->
                                        <!-- <div style="max-width: 4em;height: 4em"
                                         class="circle" *ngIf="getPlayerSlotDetails(x,'image') === null">
                                        <span class="initials">{{getInitials(getPlayerSlotDetails(x,'name'))}}</span>
                                      </div> -->
                                    </div>
                                    <div class="column" style="width:80%">
                                        <div class="row">
                                            <div class="column" style="width:80%;white-space: nowrap;
                                            overflow: hidden;">
                                                <h2 style="font-size: medium;font-weight: bold;color: green;">{{getPlayerSlotDetails(x,'name')}} {{getPlayerSlotDetails(x,'id')}}</h2>
                                                    <!-- <button class="player-action" clear ion-button style="font-size:1.2em;font-size: medium;font-weight: bold;">
                                                        {{getPlayerSlotDetails(x,'name')}} {{getPlayerSlotDetails(x,'id')}}
                                                    </button> -->

                                                    <div class="row" style="white-space: normal; font-size: smaller;
                                                    display: flex;
                                                            flex-direction: row;
                                                            flex-wrap: wrap;">
                                                        <div class="column" style="margin:0; order: 1;flex-basis: auto;padding-right: 1rem; "
                                                        [innerHTML]="getPlayerSlotDetails(x,'discount')">
                                                        </div>
                                                        <div class="column" style="margin:0; order: 3;flex-basis: auto;padding-right: 1rem; "
                                                        *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length > 0" >
                                                         
                                                            <div (click)="onPlayerVoucher(x,'player','voucher')" 
                                                            style="color:red;">
                                                                <!-- <i class="fa fa-fw fa-tags"></i>&nbsp;{{getPlayerVoucherApplied(x)?getPlayerVoucherApplied(x).length:'No'}} voucher(s) applied -->
                                                                <span *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length>0"><i class="fa fa-fw fa-tags"></i>&nbsp;{{getPlayerVoucherApplied(x,'name')}}</span>
                                                           </div>
                                                        </div>
                                                        <!-- <div class="column" style="margin:0; order: 3;flex-grow: 1;flex-basis: auto;" item-end>
                                                            <div> Term Discount</div>
                                                        </div> -->
                                                        <div *ngIf="getPlayerCardsApplied(x) && getPlayerCardsApplied(x).length > 0" class="column" (click)="onPlayerVoucher(x,'player','discount')"
                                                          style="color:#387ef5; margin:0;  order: 2;flex-basis: auto;padding-right: 1rem;" >
                                                        
                                                        <i class="far fa-fw fa-credit-card"></i>&nbsp;{{getPlayerDiscountName(x)?getPlayerDiscountName(x):'No discount(s) applied'}}
                                                        </div>
                                                    </div>
                                                    <!-- *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length > 0" -->
                                                <!-- <h3 (click)="onPlayerVoucher(x,'player','voucher')" 
                                                 style="color:red;">
                                                    <i class="fa fa-fw fa-tags"></i>&nbsp;{{getPlayerVoucherApplied(x)?getPlayerVoucherApplied(x).length:'No'}} voucher(s) applied
                                                </h3> -->
                                                <!-- Cards Applied 1 -->
                                                <!-- <h3><i class="far fa-fw fa-credit-card"></i>&nbsp;{{getPlayerCardsApplied(x)?getPlayerCardsApplied(x).length:'No'}} card(s) applied</h3> -->
                                                <!-- <ng-container *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length > 0">
                                                    <div *ngFor="let v of getPlayerVoucherApplied(x)">
                                                        {{v.voucherApplied.name}}
                                                    </div>
                                                </ng-container> -->
                                            </div>
                                            <div class="column" style="width:20%;text-align:right" *ngIf="bookingType!=='past'">
                                                    <!-- <button class="player-action" *ngIf="slotFilled(x)" ion-button clear style="font-size:1.2em">
                                                            <i class="fas fa-pen"></i>
                                                        </button>
                                                        <button class="player-action" *ngIf="slotFilled(x)" ion-button clear style="font-size:1.2em">
                                                            <i class="fas fa-user-cog"></i>
                                                        </button> -->
                                                        <!-- && (slot === 2 || slotFilled(x - 1)) -->
                                                        <button class="player-action" *ngIf="!slotFilled(x) " (click)="onPlayerSelect(x)" clear ion-button >
                                                                <i class="fas fa-fw fa-plus-circle"></i>
                                                            </button>
                                                        <button class="player-action" *ngIf="slotFilled(x)" (click)="onDeleteBookingPlayer(x)" ion-button clear >
                                                            <i style="color:gray" class="fa fa-fw fa-times-circle "></i>
                                                        </button>
                                                        <br *ngIf="slotFilled(x)" />
                                                        <button class="player-action" *ngIf="slotFilled(x)" (click)="onPlayerVoucher(x,'player','voucher')" clear ion-button>
                                                            <i style="color:red" class="fa fa-fw fa-tags "></i>
                                                        </button>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="bookingType!=='past'">
                                            <div class="column" style="width:80%">
                                                    <!-- {{getPlayerType(x)}} -->
                                                <span *ngIf="!slotFilled(x)" style="display:inline-flex;">
                                                    <!-- 8em; -->
                                                    <input (keyup.enter)="searchBookingPlayer(x)" style="width:12rem;height:2rem;margin-right:2px" placeholder="Club Mship No." type="text" [disabled]="searchById[x] && searchById[x] > 0 || isBookingCancel()" [(ngModel)]="searchByMembership[x]"/> 
                                                    <input (keyup.enter)="searchBookingPlayer(x)" style="width:7rem;height:2rem;margin-right:2px" type="number" placeholder="mg2u ID" [disabled]="searchByMembership[x] && searchByMembership[x].length > 0 || isBookingCancel()" [(ngModel)]="searchById[x]"/>
                                                    <!-- 5em -->
                                                <button class="player-action" (click)="clearSearchPlayer(x)" ion-button clear >
                                                            <i style="color:grey" class="fa fa-fw fa-times-circle "></i>
                                                        </button>
                                                    </span>
                                                    
                                            </div>
                                            <div class="column" style="width:20%;text-align:right">
                                                <!-- <button class="player-action" *ngIf="slotFilled(x)" (click)="onPlayerVoucher(x,'player')" clear ion-button>
                                                    <i class="fa fa-fw fa-tags "></i>
                                                </button> -->
                                                    <!-- (click)="onPlayerSelect(x)" -->
                                                    <button (click)="searchBookingPlayer(x)" class="player-action" *ngIf="!slotFilled(x)" clear ion-button >
                                                            <i class="fas fa-fw fa-search"></i>
                                                        </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="" -->
                            </ion-item>
                    <!-- </div> -->
                    <!-- <ion-item style="padding-left:0.5em">
                            <div class="row">
                                <div class="column" style="width:20%">
                                    <img style="width: 4em;float:left;object-fit: cover;border-radius:1em"
                                        src="img/course-default.png'" onerror="this.src='img/default-user.jpg'">
                                </div>
                                <div class="column" style="width:80%">
                                    <div class="row">
                                        <div class="column">
                                            <h2>{{bookingSlot.bookingPlayers[0].playerName}} (#{{bookingSlot.bookingPlayers[0].player.id}})</h2>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="column" style="width:50%">
                                            <h3>{{getPlayerType(bookingSlot.bookingPlayers[0])}}</h3>
                                        </div>
                                        <div class="column" style="width:50%;text-align:right">
                                            <button ion-button clear style="font-size:1.5em">
                                                <i class="fas fa-pen"></i>
                                            </button>
                                            <button ion-button clear style="font-size:1.5em">
                                                <i class="fas fa-user-cog"></i>
                                            </button>
                                            <button (click)="onDeleteBookingPlayer(bookingSlot.bookingPlayers[0])" ion-button clear style="font-size:1.5em">
                                                <i style="color:red" class="fa fa-times-circle "></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ion-item>
                        <ion-item style="padding-left:0.5em">
                                <div class="row">
                                    <div class="column" style="width:20%">
                                        <img style="width: 4em;float:left;object-fit: cover;border-radius:1em"
                                            src="img/course-default.png'" onerror="this.src='img/default-user.jpg'">
                                    </div>
                                    <div class="column" style="width:80%">
                                        <div class="row">
                                            <div class="column">
                                                <h2>{{bookingSlot.bookingPlayers[1].playerName}} (#{{bookingSlot.bookingPlayers[1].player.id}})</h2>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="column" style="width:50%">
                                                <h3>{{getPlayerType(bookingSlot.bookingPlayers[1])}}</h3>
                                            </div>
                                            <div class="column" style="width:50%;text-align:right">
                                                <button ion-button clear style="font-size:1.5em">
                                                    <i class="fas fa-pen"></i>
                                                </button>
                                                <button ion-button clear style="font-size:1.5em">
                                                    <i class="fas fa-user-cog"></i>
                                                </button>
                                                <button (click)="onDeleteBookingPlayer(bookingSlot.bookingPlayers[1])" ion-button clear style="font-size:1.5em">
                                                    <i style="color:red" class="fa fa-times-circle "></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ion-item> -->
                <!-- <button ion-button icon-left color="primary" (click)="onGetFlightClick()" >
                        <ion-icon name="checkmark-outline"></ion-icon>
                        Select Group
                    </button >
                    <button ion-button icon-left color="secondary" *ngIf="canSaveFlight()" (click)="onSaveFlightClick()" > -->
               
                        

                <ion-item *ngIf="bookingType!=='past' && bookingSlot.bookingStatus !== 'PaymentFull' && !fromClub">
                    <button *ngIf="!groupSelected" (click)="onGetFlightClick()" ion-button clear item-left>
                            <i class="fas fa-fw fa-heart"></i>Select Group</button>
                    <button *ngIf="canSaveFlight()" (click)="onSaveFlightClick()" ion-button clear item-left>
                        <i class="fas fa-fw fa-heart"></i>Save Group</button>
                    <!-- <button *ngIf="bookingSlot.bookingPlayers.length < 4" (click)="onPlayerSelect(p)" ion-button clear item-right style="font-size:1.5em"><i
                            class="fas fa-fw fa-plus-circle"></i>Golfer</button> -->
                </ion-item>
                
                <ion-item *ngIf="bookingType!=='past' && fromClub">
                    <button (click)="onManageVoucher()" ion-button clear item-left>
                            <i class="fas fa-fw fa-tags"></i>&nbsp;Manage Vouchers</button>
                            <button *ngIf="bookingItemBill && bookingItemBill.totalPayment > 0" (click)="onRefundClick()" ion-button clear item-right>
                                <!-- bookingSlot.bookingStatus === 'PaymentFull' || bookingSlot.bookingStatus === 'PaymentPartial' -->
                                    <!-- <i class="fas fa-fw fa-tags"></i> -->
                                    <i class="fas fa-fw fa-comments-dollar"></i>&nbsp;Refund/Adjustment</button>
                </ion-item>
                <!-- <ion-list no-padding> -->
                <!-- <ion-item *ngFor="let x of [1,2,3]" style="padding:0" (click)="onActiveBookingClick()">
                                    <ion-row no-padding style="border-color:#1b6a34;background-color: #DDF6D6;font-size:0.8em;border-style:solid;border-width:thin;border-radius:0.5em;border-bottom-right-radius: 0;border-bottom-left-radius: 0;">
                                        <ion-col style="text-align:left;color:#1b6a34;">02:45 PM</ion-col>
                                        <ion-col style="text-align:center">Wed, 22 May 2020</ion-col>
                                        <ion-col style="text-align:right;color:#1b6a34;">Ref #21492</ion-col>
                                    </ion-row>
                                    <ion-row no-padding style="border-color:#1b6a34;border-style:solid;border-width:thin;border-radius:0.5em;border-top-right-radius: 0;border-top-left-radius: 0;">
                                        <ion-col no-padding>
                                                <img style="width: 4em;float:left;object-fit: cover;" src="img/course-default.png'"
                                                onerror="this.src='img/course-default.png'">
                                                <h3 style="color:#1b6a34;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;">Tasik Puteri Golf & Country Club</h3>
                                                    <p>Booking By: <span style="color:#1b6a34;">Fazel</span></p>
                                        </ion-col>
                                            <ion-col col-3 style="text-align:center;border-color:#1b6a34;border-left-style:solid;border-left-width:thin">Total<br>
                                                <span style="color:#1b6a34;">RM 240</span></ion-col>
                                    </ion-row>
                                </ion-item> -->
                <!-- </ion-list> -->
            </ion-card-content>
        </ion-card>
        <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box">
            <ion-card-header no-padding class="slot-subtitle-box" >
                <ion-row>
                    <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(3)">
                        <img style="max-height:1.5em;width:webkit-fill-available"
                            src="assets/img/booking-item-buggy.svg" />
                    </ion-col>
                    <ion-col col-9 style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(3)">
                        Buggy & Caddie Pairing
                    </ion-col>
                    <ion-col col-1 style="padding-left:0;padding-right:0;">
                        <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                        <i *ngIf="checkBookingTabsComplete('3')" class="fa fa-fw fa-check-circle "></i>
                        <i (click)="checkExclamationInfo('3')" *ngIf="!checkBookingTabsComplete('3')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        <!-- </ion-badge> -->
                    </ion-col>
                </ion-row>
            </ion-card-header>
            <ion-card-content *ngIf="grpAdditionals" class="slot-detail-box" no-padding>
                <ion-item no-padding *ngIf="!closeAdditionalNotice" style="padding-bottom: 1rem;">
                    <div class="row">
                        <div class="column" style="width:20%">
                            <img src="assets/img/booking-item-covid.svg" style="float:left;width: 5rem;margin: 0.5em;" />
                        </div>
                        <div class="column" style="width:70%">
                            <h4 style="color:red;white-space: normal;">COVID-19. Some governments recommend that all players should include their
                                addresses for contact tracing</h4>
                        </div>
                        <div class="column" style="width:10%">
                            <button color="danger" no-padding (click)="closeAdditionalNotice = true" ion-button clear><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    
                    <!-- <h3 style="color:red">COVID-19 Important Notice</h3> -->
                    
                    
                </ion-item>
                <ion-grid style="text-align: -webkit-center;" no-padding >
                    <ion-row no-padding *ngIf="bookingType!=='past'">
                        <ion-col no-padding><h2>Buggies</h2></ion-col>
                            <ion-col no-padding><h2>Caddies</h2></ion-col>
                    </ion-row>
                    <ion-row>
                            <ion-col>
                                <!-- <button class="button-subtract" outline color="danger" (click)="addBuggy(-1)" small ion-button item-right> -->
                                <button class="button-subtract" clear icon-only color="danger" (click)="addBuggy(-1)" ion-button item-right>
                                    <!-- <i style="font-size:large" class="fas fa-minus"></i> -->
                                <img src="assets/img/button-minus.svg" />
                                </button>
                                            <button class="button-value" outline ion-button item-right>{{buggyReq}}</button>
                                            
                                            <!-- <button class="button-add" outline (click)="addBuggy(1)" small ion-button item-right> -->
                                            <button class="button-add" clear icon-only (click)="addBuggy(1)" ion-button item-right>
                                                <!-- <i style="font-size:large" class="fas fa-plus"></i> -->
                                                <img src="assets/img/button-plus.svg" /> 
                                            </button>
                                        </ion-col>    
                                            <ion-col>
                                                <button class="button-subtract" clear icon-only color="danger" (click)="addCaddy(-1)" ion-button item-right>
                                                    <!-- <i style="font-size:large" class="fas fa-minus"></i> -->
                                                    <img src="assets/img/button-minus.svg" />
                                                </button>
                                                <button class="button-value" outline ion-button item-right>{{caddyReq}}</button>
                                                <button class="button-add"  clear icon-only (click)="addCaddy(1)" ion-button item-right>
                                                    <!-- <i style="font-size:large" class="fas fa-plus"></i> -->
                                                    <img src="assets/img/button-plus.svg" /> 
                                                </button>
                                            </ion-col>
                                                  
                            </ion-row>
                </ion-grid>
                
            <ion-row no-padding *ngIf="hasPreferenceChanges() && grpAdditionals">
                <ion-col col-3 no-padding>
                    <button no-margin item-start ion-button block (click)="onResetPreference()">
                        <i class="fas fa-fw fa-undo"></i>&nbsp;Reset
                    </button>
                </ion-col>
                <ion-col col-9 no-padding>
                    <button no-margin item-end ion-button block color="danger" (click)="onUpdatePreference()">
                        <i class="fas fa-fw fa-save"></i>&nbsp;Update
                    </button>
                </ion-col>
            </ion-row>
                <ion-list>
                    <ion-list-header *ngIf="bookingPlayers && bookingPlayers.length > 0">Seatings</ion-list-header>
                    <ng-container *ngFor="let x of bookingSlot.bookingPlayers; let i = index">
                    <ion-item *ngIf="!x.playerRemoved" style="padding-left:0.5em;padding-top:1rem">
                            <div class="row" (click)="expandDetails(i,'toggle')">
                                <!-- (click)="expandDetails(i,'toggle')" -->
                                <div class="column" style="width:20%">
                                    <img style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em;"
                                        [src]="getPlayerSlotDetails(i+1,'image')" onerror="this.src='img/default-user.jpg'">
                                        <!-- x.player && x.player.image?x.player.image:'' -->
                                </div>
                                <div class="column" style="width:80%">
                                    <div class="row">
                                        <div class="column" style="width:80%;white-space: nowrap;
                                        overflow: hidden;">
                                            <h2 style="font-size: medium;font-weight: bold;color: green;">{{getPlayerSlotDetails(i+1,'name')}} {{getPlayerSlotDetails(i+1,'id')}}</h2>
                                        </div>
                                    </div>
                                    <!-- <div *ngIf="!checkBuggyCaddyInfo(i)"  class="row">
                                        <div class="column" style="width:80%">
                                            Tap here for more options
                                        </div>
                                        <div  class="column"  style="width:20%;text-align:center">
                                                <i style="font-size:1.4em;color:#30bb5b" class="fas fa-2x fa-fw fa-cog"></i>
                                        </div>
                                    </div> -->
                                    <!-- *ngIf="checkBuggyCaddyInfo(i)" -->
                                    <div  class="row" style="margin-top:0.5rem">
                                        <!-- (click)="setBuggySeating(i,$event)" -->
                                        <div class="column" style="width:25%;text-align: left;">
                                            <!-- <ion-avatar item-left> -->
                                                <span *ngIf="x.pairingNo === 0" class="pairing-number"><i style="font-size: large;color:#1b6a34" class="fas fa-fw fa-walking"></i>Walk</span>
                                                    <!-- <img *ngIf="!x.pairingNo" item-left style="width: 2.6em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy-black.svg"> -->
                                                    <!-- <img *ngIf="x.pairingNo > 0" item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy-green-16x16.svg"> -->
                                                    
                                                    <img *ngIf="x.pairingNo > 0" item-left style="width: 3rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy-new.svg">
                                            <!-- </ion-avatar> -->
                                                &nbsp;<span class="pairing-number">{{x.pairingNo?'#'+x.pairingNo:''}}</span>
                                                <!-- {{buggySlots.buggySlot?buggySlots[i].buggySlot:''}} -->
                                        </div>
                                        <!-- (click)="selectCaddy(i)" -->
                                        <div class="column" style="width:25%;text-align: left;">
                                            <!-- <ion-thumbnail item-left> -->
                                                    <img style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-caddie_.svg">
                                                    <!-- <img style="width: 0.8em;float:left;object-fit: cover;margin:0" src="assets/img/icon-caddie_.svg"> -->
                                                    <!-- margin-left:0.5em;margin-right:0.5em -->
                                            <!-- </ion-thumbnail> -->
                                            &nbsp;<span class="pairing-number">{{getCaddyPreferred(i)}}</span>
                                            <!-- {{x.caddyPreferred.}} -->
                                        </div>
                                        <!-- (click)="setPlayerDriving(i,x)"  -->
                                        <div class="column" style="width:25%;text-align: left;">
                                            <!-- <div>Icons made by <a href="https://www.flaticon.com/authors/surang" title="surang">surang</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
                                                        <!-- <img item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icons/icon-steering-wheel.svg"> -->
                                                        <img item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-steering-wheel-new.svg">
                                                
                                                    &nbsp;<span class="pairing-number">{{getPlayerDriving(i)}}</span>
                                            </div>
                                            <div class="column" class="player-action" *ngIf="0 === 1 && slotFilled(i+1)" (click)="goUpdatePlayerContact(x)" style="width:15%;text-align:right">
                                                    <img style="width: 2.5rem;float:left;object-fit: cover;margin:0" *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-bubble-exclamation.svg" />
                                                    <img style="width: 2.5rem;float:left;object-fit: cover;margin:0" *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-like.svg" />
                                               
                                    </div>
                                    <div  class="column"  style="width:25%;text-align:center">
                                        <!-- <button ion-button clear item-right (click)="expandDetails(i)"> -->
                                            <i style="font-size:1.4em;color:#30bb5b" class="fas fa-2x fa-fw fa-cog"></i>
                                        <!-- </button> -->
                                        <!-- <i style="font-size:1.4em;" *ngIf="!expandPlayers[i]" class="fa fa-fw fa-chevron-circle-right"></i>
                                        <i style="font-size:1.4em;" *ngIf="expandPlayers[i]" class="fa fa-fw fa-chevron-circle-down"></i> -->
                                        <!-- <i style="font-size:1.4em;color:#1b6a34" class="fas fa-2x fa-fw fa-cog"></i> -->
                                        <!-- <i style="font-size:1.4em;" *ngIf="!expandPlayers[i]" class="fa fa-fw fa-caret-right"></i>
                                        <i style="font-size:1.4em;" *ngIf="expandPlayers[i]" class="fa fa-fw fa-caret-down"></i> -->
                                    </div>
                                    </div>
                                    <div *ngIf="x && (x.caddyPreferred || x.caddyAssigned)" class="row">
                                        <div class="column">
                                            <!-- Caddy Booked : {{getCaddyPreferred(i,'slot_pairing')}} {{getCaddyPreferred(i,'slot_pairing_id')}} -->
                                            <span *ngIf="x.caddyPreferred"> Caddy Preferred : {{getCaddyPreferred(i,'name')}}</span><br *ngIf="x.caddyPreferred && x.caddyAssigned">
                                            <!-- getCaddyPreferred(i,'name')!=='Select Favourite Caddy' -->
                                            <span *ngIf="x.caddyAssigned"> Caddy Assigned : {{getCaddyAssigned(i,'name')}}</span>
                                            <!-- getCaddyAssigned(i,'has') -->
                                            <!-- {{getCaddyPreferred(i,'pairing')}}  -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="row" #expandHeader *ngIf="expandPlayers[i]">
                                
                            </div> -->
                            <div id="expandRow" *ngIf="expandPlayers[i]">
                                <ion-item class="row">
                                <h3>Options for {{getPlayerSlotDetails(i+1,'name')}}</h3>
                                <button *ngIf="bookingType !== 'past'" (click)="onNewClearPlayerDetails(i)" clear ion-button item-right>Clear</button> 
                                <!-- (click)="onClearPlayerDetails(i)" -->
                                <button (click)="expandPlayers[i] = false" clear ion-button item-right>Close</button>
                        </ion-item>
                            <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                <!-- "width:30%" -->
                                <div class="column" style="width:30%">
                                    Buggy Seating
                                </div>
                                <div  class="column" style="width:50%">
                                    <button [disabled]="bookingType==='past'" ion-button outline small style="white-space: normal;" (click)="newSetBuggySeating(i,$event)">
                                        <!-- (click)="setBuggySeating(i,$event)" -->
                                <strong>{{getBuggySlotDisplay(i)}}</strong>
                                </button>
                            </div>
                            <div class="column" style="width:20%">
                                <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newClearPreference(i,'buggyPairing')">
                                    <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                    <i class="fas fa-minus"></i>
                                </button>
                            </div>
                            </div>
                            <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                <div class="column" style="width:30%;">
                                            <!-- <img item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icons/icon-steering-wheel.svg"> -->
                                            Driver ?
                                            
                                </div>
                                <div  class="column" style="width:50%">
                                    <button [disabled]="bookingType==='past'" (click)="newSetPlayerDriving(i,x)" ion-button outline small style="white-space: normal;"  >
                                        <!-- (click)="setPlayerDriving(i,x)" -->
                                        
                                        <i *ngIf="getPlayerDriving(i)==='Yes'" class="fa fa-fw fa-check "></i>
                                            <i *ngIf="getPlayerDriving(i)==='No'" class="fa fa-fw fa-times "></i>
                                                &nbsp;<strong>{{getPlayerDriving(i)}}</strong>
                                        </button>
                            </div>
                            
                            <div class="column" style="width:20%">
                                <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newClearPreference(i,'playerDriving')">
                                    <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                    <i class="fas fa-minus"></i>
                                </button>
                            </div>
                                <!-- <ion-label>Driver?&nbsp;&nbsp;<span style="color:green">{{playerDriving[i]?"Me":"Other"}}</span></ion-label>
                                <div class="column" style="width:30%">
                                    <ion-label>Driver ?</ion-label>
                                </div>
                                <div class="column" style="width:70%">
                                    <ion-segment item-right no-padding [(ngModel)]='playerDriving[i]' >
                                    
                                        <ion-segment-button value="me" (click)="togglePlayerDriving(i,x,1)">
                                            Me
                                        </ion-segment-button>
                                        <ion-segment-button value="other" (click)="togglePlayerDriving(i,x,2)">
                                            Other
                                        </ion-segment-button>
                                    </ion-segment>
                            </div> -->
                            </div>
                            
                            <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                <div class="column" style="width:30%">
                                    <!-- <img item-left style="width: 2em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy.svg"> -->
                                    Caddy Pairing
                                </div>
                                <div  class="column" style="width:50%">
                                    <button [disabled]="bookingType==='past'" ion-button  outline small style="white-space: normal;" (click)="newSetCaddyPairing(i,$event)">
                                        <!-- (click)="setCaddyPairing(i,$event)" -->
                                    <strong>{{getCaddyPreferred(i,'pairing')}}</strong>
                                    </button>
                            </div>
                            
                            <div class="column" style="width:20%">
                                <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newClearPreference(i,'caddyPairing')">
                                    <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                    <i class="fas fa-minus"></i>
                                </button>
                            </div>
                        </div>
                            <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                <div class="column" style="width:30%;overflow: auto;
                                white-space: normal;">
                                    <!-- <img item-left style="width: 2em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy.svg"> -->
                                   Favourite Caddy?
                                   <!-- <br>
                                    <button *ngIf="x.caddyPreferred || x.caddySelectionCriteria.gender" ion-button  clear small style="white-space: normal;">
                                        <strong style="color:red">+ RM 50</strong>
                                        </button> -->
                                </div>
                                <!-- <div class="column" style="width:20%">
                                    <button (click)="setCaddySlot(i,x.caddyPairing)" item-right ion-button outline>
                                        <i class="fa fa-user-check"></i>
                                    </button
                                    ></div> -->
                                <div class="column" style="width:50%" >
                                    <!-- || (!fromClub && !bookingOptions.allowCaddiePreference) -->
                                    <button [disabled]="bookingType==='past'" ion-button outline small style="white-space: normal;" (click)="onNewSelectCaddy(i,x.caddyPairing)">
                                        <!-- (click)="onSelectCaddy(i,x.caddyPairing)" -->
                                    <strong>{{getCaddyPreferred(i,'name')}} </strong>
                                    </button>
                                    
                            </div>
                            <div class="column" style="width:20%">
                                <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newRemoveCaddy(i,x.caddyPairing)">
                                    <!-- (click)="removeCaddy(i,x.caddyPairing)" -->
                                    <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                    <i class="fa fa-user-times"></i>
                                </button>
                            </div>
                            
                            </div>
                            <div class="row" style="margin-left: 1.5rem;">
                                <div class="column" >
                                    <button ion-button color="danger" clear small style="white-space: normal;">
                                        Note: Caddies/Buggies will only be confirmed during payment.
                                    </button>
                                    
                                </div>
                            </div>
                            <div  class="row" (click)="goUpdatePlayerContact(x)" style="margin-left: 1.5rem;">
                                <!-- *ngIf="!teeSlotNew && bookingSlot" -->
                                <!-- 85% -->
                                <div class="column" style="width:85%;overflow: auto;
                                white-space: normal;">
                                    <h4 *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')">You have not entered your phone number or address as per some government regulations. Tap to add</h4>
                                    <h4 *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')">You have entered your phone number or address as per some government regulations. Tap to edit</h4>
                            </div>
                            <div class="column" style="width:15%;">
                                    <!-- <img item-left style="width: 2em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy.svg"> -->
                                    <img style="width: 1.5em;float:left;object-fit: cover;margin:5px;" *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-bubble-exclamation.svg" />
                                    <img style="width: 1.5em;float:left;object-fit: cover;margin:5px;" *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-like.svg" />
                                </div>
                            </div>
                            
                            
                                
                                <!-- <div class="column" style="width:20%">
                                    <img style="width: 1.5em;float:left;object-fit: cover;margin:0" *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-exclamation-bubble.svg" />
                                    <img style="width: 1.5em;float:left;object-fit: cover;margin:0" *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-like.svg" />
                                </div> -->
                                
                            
                        <!-- <ion-row no-padding *ngIf="hasPreferenceChanges(i)">
                            <ion-col col-3 no-padding>
                                <button no-margin item-start ion-button block (click)="onResetPreference()">
                                    <i class="fas fa-fw fa-undo"></i>&nbsp;Reset
                                </button>
                            </ion-col>
                            <ion-col col-9 no-padding>
                                <button no-margin item-end ion-button block color="danger" (click)="onUpdatePreference()">
                                    <i class="fas fa-fw fa-save"></i>&nbsp;Update
                                </button>
                            </ion-col>
                        </ion-row> -->
                            </div>
                        </ion-item>
                    </ng-container>
                    <!-- <ion-item *ngIf="hasPreferenceChanges()"> -->
                    
                    
                <!-- </ion-row> -->
                </ion-list>
            </ion-card-content>
            <ion-row no-padding *ngIf="hasPreferenceChanges() && grpAdditionals">
                <ion-col col-3 no-padding>
                    <button no-margin item-start ion-button block (click)="onResetPreference()">
                        <i class="fas fa-fw fa-undo"></i>&nbsp;Reset
                    </button>
                </ion-col>
                <ion-col col-9 no-padding>
                    <button no-margin item-end ion-button block color="danger" (click)="onUpdatePreference()">
                        <i class="fas fa-fw fa-save"></i>&nbsp;Update
                    </button>
                </ion-col>
            </ion-row>
        </ion-card>
        <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box">
                <!-- (click)="toggleBookingClick(4)" -->
            <ion-card-header no-padding class="slot-subtitle-box" >
                <ion-row>
                        <!-- #DDF6D6 -->
                    <ion-col col-2 style="background-color: grey;padding:0.5em;">
                        <img style="max-height:1.5em;width:webkit-fill-available"
                            src="assets/img/booking-item-food.svg" />
                    </ion-col>
                    <ion-col col-9 style="background-color: white;letter-spacing: 2px;">
                        <span style="font-style:italic;font-size: 0.8em">Food Ordering (<i class="fas fa-bullhorn"></i>coming soon)</span>
                    </ion-col>
                    <ion-col col-1 style="padding-left:0;padding-right:0;">
                        <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                        <!-- <i style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i> -->
                        <!-- </ion-badge> -->
                    </ion-col>
                </ion-row>
            </ion-card-header>
            <ion-card-content *ngIf="grpFood" class="slot-detail-box">
                <!-- <ion-list no-padding> -->
                    <!-- (click)="onActiveBookingClick()" -->
                <ion-item *ngFor="let x of [1,2,3]" style="padding:0" >
                    <ion-row no-padding
                        style="border-color:#1b6a34;background-color: #DDF6D6;font-size:0.8em;border-style:solid;border-width:thin;border-radius:0.5em;border-bottom-right-radius: 0;border-bottom-left-radius: 0;">
                        <ion-col style="text-align:left;color:#1b6a34;">02:45 PM</ion-col>
                        <ion-col style="text-align:center">Wed, 22 May 2020</ion-col>
                        <ion-col style="text-align:right;color:#1b6a34;">Ref #21492</ion-col>
                    </ion-row>
                    <ion-row no-padding
                        style="border-color:#1b6a34;border-style:solid;border-width:thin;border-radius:0.5em;border-top-right-radius: 0;border-top-left-radius: 0;">
                        <ion-col no-padding>
                            <img style="width: 4em;float:left;object-fit: cover;" src="img/course-default.png'"
                                onerror="this.src='img/course-default.png'">
                            <h3 style="color:#1b6a34;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;">Tasik
                                Puteri Golf & Country Club</h3>
                            <p>Booking By: <span style="color:#1b6a34;">Fazel</span></p>
                        </ion-col>
                        <ion-col col-3
                            style="text-align:center;border-color:#1b6a34;border-left-style:solid;border-left-width:thin">
                            Total<br>
                            <span style="color:#1b6a34;">RM 240</span></ion-col>
                    </ion-row>
                </ion-item>
                <!-- </ion-list> -->
            </ion-card-content>
        </ion-card>
        <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box"> <!-- payment-->
            <ion-card-header no-padding class="slot-subtitle-box" >
                <ion-row>
                    <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(5)">
                        <img style="max-height:1.5em;width:webkit-fill-available"
                            src="assets/img/booking-item-payment.svg" />
                    </ion-col>
                    <ion-col col-7 style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(5)">
                        Bills & Payments
                    </ion-col>
                    <ion-col col-3 style="text-align:right;padding-left:0;padding-right:1.5rem;">
                        <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                        <!-- <i style="color:red" class="fa fa-fw fa-times-circle "></i> -->
                        <i (click)="getBookingItemizedBill(false);recalculateBookingPricing()" class="fas fa-fw fa-sync"></i>
                        <i *ngIf="checkBookingTabsComplete('5')" class="fa fa-fw fa-check-circle "></i>
                        <i (click)="checkOverpaymentInfo()" *ngIf="checkOverpayment()" style="color:orange" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        <i (click)="checkExclamationInfo('5')" *ngIf="!checkBookingTabsComplete('5')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>

                        <!-- style="color:red" -->
                        <!-- </ion-badge -->
                    </ion-col>
                </ion-row>
            </ion-card-header>
            <ion-card-content *ngIf="grpPayment" class="slot-detail-box">
                <ion-list *ngIf="refresherBill">
                    <ion-item style="text-align:center">
                        <i class="fas fa-sync fa-spin"></i>
                    </ion-item>
                </ion-list>
                <ion-item *ngIf="!refresherBill && !bookingItemBill" (click)="getBookingItemizedBill()">
                    Error getting Itemized Bill. Tap here to refresh.
                </ion-item>
                <!-- <ng-container *ngIf="!refresherBill && bookingItemBill && bookingItemBill.billItems && bookingItemBill.billItems.length > 0"> -->
                    <ng-container 
                            *ngIf="!refresherBill && 
                            ((bookingItemBill && bookingItemBill.billItems && bookingItemBill.billItems.length > 0) ||
                            (bookingSlot.bookingStatus === 'CancelledByClub' || bookingSlot.bookingStatus === 'CancelledByPlayer'))">
                <!-- <ion-list no-padding> -->
                    <div *ngIf="bookingItemBill && bookingItemBill.billItems && bookingItemBill.billItems.length > 0" class="row">
                        <div class="column bill-description bill-header">Description</div>
                        <div class="column bill-rate bill-header">Rate</div>
                        <div class="column bill-quantity bill-header">Qty</div>
                        <div class="column bill-price bill-header">Price</div>
                    </div>
                    <!-- <ion-scroll scrollY="true"> -->
                        <ng-container *ngIf="bookingItemBill && bookingItemBill.billItems && bookingItemBill.billItems.length > 0">
                    <div *ngFor="let item of bookingItemBill.billItems; let billIdx = index">
                    <div class="row" *ngIf="item.itemPrice">
                        <!-- *ngIf="item.itemCount && item.unitPrice " -->
                        <div class="column bill-description">{{item.itemName}}</div>
                        <div class="column bill-rate" ><span *ngIf="item.unitPrice">{{item.unitPrice | number: '1.2-2'}}</span></div>
                        <div class="column bill-quantity"><span *ngIf="item.itemCount">{{item.itemCount}}</span></div>
                        <div class="column bill-price">{{item.itemPrice | number: '1.2-2'}}</div>
                    </div>
                </div>
                </ng-container>
                <ng-container *ngIf="bookingItemBill && bookingItemBill.discounts && bookingItemBill.discounts.length > 0">
                    <div class="row" *ngFor="let discount of bookingItemBill.discounts; let billIdx = index">
                        <div *ngIf="discount.amount > 0" class="column bill-discount">{{discount.name}}</div>
                        <!-- <div class="column bill-rate">
                            {{discount.unitPrice | number: '1.2-2'}}
                        </div>
                        <div class="column bill-quantity">
                            {{discount.itemCount}}
                        </div> -->
                        <div *ngIf="discount.amount > 0" class="column bill-price">-{{discount.amount | number: '1.2-2'}}</div>
                    </div>
                </ng-container>
                <hr *ngIf="bookingItemBill && bookingItemBill.billItems" style="background-color: black;">
                <ng-container *ngIf="getBookingDetails('price')>0">
                    <!-- *ngIf="bookingItemBill && bookingItemBill.billItems.length > 0" -->
                    <!-- border-top-width: thin;border-top-style: solid; -->
                    <div class="row" style="font-size: medium;">
                        <div class="column bill-description" style="width: 40%; white-space: nowrap;"><b>Net Chargeable</b></div>
                        <!-- <div class="column bill-rate">&nbsp;</div> -->
                        <!-- <div class="column bill-quantity">&nbsp;</div> -->
                        <div class="column bill-price" style="width: 60%; white-space: nowrap; text-align: right;">
                            <b>{{getBookingDetails('currency')}} {{getBookingDetails('price')  | number: '1.2-2'}}</b>
                        </div>
                    </div>
                </ng-container>
            <!-- </ion-scroll> -->
                    <!-- <div class="row">
                        <div class="column bill-description">Green Fees</div>
                        <div class="column bill-rate">200</div>
                        <div class="column bill-quantity">4</div>
                        <div class="column bill-price">800.00</div>
                    </div>
                    <div class="row">
                        <div class="column bill-description">Buggy Fees</div>
                        <div class="column bill-rate">60</div>
                        <div class="column bill-quantity">2</div>
                        <div class="column bill-price">120.00</div>
                    </div>
                    <div class="row">
                        <div class="column bill-description">Caddie Fees</div>
                        <div class="column bill-rate">75</div>
                        <div class="column bill-quantity">2</div>
                        <div class="column bill-price">150.00</div>
                    </div>
                    <div class="row">
                        <div class="column bill-description">Caddie Booking</div>
                        <div class="column bill-rate">50</div>
                        <div class="column bill-quantity">1</div>
                        <div class="column bill-price">50.00</div>
                    </div><br>
                    <div class="row">
                        <div class="column bill-description">Government Tax (SST)</div>
                        <div class="column bill-rate">6%</div>
                        <div class="column bill-quantity">&nbsp;</div>
                        <div class="column bill-price">67.20</div>
                    </div><br> -->
                    <br>

                    <div *ngIf="bookingItemBill && bookingItemBill.totalPayment > 0   && bookingItemBill.balance !== 0" class="row" 
                        style="color:#30bb5b;font-weight:bold;font-size:2rem;">
                        <!-- && bookingItemBill.totalPayment < bookingItemBill.totalPayable -->
                        <div class="column" style="width:50%">
                            Paid amount
                        </div>
                        <div class="column" style="width:50%; text-align: right;">
                            {{bookingSlot.slotAssigned.currency.symbol}} {{getBookingPayment()}}<!--a-->
                            <!-- | number :'1.2-2' -->
                        </div>
                        </div>
                    <div *ngIf="bookingItemBill" class="row" style="font-weight:bold;font-size:2rem;">
                        <!-- *ngIf="bookingSlot.amountPayable !== (bookingSlot.amountPaid + bookingSlot.totalDeductions)"  -->
                        
                        <div class="column bill-description" style="width:50%">
                            <!-- <span style="color:red;" *ngIf="bookingItemBill.totalPayment === 0 && bookingItemBill && bookingItemBill.balance > 0">Total amount</span>  -->
                            <span style="color:#30bb5b" *ngIf="bookingItemBill.totalPayment > 0   && bookingItemBill.balance !== 0 && hasRedeemedAmount()">(Redeemed {{bookingSlot.slotAssigned.currency.symbol}} {{getTotalRedeemAmount()}})</span>
                            <span style="color:red;" *ngIf="bookingItemBill.totalPayment > 0 && bookingItemBill && bookingItemBill.balance > 0"><br *ngIf="hasRedeemedAmount()">Remaining Amount</span>
                            <span style="color:#30bb5b" *ngIf="bookingItemBill.totalPayment > 0 && bookingItemBill.balance === 0">Paid Amount</span>
                            <span style="color:#30bb5b" *ngIf="bookingItemBill.totalPayment > 0 && bookingItemBill.balance === 0 && hasRedeemedAmount()"><br>(Redeemed {{bookingSlot.slotAssigned.currency.symbol}} {{getTotalRedeemAmount()}})</span>

                        </div>
                        <!-- <div class="column bill-rate">&nbsp;</div> -->
                        <!-- <div class="column bill-quantity">&nbsp;</div> -->
                        <div class="column bill-price" style="width:50%">
                            <br *ngIf="bookingItemBill.totalPayment > 0   && bookingItemBill.balance !== 0 && hasRedeemedAmount()">

                            <span style="color:#30bb5b;" *ngIf="bookingItemBill.totalAmount > 0 && bookingItemBill.balance === 0; else needPay">
                            
                                <!--                             *ngIf="bookingItemBill.totalAmount&&bookingItemBill&&(bookingSlot.amountPayable === bookingSlot.amountPaid); 
                            else needPay" -->
                                {{bookingSlot.slotAssigned.currency.symbol}} {{bookingItemBill && bookingItemBill.totalPayment?getBookingPayment():0  }}<!--a-->
                                <!-- | number :'1.2-2' -->
                                <!-- {{getBookingTotalAmount() | number :'1.2-2'}} -->
                            </span>
                            <br *ngIf="bookingItemBill.totalPayment > 0 && bookingItemBill.balance === 0 && hasRedeemedAmount()">
                            <ng-template #needPay>
                            <span style="color:red;" *ngIf="(bookingItemBill.totalPayment > 0 && bookingItemBill && bookingItemBill.balance > 0) 
                                || (bookingItemBill.totalPayment > 0 && bookingItemBill && bookingItemBill.balance > 0)">
                                {{bookingSlot.slotAssigned.currency.symbol}} {{bookingItemBill && bookingItemBill.balance?getBookingBalance():0 }}<!--a-->
                                <!-- | number :'1.2-2' -->
                            </span>
                        </ng-template>
                            <!-- <span *ngIf=""> {{bookingItemBill.totalAmount | number :'1.2-2'}}</span> -->
                            <!-- {{bookingItemBill.totalAmount?bookingItemBill.totalAmount:bookingSlot.amountPayable?bookingSlot.amountPayable:0 | number: '1.2-2'}} -->
                            
                        </div>
                        <!-- bookingItemBill?bookingItemBill.totalAmount:0 -->
                    </div>
                    
                        
                        <div *ngIf="bookingItemBill && (bookingItemBill.totalPayment > 0) && 
                            bookingItemBill.balance < 0" class="row" style="color:red;font-weight:bold;font-size:2rem">
                            <!-- bookingItemBill.totalPayable - bookingItemBill.totalDeductions -->
                            <div class="column" style="width:50%">
                                Overpaid by *
                            </div>
                            <div class="column" style="width:50%; text-align: right;">
                                {{bookingSlot.slotAssigned.currency.symbol}} {{(-1*bookingItemBill.balance) | number :'1.2-2'}}<!--a-->
                            </div>
                            </div>
                            <ion-item style="font-size:smaller; color:red" 
                            *ngIf="bookingItemBill && 
                            (bookingItemBill.totalPayment > 0) && 
                            bookingItemBill.balance < 0">
                            <!-- bookingItemBill.totalPayable - bookingItemBill.totalDeductions -->
                                <ion-label>* Please contact the club for a refund</ion-label>
                                </ion-item>
                    <!-- <br> -->
                    <ion-item *ngIf="!paymentClickedBoolean && !asgmtDiff && 
                    (paymentStatus.toLowerCase() !== 'paid' || bookingSlot.bookingStatus.toLowerCase() !== 'paymentfull') && bookingType!=='past'">
                        <span  style="overflow-wrap: normal; white-space: normal">
                            <span style="text-decoration: underline; font-weight: bold;">
                                Please Note
                            </span> : This price may change upon payment depending on buggy/caddie availability.
                        </span>
                    </ion-item>
                    <div *ngIf="bookingType!=='past' && (!paymentClickedBoolean) 
                    && (bookingSlot.bookingStatus !== 'PaymentFull')" class="row" style="font-size:1.8rem;padding: 1rem;">
                    <!-- paymentStatus.toLowerCase() !== 'paid' || paymentStatus.toLowerCase() !== 'paymentfull' ||  -->
                        <div class="column" style="width:40%">

                            <ion-label item-left>Pay</ion-label>
                        </div>
                        <div class="column" style="width:60%;padding: 0.5rem">
                            <ion-segment item-right no-padding [(ngModel)]="paymentAmountType">
                                <ion-segment-button value="full">
                                    Full<span *ngIf="paymentAmountType==='full'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                </ion-segment-button>
                                <ion-segment-button (click)="onCheckDeposit(true)" value="deposit">
                                    Deposit<span *ngIf="paymentAmountType==='deposit'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                </ion-segment-button>
                                <ion-segment-button value="mine" *ngIf="!fromClub">
                                    Mine<span *ngIf="paymentAmountType==='mine'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                </ion-segment-button>
                            </ion-segment>
                        </div>
                    </div>
                    <ion-item *ngIf="paymentAmountType === 'deposit'">
                        <ion-row >
                            <ion-col class="mg-txt-left">Deposit amount to pay</ion-col>
                            <ion-col class="mg-txt-right">{{bookingSlot.slotAssigned.currency.symbol}}
                                <input step="0.01" (blur)="onCheckDeposit()" type="number" [disabled]="paymentStatus.toLowerCase() === 'paid'" [(ngModel)]="depositAmount" style="max-width: 5em;text-align:right"/>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            Assignments only upon full/portion payment.
                            <!-- Caddies will only be assigned upon full/portion payment. -->
                        </ion-row>
                    </ion-item>
                    <ion-item *ngIf="paymentAmountType === 'mine'">
                        <ion-row>
                            Your portion amount will be displayed in next page
                        </ion-row>
                        <!-- <ion-row >
                            <ion-col class="mg-txt-left">Your portion to pay</ion-col>
                            <ion-col class="mg-txt-right">{{bookingSlot.slotAssigned.currency.symbol}}
                                <input type="number" [disabled]="true" [(ngModel)]="playerChargeAmount" style="max-width: 5em;text-align:right"/>
                            </ion-col>
                        </ion-row> -->
                    </ion-item>
                    <ion-item (click)="goVoucherList('player')" *ngIf="0 && bookingType !== 'past' && bookingSlot.bookingStatus !== 'PaymentFull'" style="color:red;letter-spacing: 1px; font-weight: 700;">
                        <i class="fas fa-fw fa-tags"></i>&nbsp;Deal(s) available, tap here to apply
                    </ion-item>
                    <ion-list *ngIf="bookingDiscounts && bookingDiscounts.length > 0">
                        <ion-list-header (click)="viewVoucherApplied = !viewVoucherApplied">{{bookingDiscounts&&bookingDiscounts.length>0?bookingDiscounts.length:'No'}} Voucher(s) applied, tap here to see more</ion-list-header>
                        <!-- <h3>Vouchers applied</h3> -->
                        <div *ngIf="viewVoucherApplied">
                        <ng-container *ngFor="let voucher of bookingDiscounts">
                            <ion-item >
                                <h3 item-start>{{voucher.voucherApplied.name}} ({{voucher.voucherApplied.playerAssigned.playerName}})</h3>
                                <h3 item-end>- {{getVoucherAppliedAmount(voucher)}}</h3>
                               <!-- {{currency.symbol}} {{voucher.voucherApplied.voucherAmount}} -->
                                <button ion-button item-end (click)="onRemoveThisVoucher(voucher.voucherApplied)" outline color="danger">
                                    <i class="fas fa-fw fa-times"></i>
                                </button>
                            </ion-item>
                        </ng-container>
                    </div>
                        
                    </ion-list>
                    
                    <button color="danger" ion-button outline block (click)="goRedeemPlayerCredits()" 
                        *ngIf="playersBalance > 0 
                        && (paymentStatus.toLowerCase() !== 'paymentfull' || bookingSlot.bookingStatus.toLowerCase() !== 'paymentfull')
                        && bookingType !== 'past'
                        && (bookingItemBill && bookingItemBill.balance > 0)">
                        <span class="hide-grid">Redeem Player Credits here</span>
                        <span class="hide-card">Redeem Player Credits</span>
                                </button>
                    <ion-item *ngIf="bookingType!=='past' && (!paymentClickedBoolean)">
                        <button style="padding-left: 3rem;padding-right: 3rem;width:30vw;" class="booking-book-button" (click)="onBillFullDetails()"
                        item-left ion-button color="primary">Itemized Bill</button>
                        <!-- paymentStatus.toLowerCase() === 'paid' -->
                        <button *ngIf="(bookingSlot.bookingStatus === 'PaymentFull' || bookingSlot.bookingStatus === 'PaymentPartial') || paymentStatus.toLowerCase() === 'paid'" style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                        item-right ion-button color="primary">View Assignments</button> 
                        <!-- checkBookingTabsComplete(5) -->
                        <button style="padding-left: 3rem;padding-right: 3rem;width:30vw;" class="booking-book-button" 
                        *ngIf="(bookingSlot && bookingSlot.bookingStatus !== 'CancelledByClub' && bookingSlot.bookingStatus !== 'CancelledByPlayer'
                        && bookingSlot.bookingStatus !== 'PaymentFull')
                        && paymentStatus.toLowerCase() !== 'paid' && paymentStatus.toLowerCase() !== 'pending'" 
                        (click)="onCheckBuggyCaddyAssignment()"
                        item-right ion-button color="gold">
                        <span class="hide-grid">Proceed to Payment</span>
                        <span class="hide-card">Proceed</span>
                    </button>
                </ion-item>
                <!-- <ion-item *ngIf="paymentStatus.toLowerCase() !== 'paid' && bookingSlot && bookingSlot.buggiesAssigned 
                && bookingSlot.buggiesAssigned.length > 0" >
                    <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                        full ion-button color="primary">View Assignments</button> 
                </ion-item> -->
                <ion-row *ngIf="0 && bookingType!=='past' && (!paymentClickedBoolean)">
                    <ion-col col-6 no-padding padding-left padding-right>
                        <button block style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onBillFullDetails()"
                        item-left ion-button color="primary">Itemized Bill</button>
                    </ion-col>
                    <ion-col col-6 no-padding padding-left padding-right 
                    *ngIf="bookingSlot && bookingSlot.buggiesAssigned && bookingSlot.buggiesAssigned.length > 0" >
                        <button block style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                            item-right ion-button color="primary">View Assignments</button> 
                    </ion-col>
                    <ion-col col-6 no-padding padding-left padding-right 
                    *ngIf="(bookingSlot && bookingSlot.bookingStatus !== 'CancelledByClub' && bookingSlot.bookingStatus !== 'CancelledByPlayer'
                    && bookingSlot.bookingStatus !== 'PaymentFull')
                    && paymentStatus.toLowerCase() !== 'paid'" >
                        <button block style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" 
                        (click)="onCheckBuggyCaddyAssignment() && paymentStatus.toLowerCase() !== 'pending'"
                        item-right ion-button color="gold">
                        <span class="hide-grid">Proceed to Payment</span>
                        <span class="hide-card">Proceed</span>
                    </button>
                    </ion-col>
                </ion-row>
                <ion-item *ngIf="bookingType==='past'">
                    <button item-start style="padding-left: 3rem;padding-right: 3rem;width:30vw;" class="booking-book-button" (click)="onBillFullDetails()"
                    item-left ion-button color="primary">Itemized Bill</button>
                    
                    <button item-end style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                    item-right ion-button color="primary">View Assignments</button> 
                </ion-item>
                
                <!-- <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" 
                (click)="onLocalBill()"
                        item-right ion-button color="gold">Get Local Bill (debug only)</button> -->
                <ion-item *ngIf="paymentClickedBoolean && (bookingItemBill.changes && bookingItemBill.changes.length>0)">
                    <!-- (asgmtDiff || buggyDiff || caddyDiff) -->
                    <i style="color:red" class="fa fa-fw fa-exclamation-circle "></i> We were not able to fulfill all your requests :<br>
                    <span *ngFor="let changes of bookingItemBill.changes">
                        - {{changes}}<br>
                    </span>
                    <span style="font-weight: bold;">Your bill has been adjusted accordingly.</span>
                    <!-- <ul *ngIf="getAsgmtDiffDetails('buggies','req') !== getAsgmtDiffDetails('buggies','avl')">
                        - Buggies requested {{getAsgmtDiffDetails('buggies','req')}}, available {{getAsgmtDiffDetails('buggies','avl')}}
                    </ul>
                    <ul *ngIf="getAsgmtDiffDetails('caddies','req') !== getAsgmtDiffDetails('caddies','avl')">- Caddies requested {{getAsgmtDiffDetails('caddies','req')}}, available {{getAsgmtDiffDetails('caddies','avl')}}
                    </ul>
                    <div *ngIf="caddyDiff">
                    <ul *ngFor="let c of caddyDiff">
                        - {{c.caddyPreferred.firstName}} was not available.
                    </ul>
                    <span style="font-weight: bold;">Your bill has been adjusted accordingly.</span>
                </div> -->
                
            </ion-item>
                <ion-item *ngIf="paymentClickedBoolean">
                    <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onBillFullDetails()"
                        item-left ion-button color="primary">Itemized Bill</button>
                        <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                        item-right ion-button color="primary">View Assignments</button> 
                </ion-item>
                <ion-item *ngIf="paymentClickedBoolean || 
                (paymentStatus.toLowerCase() === 'pending' && bookingSlot.bookingStatus !== 'CancelledByClub'
                && bookingSlot.bookingStatus !== 'CancelledByPlayer' && bookingSlot.bookingStatus !== 'PaymentFull')">
                    <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onCancelAssignment()"
                    item-left ion-button color="danger">Cancel</button>
                    <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" *ngIf="bookingSlot.bookingStatus !== 'PaymentFull'" 
                    (click)="onPayNow()"
                    item-right ion-button color="gold">Continue</button>
                    <!-- (click)="onCheckBuggyCaddyAssignment()" -->
                    
                </ion-item>

                <ion-item *ngIf="!displayPayHistory && (bookingSlot && bookingSlot.amountPaid > 0 || (bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull')) && (bookingItemBill && bookingItemBill.payments)">
                    <button 
                     ion-button full clear (click)="togglePayHistory()">
                        <span *ngIf="!displayPayHistory">See payment history</span>
                        <!-- <span *ngIf="displayPayHistory">Close</span> -->
                    </button>
                </ion-item>
                
                <ion-item *ngIf="!displayRefundHistory 
                && (
                    ((bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull') && ( bookingSlot.totalRefund > 0 && bookingSlot.refunds))
                    ||
                    ((bookingSlot.bookingStatus === 'CancelledByClub' || bookingSlot.bookingStatus === 'CancelledByPlayer') && bookingSlot.totalRefund > 0 && bookingSlot.refunds)
                )">
                    <button color="danger"
             ion-button full clear (click)="toggleRefundHistory()">
                <span *ngIf="!displayRefundHistory">See refund history</span>
                <!-- <span *ngIf="displayRefundHistory">Close</span> -->
            </button>
                </ion-item>
                <ion-item *ngIf="displayPayHistory">
                    <button 
                     ion-button full (click)="togglePayHistory()">
                        <span *ngIf="displayPayHistory">See payment history</span>
                    </button>
                </ion-item>
                <div *ngIf="displayPayHistory && (bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull' || bookingItemBill && bookingItemBill.payments)">
                    <div class="row">
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:35%">When</div>
                        <!-- <div class="column" style="font-size:1.5rem;font-weight:bold;width:25%">Type</div> -->
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:25%">Paid By</div>
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:40%;text-align:right;">Amount</div>
                    </div>
                    <div class="row"  *ngFor="let payment of bookingItemBill.payments">
                        <div class="column" style="width:35%">
                            {{payment.datePaid | date:"EEE, d MMM 'yy"}}<br>
                            {{payment.datePaid | date:"h:mm a"}}</div>
                        <!-- <div class="column" style="width:25%">{{payment.whatIsPaid}}</div> -->
                        <div class="column" style="width:25%">{{payment.paidBy}}</div>
                        <div class="column" style="width:40%;text-align:right;">{{bookingSlot.slotAssigned.currency.symbol}} {{payment.amountPaid | number: '1.2-2'}} {{isRedeemAmount(payment)}}</div>
                    </div>
                </div>
                
                <ion-item *ngIf="displayPayHistory">
                    <button 
                     ion-button full (click)="togglePayHistory()">
                        <span *ngIf="displayPayHistory">Close</span>
                    </button>
                </ion-item>

                <ion-item *ngIf="displayRefundHistory">
                    <button color="danger"
             ion-button full (click)="toggleRefundHistory()">
                <span *ngIf="displayRefundHistory">See refund history</span>
            </button>
                </ion-item>
                <div *ngIf="displayRefundHistory && ((bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull') || (bookingSlot.totalRefund > 0 && bookingSlot.refunds))">
                    <div class="row">
                        <!-- <div class="column" style="font-size:1.5rem;font-weight:bold;width:25%">Type</div> -->
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:25%">When</div>
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:20%">Refund To</div>
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:15%">Issue By</div>
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:10%">Mode</div>
                        <div class="column" style="font-size:1.5rem;font-weight:bold;width:30%;text-align: right">Amount</div>
                    </div>
                    <div class="row"  *ngFor="let refund of bookingSlot.refunds">
                        <!-- <div class="column" style="width:25%">{{payment.whatIsPaid}}</div> -->
                        <div class="column" style="width:25%">{{refund.createdOn | date:"EEE, d MMM 'yy"}}&nbsp;<br *ngIf="!fromClub" />
                            {{refund.createdOn | date:"h:mm a"}}
                        </div><!-- h:mm a -->
                        <div class="column" style="width:20%">{{refund.playerRefunded.playerName}}</div>
                        <div class="column" style="width:15%">{{refund.refundIssuedBy.name}}</div>
                        <div class="column" style="width:10%">{{refund.refundMode}}</div>
                        <div class="column" style="width:30%;text-align: right">{{bookingSlot.slotAssigned.currency.symbol}} {{refund.refundAmount | number: '1.2-2'}}</div>

                    </div>
                </div>
                <ion-item *ngIf="displayRefundHistory">
                    <button color="danger"
             ion-button full (click)="toggleRefundHistory()">
                <span *ngIf="displayRefundHistory">Close</span>
            </button>
                </ion-item>
            </ng-container>

                    
                    <h2 *ngIf="0 && bookingType!=='past'">Payment Method</h2>
                    <ion-list radio-group [(ngModel)]="selectPaymentMethod" *ngIf="0 && bookingType!=='past'">
                        
                            <!-- <h4 class="small-label" style="margin-left:1.5rem;">Where do you want to play ?</h4> -->
                                <ion-item class="booking-option">
                                        <!-- (click)="goCoursePicklist()" -->
                                        <ion-radio id="payment-radio" item-left value="online" checked></ion-radio>
                                        <!-- <ion-avatar *ngIf="clubInfo && clubInfo.clubName" item-left style="margin: 0;">
                                                <img [src]="getClubImage(clubInfo)" 
                                                onerror="this.src='img/default_club.png'"/>
                                            </ion-avatar> -->
                                            <!-- {{getClubName()}} -->
                                  <ion-label  style="font-size: 2rem;">Online Banking</ion-label>
                                  
                                  <!-- <button ion-button clear item-right (click)="clearClubSelection()">
                                      <i style="color:red" class="fas fa-2x fa-fw fa-times"></i>
                                    </button> -->
                                </ion-item>
                                <ion-item  class="booking-option">
                                    <ion-radio id="payment-radio" item-left value="debit-credit-card"></ion-radio>  
                              <ion-label style="font-size: 2rem;">Credit / Debit Card</ion-label>                                
                            </ion-item>
                                <!-- <ion-item  class="booking-option">
                                    <ion-radio item-left value="debit-card"></ion-radio>  
                              <ion-label style="font-size: 2rem;">Debit Card</ion-label>                                
                            </ion-item>
                
                                <ion-item  class="booking-option">
                                        <ion-radio item-left value="credit-card"></ion-radio>  
                                  <ion-label style="font-size: 2rem;">Credit Card</ion-label>                                
                                </ion-item> -->
                                <ion-item  class="booking-option">
                                    <ion-radio id="payment-radio" item-left value="paypal"></ion-radio>  
                              <ion-label style="font-size: 2rem;">PayPal</ion-label>                                
                            </ion-item>
                            <ion-item  class="booking-option">
                                <ion-radio id="payment-radio" item-left value="e-wallet"></ion-radio>  
                          <ion-label style="font-size: 2rem;">E-Wallet</ion-label>                                
                        </ion-item>
                                <ion-item  class="booking-option">
                                        <ion-radio id="payment-radio" item-left value="charge-account"></ion-radio>  
                                  <ion-label style="font-size: 2rem;">Charge to Account 
                                    <span style="font-style:italic;font-size:xx-small">(Requires Club Confirmation)</span></ion-label>
                                    </ion-item>
                                </ion-list>
                                <!-- <h3>Amount to be paid</h3> -->
                                <!-- <ion-item no-padding> -->
                                    
                                        
                                    <!-- </ion-item> -->
                                    <!-- <ion-item *ngIf="bookingType!=='past'">
                                            <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" *ngIf="paymentStatus.toLowerCase() !== 'paid'" (click)="onPayNow()" item-right ion-button color="gold">Pay Now</button> -->
                                            <!-- <button class="booking-book-button" *ngIf="!teeSlotNew && bookingType!=='past'" ion-button full color="danger">CANCEL THIS BOOKING</button> -->

                                    <!-- </ion-item> -->
                                    
            </ion-card-content>
        </ion-card>
        <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box"> <!-- check in-->
            <ion-card-header no-padding class="slot-subtitle-box" >
                <ion-row>
                    <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(6)">
                        <img style="max-height:1.5em;width:webkit-fill-available"
                            src="assets/img/booking-item-checkin.svg" />
                    </ion-col>
                    <ion-col style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(6)">
                        Check-In  
                        <!-- <span *ngIf="bookingSlot.bookingStatus.toLowerCase() === 'secured' ||
                        bookingSlot.bookingStatus.toLowerCase() === 'paid' 
                        || bookingSlot.bookingStatus.toLowerCase() === 'paymentfull'">{{counterDisplay()}}</span> -->
                        <!-- <span id="demo"></span> -->
                        <!-- <countdown-timer *ngIf="bookingSlot.bookingStatus.toLowerCase() === 'secured' || bookingSlot.bookingStatus.toLowerCase() === 'secured'" [end]="countdownTeeTime()"></countdown-timer> -->
                    </ion-col>
                    <ion-col col-1 style="padding-left:0;padding-right:0;">
                        <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                        <!-- <i style="color:red" class="fa fa-fw fa-times-circle "></i> -->
                        <i *ngIf="checkBookingTabsComplete('6')" class="fa fa-fw fa-check-circle "></i>
                        <i (click)="checkExclamationInfo('6')" *ngIf="!checkBookingTabsComplete('6')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        <!-- </ion-badge> -->
                    </ion-col>
                </ion-row>
            </ion-card-header> 
            <ion-card-content *ngIf="grpCheckIn" class="slot-detail-box" style="padding-left: 0.5em;">
                <!-- Timer mode:
<countdown-timer [start]="'2020-06-25 00:00:00'"></countdown-timer>
 <br>
Countdown: -->
<!-- <countdown-timer [end]="countdownTeeTime()"></countdown-timer> -->

<!-- Countdown with zero trigger: -->
<!-- <countdown-timer (zeroTrigger)="yourOwnFunction()" [end]="'2018-01-01 00:00:00'"></countdown-timer> -->
                <!-- <ion-list no-padding> -->
                    <ion-item style="padding-left: 0.5em;" *ngIf="!checkBookingTabsComplete('6') && bookingType!=='past'">
                    <ion-checkbox item-left [(ngModel)]="checkInAllPlayers" (ionChange)="onCheckInAll()" style="margin-right: 1rem;"></ion-checkbox>
                        <ion-label item-right style="font-weight: bold;font-size: larger;">Check In For All Players</ion-label>
                    </ion-item>
                    <ion-list>
                    <ion-item *ngFor="let x of bookingSlot.bookingPlayers; let i = index" style="padding-left:0.5em">
                        <ion-checkbox *ngIf="x && !x.confirmed && bookingType!=='past'" item-left style="margin-right: 1rem;" [(ngModel)]="checkInPlayers[i]" ></ion-checkbox>
                        <ion-label style="display: contents;">
                            <img item-left style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em;"
                                    [src]="getPlayerSlotDetails(i+1,'image')" onerror="this.src='img/default-user.jpg'">
                                    <h2 item-right style="font-size: medium;font-weight: bold;color: green;white-space: normal;">{{getPlayerSlotDetails(i+1,'name')}} {{getPlayerSlotDetails(i+1,'id')}}</h2>
                                    <!-- x.player && x.player.image?x.player.image:'' -->
                        </ion-label>
                        
                        
                    </ion-item>
                </ion-list>
                <ion-list *ngIf="!checkBookingTabsComplete('6') && bookingType!=='past'" radio-group [(ngModel)]="arrivalOption">
                        
                    <!-- <h4 class="small-label" style="margin-left:1.5rem;">Where do you want to play ?</h4> -->
                        <ion-item class="booking-option">
                                <ion-radio item-left value="arrived"></ion-radio>
                          <ion-label  style="font-size: 2rem;">I / We have arrived at the club</ion-label>
                        </ion-item>
                        <ion-item class="booking-option">
                            <ion-radio item-left value="eta"></ion-radio>
                          <ion-label  style="font-size: 2rem;">On the way, ETA (in mins)</ion-label>
                        </ion-item>
                        <div *ngIf="arrivalOption === 'eta'" style="text-align:-webkit-center">
                            <button class="button-subtract" clear icon-only color="danger" (click)="addETAcounter(-1)" ion-button item-right>
                                <!-- <i style="font-size:large" class="fas fa-minus"></i> -->
                                <img src="assets/img/button-minus.svg" />
                            </button>
                            <button class="button-value" outline ion-button item-right>{{etaCounter}}</button>
                            <button class="button-add"  clear icon-only (click)="addETAcounter(1)" ion-button item-right>
                                <!-- <i style="font-size:large" class="fas fa-plus"></i> -->
                                <img src="assets/img/button-plus.svg" /> 
                            </button>
                        </div>
                        </ion-list>
                <!-- <ion-row>
                    <ion-col col-sm-6 col-12 style="text-align: -webkit-center;">
                        <button ion-button outline (click)="toggleETAoption()" style="text-align: -webkit-center;font-size: medium;font-weight: bold;">
                            <span [innerHTML]="displayArrivalOpt()"></span>
                        </button>
                    </ion-col>
                    <ion-col col-sm-6 col-12 *ngIf="arrivalOption === 'eta'" style="text-align: -webkit-center;">
                        <button class="button-subtract" clear icon-only color="danger" (click)="addETAcounter(-1)" ion-button item-right>
                            <img src="assets/img/button-minus.svg" />
                        </button>
                        <button class="button-value" outline ion-button item-right>{{etaCounter}}</button>
                        <button class="button-add"  clear icon-only (click)="addETAcounter(1)" ion-button item-right>
                            <img src="assets/img/button-plus.svg" /> 
                        </button>
                    </ion-col>
                </ion-row> -->
                    <button *ngIf="!checkBookingTabsComplete('6') && bookingType!=='past'" ion-button full item-right (click)="onCheckInClick()">Check In</button>
                
            </ion-card-content>
        </ion-card>
        
        <ion-card *ngIf="!teeSlotNew && bookingType==='past' && !doneRating && !isBookingCancel()" no-padding class="slot-box"> <!-- feedback / comment-->
            <ion-card-header no-padding class="slot-subtitle-box" >
                <ion-row>
                    <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(7)">
                        <img style="max-height:1.5em;width:webkit-fill-available"
                            src="assets/img/booking-item-review.svg" />
                    </ion-col>
                    <ion-col col-9 style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(7)">
                        Feedback / Comments
                        <!-- <countdown-timer *ngIf="bookingSlot.bookingStatus.toLowerCase() === 'secured' || bookingSlot.bookingStatus.toLowerCase() === 'secured'" [end]="countdownTeeTime()"></countdown-timer> -->
                    </ion-col>
                    <ion-col col-1 style="padding-left:0;padding-right:0;">
                        <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                        <!-- <i style="color:red" class="fa fa-fw fa-times-circle "></i> -->
                        <i *ngIf="checkBookingTabsComplete('7')" class="fa fa-fw fa-check-circle "></i>
                        <i (click)="checkExclamationInfo('7')" *ngIf="!checkBookingTabsComplete('7')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        <!-- </ion-badge> -->
                    </ion-col>
                </ion-row>
            </ion-card-header>
            <ion-card-content *ngIf="grpFeedback" class="slot-detail-box" style="padding-left: 0.5em;">
                <ion-item>
                    <h1 style="color:#30bb5b;font-weight: bold;">Overall Club Experience</h1>
                    <ion-item style="text-align: center; color: yellowgreen; font-size:2.5rem">
                        <ion-icon *ngIf="getStar('club',1,'set')" (click)="setStar('club',1,'unset')" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('club',2,'set')" (click)="setStar('club',2,'unset')" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('club',3,'set')" (click)="setStar('club',3,'unset')" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('club',4,'set')" (click)="setStar('club',4,'unset')" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('club',5,'set')" (click)="setStar('club',5,'unset')" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('club',1,'unset')" (click)="setStar('club',1,'set')" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('club',2,'unset')" (click)="setStar('club',2,'set')" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('club',3,'unset')" (click)="setStar('club',3,'set')" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('club',4,'unset')" (click)="setStar('club',4,'set')" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('club',5,'unset')" (click)="setStar('club',5,'set')" name="star-outline"></ion-icon>
                    </ion-item>
                </ion-item>
                <div *ngFor="let item of clubRatingItems; let idx = index">
                <ion-item *ngIf="idx > 0" >
                
                 <h1 style="color:#30bb5b;font-weight: bold;">{{item.name}}</h1>
                    <ion-item style="text-align: center; color: yellowgreen; font-size:2.5rem">
                        <ion-icon *ngIf="getStar('clubItem'+idx,1,'set',idx)" (click)="setStar('clubItem'+idx,1,'unset',idx)" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,2,'set',idx)" (click)="setStar('clubItem'+idx,2,'unset',idx)" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,3,'set',idx)" (click)="setStar('clubItem'+idx,3,'unset',idx)" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,4,'set',idx)" (click)="setStar('clubItem'+idx,4,'unset',idx)" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,5,'set',idx)" (click)="setStar('clubItem'+idx,5,'unset',idx)" name="star"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,1,'unset',idx)" (click)="setStar('clubItem'+idx,1,'set',idx)" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,2,'unset',idx)" (click)="setStar('clubItem'+idx,2,'set',idx)" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,3,'unset',idx)" (click)="setStar('clubItem'+idx,3,'set',idx)" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,4,'unset',idx)" (click)="setStar('clubItem'+idx,4,'set',idx)" name="star-outline"></ion-icon>
                        <ion-icon *ngIf="getStar('clubItem'+idx,5,'unset',idx)" (click)="setStar('clubItem'+idx,5,'set',idx)" name="star-outline"></ion-icon>
                        </ion-item>

                </ion-item>
                </div>
                <ion-item (click)="onRateApp()">
                    <h1 style="color:#30bb5b;font-weight: bold;">Booking App Experience</h1> 
                    <h3 style="text-align: center; color: yellowgreen; font-size:2rem">Please tap here to rate</h3>
                </ion-item>
            <ion-item *ngIf="0">
                <h1 style="color:#30bb5b;font-weight: bold;">Booking Experience {{bookingRating}}</h1> 
                <ion-item style="text-align: center; color: yellowgreen; font-size:2.5rem">
                    <ion-icon *ngIf="getStar('booking',1,'set')" (click)="setStar('booking',1,'unset')" name="star"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',2,'set')" (click)="setStar('booking',2,'unset')" name="star"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',3,'set')" (click)="setStar('booking',3,'unset')" name="star"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',4,'set')" (click)="setStar('booking',4,'unset')" name="star"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',5,'set')" (click)="setStar('booking',5,'unset')" name="star"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',1,'unset')" (click)="setStar('booking',1,'set')" name="star-outline"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',2,'unset')" (click)="setStar('booking',2,'set')" name="star-outline"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',3,'unset')" (click)="setStar('booking',3,'set')" name="star-outline"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',4,'unset')" (click)="setStar('booking',4,'set')" name="star-outline"></ion-icon>
                    <ion-icon *ngIf="getStar('booking',5,'unset')" (click)="setStar('booking',5,'set')" name="star-outline"></ion-icon>
                    <!-- <ion-icon name="star-half"></ion-icon> -->
                    <!-- <i class="fas fa-fw fa-star"></i>
                    <i class="fas fa-fw fa-star"></i>
                    <i class="fas fa-fw fa-star"></i>
                    <span class="fa-stack">
                          <i class="fas fa-star-half fa-stack-1x "></i>
                          <i class="far fa-star-half fa-stack-1x fa-flip-horizontal"></i>
                    </span>
                    <i class="far fa-fw fa-star"></i> -->
                    <!-- <i class="far fa-fw fa-star-half"></i> -->
                </ion-item>
                <!-- <ionic3-star-rating #bookingRating
                activeIcon = "ios-star"
                defaultIcon = "ios-star-outline"
                activeColor = "#FFD700" 
                defaultColor = "#1b6a34"
                readonly="false"
                rating="3"
                fontSize = "32px"
                (ratingChanged)="logBookingRating($event)">
            </ionic3-star-rating> -->
            </ion-item>
            <ion-item *ngIf="uniqCaddy && uniqCaddy.length > 0 && hasCaddyAssigned()" (click)="getCaddy()" style="padding-right:0">  
                <h1 style="color:#30bb5b;font-weight: bold;">Caddie Experience</h1>
                    <ion-row *ngFor="let caddy of uniqCaddy; let caddyIdx = index">
                        <ion-col col-2>
                            <img (click)="onZoomImageCaddy(caddy)" style="max-width: 5rem;object-fit: cover;border-radius:1em; height: 5rem;margin-top:0.5rem"
                            [src]="caddy.caddyAssigned?caddy.caddyAssigned.caddyImage:''" onerror="this.src='img/default-user.jpg'">
                        </ion-col>
                        <ion-col col-3 style="overflow:hidden">
                            <span style="overflow:hidden">{{caddy.caddyAssigned?caddy.caddyAssigned.firstName:''}}</span>
                            <br>{{caddy.caddyAssigned?"("+caddy.caddyAssigned.staffId+")":''}}
                        </ion-col>
                        <ion-col col-5 style="text-align: center; color: yellowgreen; font-size:2rem">
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,1,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,1,'unset',caddyIdx)" name="star"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,2,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,2,'unset',caddyIdx)" name="star"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,3,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,3,'unset',caddyIdx)" name="star"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,4,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,4,'unset',caddyIdx)" name="star"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,5,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,5,'unset',caddyIdx)" name="star"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,1,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,1,'set',caddyIdx)" name="star-outline"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,2,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,2,'set',caddyIdx)" name="star-outline"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,3,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,3,'set',caddyIdx)" name="star-outline"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,4,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,4,'set',caddyIdx)" name="star-outline"></ion-icon>
                            <ion-icon *ngIf="getStar('caddy'+caddyIdx,5,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,5,'set',caddyIdx)" name="star-outline"></ion-icon>
                        </ion-col>
                        <ion-col col-2>
                            <button *ngIf="!caddyRatingCommentOn[caddyIdx]" ion-button outline block (click)="caddyRatingCommentOn[caddyIdx]=true"><i class="far fa-fw fa-comment"></i></button>
                            <button *ngIf="caddyRatingCommentOn[caddyIdx]" ion-button outline block (click)="caddyRatingCommentOn[caddyIdx]=false"><i class="fas fa-fw fa-comment-slash"></i></button>
                        </ion-col>
                        <ion-col col-12 *ngIf="caddyRatingCommentOn[caddyIdx]" no-padding>
                            <textarea #commentArea id="commentArea"  rows="3" maxLength="500" 
                            placeholder="You may add caddie comment here" [(ngModel)]="caddyRatingComment[caddyIdx]"></textarea>
                        </ion-col>
                    </ion-row>
                
            </ion-item>
            <ion-item>
                <h1 style="color:#30bb5b;font-weight: bold;">Comments</h1> 
            </ion-item>
            
            <textarea #myInput id="myInput" rows="3" maxLength="500" (keyup)="resize()" placeholder="Please add comment here" [(ngModel)]="myStuff"></textarea>
            <ion-item style="text-align: center;">
            <button ion-button item-left clear>Thank you for Rating Us</button>
            <button ion-button item-right (click)="onRateSubmit()">Submit</button>
            </ion-item>
            </ion-card-content>
        </ion-card>
    
        <!-- <ion-card no-padding style="border-style:solid;border-width:thin;border-radius: 1em">
                            <ion-card-header no-padding style="font-size:1.5em;font-weight:bold">
                                    <ion-row>
                                            <ion-col col-2 style="background-color: #DDF6D6;">
                                                    <img style="max-height:1.5em;width:webkit-fill-available" src="assets/img/booking-item-time.svg" />
                                                </ion-col>
                                                <ion-col style="background-color: white;letter-spacing: 2px;">
                                                        Feedback / Comments
                                                </ion-col>
                                    </ion-row>
                                </ion-card-header>
                    </ion-card> -->
    </ion-list>
    <!-- class="hide-grid" -->
    <ion-grid *ngIf="fromClub" style="padding-bottom:0;">
        <ion-row>
            <ion-col *ngIf="!teeSlotNew" no-padding col-12 col-lg-4 col-xl-4>
                <ion-row>
                    <ion-col col-12>
                        <ion-item-divider sticky *ngIf="!teeSlotNew"
            style="margin:10px;margin-bottom:0;width:calc(100% - 1.3rem);padding-left:5px;padding-right:5px;
            border-style:solid;border-color:green;border-width:thin;border-radius:1em;background-color:#DDF6D6;">
            <ion-row >
                <ion-col col-6 style="text-align: left;font-size: medium;">
                    <strong>{{teeTimeSlotDisplay.slot.teeOffDate | date:"EEEE, d MMMM yyyy"}}</strong><br>
                    Status : <strong>{{getBookingDetails('status')}}</strong>
                </ion-col>
                <ion-col col-6 style="text-align: right;font-size:medium;font-weight: bold;">
                
                <span style="color:#1b6a34;">{{getProperTime(teeTimeSlotDisplay.slot.teeOffTime)}}</span><br>
                    <span style="font-size: 2.3rem;
                    letter-spacing: 1px;align-self: center;">
                    <strong>{{getBookingDetails('currency')}} {{getBookingDetails('price')  | number: '1.2-2'}}</strong>
                </span>
                </ion-col>
            </ion-row></ion-item-divider>
                    </ion-col>
                    <ion-col col-12 [class.center-box]="teeSlotNew" style="padding-top:0">
                <ion-card no-padding class="slot-box" style="margin-top:0"> <!-- booking information-->
                    <ion-card-header no-padding class="slot-subtitle-box">
                        <ion-row>
                            <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;"  (click)="toggleBookingClick(1)">
                                <img style="max-height:1.5em;width:webkit-fill-available"
                                    src="assets/img/booking-item-time.svg" />
                            </ion-col>
                            <ion-col col-9 style="background-color: white;letter-spacing: 2px;"  (click)="toggleBookingClick(1)">
                                Booking Information
                            </ion-col>
                            <ion-col col-1 style="padding-left:0;padding-right:0;">
                                <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                <i *ngIf="checkBookingTabsComplete('1')" class="fa fa-fw fa-check-circle "></i>
                                <i (click)="checkExclamationInfo('1')" *ngIf="!checkBookingTabsComplete('1')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                <!-- </ion-badge> -->
                            </ion-col> 
                        </ion-row>
                    </ion-card-header>
                    <ion-card-content  style="padding:1rem;" class="slot-detail-box">
                        <!-- *ngIf="grpTeeSlotInfo" -->
                        <!-- <ion-item>
                        Booked by {{bookingSlot.bookedByPlayer?bookingSlot.bookedByPlayer.playerName:''}}
                        </ion-item> -->
                        <ion-item style="text-align: center;letter-spacing:1px;padding:0;">
                            <h1 *ngIf="getClubCourseDetails('club')" style="font-weight:bold;text-overflow: ellipsis;overflow: hidden;">{{getClubCourseDetails('club')}}</h1>
                            <h2 style="font-weight:bold;text-overflow: ellipsis;overflow: hidden;margin-bottom:1rem">{{getClubCourseDetails('course')}}</h2>
                            <!-- <span> -->
                            <!-- </span> -->
                            <button *ngIf="!teeSlotNew && fromClub" ion-button clear full (click)="changeStartCourse()">Change course</button>
                            <span style="text-align: left;" *ngIf="!teeSlotNew 
                            && (bookingSlot.bookingStatus === 'CancelledByClub' || bookingSlot.bookingStatus === 'CancelledByPlayer')">
                            <p style="font-size:1.5rem;" *ngIf="bookingSlot.cancellationReason"><b>Reason for cancellation </b>: {{bookingSlot.cancellationReason?bookingSlot.cancellationReason:''}}</p>
                            <p style="font-size:1.5rem;" *ngIf="bookingSlot.canceledBy && bookingSlot.canceledBy.name"><b>Cancelled by</b>: {{bookingSlot.canceledBy?bookingSlot.canceledBy.name:''}}</p>
                            
                            </span>
                            <span *ngIf="!teeSlotNew && bookingSlot">
                                <div class="row" (click)="getContactInfo('bookingInfo')">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked by: </span><strong>{{bookingSlot?(bookingSlot.bookedByUser?bookingSlot.bookedByUser.name:bookingSlot.bookedByPlayer.playerName):''}}</strong><i class="fas fa-fw fa-phone"></i></div>
                                </div>
                                <div class="row" *ngIf="bookingSlot.bookingCreatedAt">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked on: </span><strong>{{getBookingDetails('bookedOn')}}</strong></div>
                                </div>
                                <!-- <div class="row" *ngIf="bookingSlot.bookingCreatedAt">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked on: </span><strong>{{getBookingDetails('bookedOn')}}</strong></div>
                                </div> -->
                                <div class="row">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Ref: </span><strong>{{getBookingDetails('reference')}}</strong></div>
                                </div>
                                <br>
                                <h1 style="color:#30bb5b; text-align:left;"><strong>Booking Details</strong></h1>
                                <div class="row">
                                    <div class="column info-item info-header" style="width:40%">Item</div>
                                    <div class="column info-requested info-header" style="width:40%;">Requested</div>
                                    <div class="column info-actual info-header" style="width:20%">Actual</div>
                                </div>
                                <div class="row" *ngIf="bookingSlot.slotAssigned.startCourse.id !== bookingSlot.slotPreferred.startCourse.id">
                                    <div class="column info-item">Course Played</div>
                                    <div class="column info-requested">{{bookingSlot.slotAssigned.startCourse.name}}</div>
                                    <div class="column info-actual">{{bookingSlot.slotPreferred.startCourse.name}}</div>
                                </div>
                                <div class="row" *ngIf="bookingSlot.slotAssigned.teeOffTime !== bookingSlot.slotPreferred.teeOffTime">
                                    <div class="column info-item">Tee Off Time</div>
                                    <div class="column info-requested">{{getProperTime(bookingSlot.slotPreferred.teeOffTime)}}</div>
                                    <div class="column info-actual">{{getProperTime(bookingSlot.slotAssigned.teeOffTime)}}</div>
                                </div>
                                <div class="row">
                                    <div (click)="onChangeNinesBooking()" class="column info-item">Holes to Play<i *ngIf="checkHolesAllowedEnable() && bookingType!=='past'  && (bookingSlot.bookingStatus!=='CancelledByPlayer' && bookingSlot.bookingStatus !== 'CancelledByClub')" class="fa fa-fw fa-cog"></i></div>
                                    <div class="column info-requested">{{bookingSlot.ninesPlayed?bookingSlot.ninesPlayed*9:'-'}}</div>
                                    <div class="column info-actual">{{bookingSlot.ninesPlayed?bookingSlot.ninesPlayed*9:'-'}}</div>
                                </div>
                                <div class="row">
                                    <div class="column info-item">Players</div>
                                    <div class="column info-requested">{{bookingSlot.totalPlayers}}</div>
                                    <div class="column info-actual">{{bookingSlot.bookingPlayers.length}}</div>
                                </div>
                                <div class="row">
                                    <div class="column info-item">Buggies</div>
                                    <div class="column info-requested">{{bookingSlot.buggyRequested}}</div>
                                    <div class="column info-actual">{{buggyReq}}</div>
                                </div>
                                <div class="row">
                                    <div class="column info-item">Caddies</div>
                                    <div class="column info-requested">{{bookingSlot.caddyRequested}}</div>
                                    <div class="column info-actual">{{caddyReq}}</div>
                                </div>
                                <div class="row" style="margin-bottom:1rem" (click)="onEstimatePriceClick()">
                                    <div class="column info-item">Estimated Cost ({{bookingSlot.slotAssigned.currency.symbol}})<i style="color:#30bb5b; font-size:2rem;" class="fa fa-fw fa-question-circle"></i></div>
                                    <div class="column info-requested">{{getEstimatedPrice('requested') | number: '1.0-2'}}</div>
                                    <div class="column info-actual">{{getEstimatedPrice('actual') | number: '1.0-2'}}</div>
                                </div>
                                <h3 (click)="onMoreTeeSlotSettings()" style=" text-align:left;">See Tee Slot Settings<i style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i></h3>
                                <h3 *ngIf="!teeSlotNew && bookingSlot && !bookingSlot.slotAssigned.pricingPlanPromotional" (click)="setTogglePromoDetails()" style="text-align: left;" >Pricing Plan Used : {{getPricingPlan('normal','name')}} |
                                    <!-- *ngIf="!teeSlotNew && bookingSlot && bookingSlot.slotAssigned.pricingPlan" -->
                                     <span *ngIf="!togglePlanDetails">See more</span>
                                     <span *ngIf="togglePlanDetails">See less</span>
                                    </h3>
                                <span style="text-align: left;" *ngIf="togglePlanDetails">
                                    <ul>
                                        <li>{{getPricingPlan('normal','name')}}</li>
                                        <li>{{getPricingPlan('normal','description')}}</li>
                                        <li>Discounts Applicable : {{getPricingPlan('normal','dicounts')}}</li>
                                        <li>Promotional : {{getPricingPlan('normal','promotional')}}</li>
                                    </ul>
                                </span>
                                <h3 *ngIf="!teeSlotNew && bookingSlot && bookingSlot.slotAssigned.pricingPlanPromotional" style="text-align: left;" (click)="setTogglePromoDetails('promo')" >Pricing Promo Plan Used : {{getPricingPlan('promo','name')}} |
                                    <!-- *ngIf="!teeSlotNew && bookingSlot && bookingSlot.slotAssigned.pricingPlanPromotional" -->
                                    <span *ngIf="!togglePlanPromoDetails">See more</span>
                                    <span *ngIf="togglePlanPromoDetails">See less</span>
                                    </h3>
                                <span style="text-align: left;" *ngIf="togglePlanPromoDetails && bookingSlot && bookingSlot.slotAssigned.pricingPlanPromotional">
                                    <ul>
                                        <li>{{getPricingPlan('promo','name')}}</li>
                                        <li>{{getPricingPlan('promo','description')}}</li>
                                        <li>Discounts Applicable : {{getPricingPlan('promo','dicounts')}}</li>
                                        <li>Promotional : {{getPricingPlan('promo','promotional')}}</li>
                                    </ul>
                                </span>
                             </span>
                           
                        </ion-item>
                        
                    
                <ion-item *ngIf="!teeSlotNew && getAllowUpdatePostPayment('deals')" style="text-align:center" no-padding>
                    <!-- *ngIf="prices || promoPrices" -->
                    <!-- <h1><span *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)" 
                        [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></h1> -->
                    <button style="height: 3em !important"  text-wrap ion-button clear (click)="togglePrices()" class="voucher-header">
                        <!-- *ngIf="promoPrices || prices" -->
                        <strong>
                        <span *ngIf="!displayPrices" style="color:red;font-size: large;"><i class="fas fa-fw fa-tags"></i>&nbsp;See other packages / deals</span>
                        <span *ngIf="displayPrices">Close</span>
                    </strong>
                    </button>
                    <ion-grid padding *ngIf="displayPrices">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Packages Available</button>
                        </ion-col>
                        <ion-row *ngFor="let price of getClubPackages()" col-12>
                            <ion-col no-padding class="price-field">{{price.name}}</ion-col>
                            <ion-col no-padding class="price-param">
                                <span style="color:#5DBC81;font-weight:bold;">{{bookingSlot.slotAssigned.currency.symbol}} {{numberWithCommas(price.amount)}}</span>
                                <!-- <span [innerHTML]="getSlotPrice(clubs.slots[0],price.id)"></span> -->
                            </ion-col>
                        </ion-row>
                        <div *ngIf="0">
                        <ion-row *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)">
                            <ion-col class="price-field">Visitor</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.SENIOR) || (promoPrices && promoPrices.SENIOR)">
                                <ion-col class="price-field">Senior Citizen</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'SENIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.STAFF) || (promoPrices && promoPrices.STAFF)">
                                <ion-col class="price-field">Staff Member</ion-col>
                                <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STAFF')"></span></ion-col>
                            </ion-row>
                            <ion-row *ngIf="(prices && prices.LADIES) || (promoPrices && promoPrices.LADIES)">
                                    <ion-col class="price-field">Ladies</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'LADIES')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.ARMY) || (promoPrices && promoPrices.ARMY)">
                                <ion-col class="price-field">Army</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'ARMY')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GOVT) || (promoPrices && promoPrices.GOVT)">
                                <ion-col class="price-field">Civil Servants</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GOVT')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.JUNIOR) || (promoPrices && promoPrices.JUNIOR)">
                                <ion-col class="price-field">Junior</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'JUNIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.MEMBER) || (promoPrices && promoPrices.MEMBER)">
                                <ion-col class="price-field">Club Member</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'MEMBER')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.POLICE) || (promoPrices && promoPrices.POLICE)">
                                <ion-col class="price-field">Police</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'POLICE')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.WOMAN) || (promoPrices && promoPrices.WOMAN)">
                                <ion-col class="price-field">Women</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'WOMAN')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GUEST) || (promoPrices && promoPrices.GUEST)">
                                <ion-col class="price-field">Member's Guest</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GUEST')"></span></ion-col>
                        </ion-row>
                    </div>
                    </ion-grid>
                    <ion-row *ngIf="displayPrices && !getPromoPlan(bookingSlot.slotAssigned,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Package Details</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getNormalPlan(bookingSlot.slotAssigned,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getNormalPlan(bookingSlot.slotAssigned,'description')"></li>
                                <li>Discount(s) Applicable : {{getNormalPlan(bookingSlot.slotAssigned,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row *ngIf="displayPrices && getPromoPlan(bookingSlot.slotAssigned,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Promotion(s) Available</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getPromoPlan(bookingSlot.slotAssigned,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getPromoPlan(bookingSlot.slotAssigned,'description')"></li>
                                <li>Discount(s) Applicable : {{getPromoPlan(bookingSlot.slotAssigned,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row col-12 *ngIf="displayPrices && voucherSeries && voucherSeries.length>0">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">
                                {{!fromClub && playerVoucher && playerVoucher.length > 0?playerVoucher.length:''}} Voucher(s) Available</button>
                            <!-- (click)="clubs.showPromo = !clubs.showPromo" -->
                        </ion-col>
                        <ng-container *ngFor="let vs of voucherSeries" col-12>
                            <div no-padding col-12>
                            <ion-row col-12 no-padding>
                                <ion-col col-12 padding-left padding-right no-padding text-left style="white-space:normal; font-weight: bold;">
                                    <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                    {{vs.name}}
                                </ion-col>
                                
                            </ion-row>
                            <ion-row col-12>
                                <ion-col col-8 
                                padding-left padding-right no-padding text-left>
                            <ul>
                                <li *ngIf="vs.description" [innerHTML]="escapeCRLF(vs.description)">
                                    <!-- {{vs.description}} -->
                                </li>
                                   <li *ngIf="vs.allowOnWeekdays || vs.allowOnWeekends || vs.allowOnPublicHolidays">
                                        {{getVoucherApplicableText(vs,'allowDays')}}
                                    </li>
                                    <li *ngIf="vs.appliesToBookingAmount">
                                        {{getVoucherApplicableText(vs,'bookingAmount')}}
                                    </li>
                                    <li *ngIf="vs.appliesToFlight">
                                        {{getVoucherApplicableText(vs,'flight')}}
                                    </li>
    
                                    <!-- <li>
                                        {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency)}}
                                    </li>                                         -->
                                    <li>
                                        Validity {{vs.validityDays}} days
                                    </li>
                            </ul>
                        </ion-col>
                        <ion-col col-4 padding-left padding-right no-padding text-right style="white-space:normal; text-align: right;color:#5DBC81;font-weight:bold;">
                            <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                            <span 
                            [innerHTML]="getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')"></span>
                        </ion-col>
                        </ion-row>
                    </div>
                    </ng-container>
                    </ion-row>
                        <ion-row col-12 *ngIf="displayPrices && playerActiveClubDiscount && playerActiveClubDiscount.length>0">
                        <!-- <ion-col padding-left padding-right no-padding text-right col-6>- RM 30</ion-col> -->
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Club Discounts/Privilege Cards</button>
                        </ion-col>
                        <ng-container  *ngFor="let cDiscounts of playerActiveClubDiscount" col-12>
                            <div *ngIf="cDiscounts && cDiscounts.active" no-padding col-12>
                                <ion-row col-12 no-padding>
                                <ion-col col-12 padding-left padding-right no-padding text-left style="white-space: normal;">
                                    <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                    <b>{{cDiscounts.name}}</b>
                                </ion-col>
                                
                                </ion-row>
                                <ion-row col-12>
                                <ion-col col-8 
                                 padding-left padding-right no-padding text-left>
                                    <ul>
                                <li *ngIf="cDiscounts && cDiscounts.description" [innerHTML]="escapeCRLF(cDiscounts.description)">
                                    <!-- {{cDiscounts.description}} -->
                                </li>
                                <li>Valid <b>{{getDateText(cDiscounts.validFrom)}}</b> to <b >{{getDateText(cDiscounts.validUntil)}}</b></li>
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesFor')">{{getDiscountText(cDiscounts, 'appliesFor')}}</li> 
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesTo')">{{getDiscountText(cDiscounts, 'appliesTo')}}</li>
                                <span *ngIf="0 && cDiscounts && !cDiscounts.applicableRate && cDiscounts.discountRates && cDiscounts.discountRates.length > 0">
                                    <li>Available Discounts rates :</li>
                                            <ul *ngFor="let rate of cDiscounts.discountRates">
                                                <li>{{rate.dayName}}</li>
                                            </ul>
                                    </span>
                                    </ul>
                                </ion-col>
                                <ion-col col-4 padding-left padding-right no-padding text-right style="white-space: normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                    <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                                    <span [innerHTML]="getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')"
                                    style="color:#5DBC81;font-weight:bold;">
                                     <!-- {{getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')}} -->
                                 </span>
                                </ion-col>
                            </ion-row>
                        </div>
                              </ng-container>
                    </ion-row>
                    <button *ngIf="displayPrices" ion-button small clear block (click)="togglePrices()" class="voucher-header">
                        <span >Close</span>
                    </button>
                </ion-item>
                        <ion-item *ngIf="teeSlotNew">
                            <h2>How many golfers playing?</h2>
                            <button class="button-subtract" clear icon-only color="danger" (click)="addPlayers(-1)" ion-button item-right>
                                <img src="assets/img/button-minus.svg" />
                            </button>
                            <button class="button-value" outline ion-button item-right>{{playerReq}}</button>
                            <button class="button-add"  clear icon-only (click)="addPlayers(1)" ion-button item-right>
                                <img src="assets/img/button-plus.svg" /> 
                            </button>
                       
                                <!-- <button class="button-subtract" outline color="danger" (click)="addPlayers(-1)" small ion-button item-right><i class="fas fa-minus"></i></button>
                                        <button class="button-value" outline ion-button item-right>{{playerReq}}</button>
                                        <button class="button-add" outline (click)="addPlayers(1)" small ion-button item-right><i class="fas fa-plus"></i></button>  -->
                                       
                        </ion-item>
                        <ion-item  *ngIf="teeSlotNew && fromClub" style="padding-left:0.5em">
                            <div class="row">
                                <div class="column" style="width:20%">
                                    <img style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em"
                                    [src]="getClubPlayerDetails('image')" onerror="this.src='img/default-user.jpg'">
                                </div>
                                <div class="column" style="width:80%">
                                    <div class="row">
                                        <div class="column" style="width:80%;white-space: nowrap;
                                        overflow: hidden;">
                                            <h2 style="font-size: medium;font-weight: bold;color: green;">{{getClubPlayerDetails('name')}} {{getClubPlayerDetails('id')}}</h2>
                                            <!-- <h3 [innerHTML]="getPlayerSlotDetails(99,'discount')"></h3> -->
                                        </div>
                                        <div class="column" style="width:20%;text-align:right" >
                                                 <button class="player-action" *ngIf="!clubBookingPlayers " (click)="onClubPlayerSelect()" clear ion-button>
                                                            <i class="fas fa-fw fa-plus-circle"></i>
                                                        </button>
                                                    <button class="player-action" *ngIf="clubBookingPlayers" (click)="onClubDeleteBookingPlayer()" ion-button clear >
                                                        <i style="color:red" class="fa fa-fw fa-times-circle "></i>
                                                    </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="column" style="width:80%">
                                            <span *ngIf="!clubBookingPlayers" style="display:inline-flex;">
                                                <input (keyup.enter)="searchClubBookingPlayer()" style="width:11rem;height:2rem;margin-right:2px" placeholder="Club Mship No." type="text" [disabled]="clubSearchById && clubSearchById > 0 || isBookingCancel()" [(ngModel)]="clubSearchByMembership"/> 
                                                <input (keyup.enter)="searchClubBookingPlayer()" style="width:6rem;height:2rem;margin-right:2px" type="number" placeholder="mg2u ID" [disabled]="clubSearchByMembership && clubSearchByMembership.length > 0  || isBookingCancel()" [(ngModel)]="clubSearchById"/>
                                              
                                            <button class="player-action" (click)="clearClubSearchPlayer()" ion-button clear >
                                                        <i style="color:grey" class="fa fa-fw fa-times-circle "></i>
                                                    </button>
                                                </span>
                                                
                                        </div>
                                        <div class="column" style="width:20%;text-align:right">
                                                <button (click)="searchClubBookingPlayer()" class="player-action" *ngIf="!clubBookingPlayers" clear ion-button >
                                                        <i class="fas fa-fw fa-search"></i>
                                                    </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="" -->
                        </ion-item>
                        <div *ngIf="teeSlotNew">
                            <!-- && teeTimeSlotDisplay.slot.allowWalking -->
                            <ion-item >
                                <!-- *ngIf="teeSlotNew" -->
                                <ion-label>*** Do you require buggy?&nbsp;&nbsp;<span style="color:green">{{buggyRequired?"Yes":"No"}}</span></ion-label>
                                <ion-toggle [disabled]="!teeTimeSlotDisplay.slot.allowWalking" [(ngModel)]="buggyRequired"></ion-toggle>
                      </ion-item>
                    </div>
                    
                <div *ngIf="teeSlotNew">
                    <!-- && !teeTimeSlotDisplay.slot.caddyMandatory -->
                      <ion-item>
                        <ion-label>*** Do you require caddy?&nbsp;&nbsp;<span style="color:green">{{caddyRequired?"Yes":"No"}}</span></ion-label>
                        <ion-toggle [disabled]="teeTimeSlotDisplay.slot.caddyMandatory" [(ngModel)]="caddyRequired"></ion-toggle>
              </ion-item>
            </div>
            <!-- <div *ngIf="teeTimeSlotDisplay.slot.allowWalking || !teeTimeSlotDisplay.slot.caddyMandatory">
                <span style="font-style:italic" *ngIf="teeSlotNew">*** You can change this setting later in the booking</span>
                <span style="font-style:italic" *ngIf="!teeSlotNew">*** Note :  This will only affect current booking session</span>
            </div> -->
                            <!-- <ion-item> -->
                                <ion-item *ngIf="teeSlotNew">
                                    <ion-label item-left>Playing 9 or 18 holes? <b style="color:green">{{holesPlayed==='1'?'9':'18'}}</b></ion-label>
                                    <ion-segment  [disabled]="!checkHolesAllowedEnable()"  item-right no-padding [(ngModel)]="holesPlayed">
                                        <ion-segment-button value="1">
                                            9<span *ngIf="holesPlayed==='1'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                        <ion-segment-button value="2">
                                            18<span *ngIf="holesPlayed==='2'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                    </ion-segment>
                                </ion-item>
                                <ion-item *ngIf="teeSlotNew && !fromClub">
                                          <ion-label>Are you booking for someone else?&nbsp;&nbsp;<span style="color:green">{{bookForOther?"Yes":"No"}}</span></ion-label>
                                          <ion-toggle [(ngModel)]="bookForOther"></ion-toggle>
                                </ion-item> 
                                
                  <!-- <ion-item *ngIf="teeSlotNew">
                    <h2>How many buggies needed?</h2>
                    <button class="button-subtract" clear icon-only color="danger" (click)="addBuggy(-1)" ion-button item-right>
                        <img src="assets/img/button-minus.svg" />
                    </button>
                    <button class="button-value" outline ion-button item-right>{{buggyReq}}</button>
                    <button class="button-add"  clear icon-only (click)="addBuggy(1)" ion-button item-right>
                        <img src="assets/img/button-plus.svg" /> 
                    </button>
               
                     
                </ion-item> -->
                <!-- <ion-item *ngIf="teeSlotNew">
                    <h2>How many caddies needed?</h2>
                    <button class="button-subtract" clear icon-only color="danger" (click)="addCaddy(-1)" ion-button item-right>
                        <img src="assets/img/button-minus.svg" />
                    </button>
                    <button class="button-value" outline ion-button item-right>{{caddyReq}}</button>
                    <button class="button-add"  clear icon-only (click)="addCaddy(1)" ion-button item-right>
                        <img src="assets/img/button-plus.svg" /> 
                    </button>
               
                </ion-item> -->
        
                                <!-- <ion-item *ngIf="bookingSlot && bookingSlot.bookedByPlayer">Booked by {{bookingSlot.bookedByPlayer?bookingSlot.bookedByPlayer.playerName:''}}</ion-item> -->
        
                            <!-- <h3>{{this.teeTimeSlotDisplay.slot.eighteenHolesAllowed?18:9}} Holes</h3> -->
                            <ion-item  *ngIf="teeSlotNew">
                                <h2 (click)="onMoreTeeSlotSettings()" style=" text-align:left;">See Tee Slot Settings<i style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i></h2>
                            </ion-item>
                            <ion-item *ngIf="teeSlotNew && 0">
                            <h3 *ngIf="teeSlotNew && teeTimeSlotDisplay && !teeTimeSlotDisplay.slot.pricingPlanPromotional" (click)="setTogglePromoDetails()" style="text-align: left;" >Pricing Plan Used : {{getPricingPlan('normal','name')}} |
                                <!-- *ngIf="teeSlotNew && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlan" -->
                                <span *ngIf="!togglePlanDetails">See more</span>
                                <span *ngIf="togglePlanDetails">See less</span>
                               </h3>
                           <span style="text-align: left;" *ngIf="togglePlanDetails">
                               <ul>
                                   <li>{{getPricingPlan('normal','name')}}</li>
                                   <li>{{getPricingPlan('normal','description')}}</li>
                                   <li>Discounts Applicable : {{getPricingPlan('normal','dicounts')}}</li>
                                   <li>Promotional : {{getPricingPlan('normal','promotional')}}</li>
                               </ul>
                           </span>
                           <h3 *ngIf="teeSlotNew && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlanPromotional" style="text-align: left;" (click)="setTogglePromoDetails('promo')" >Pricing Promo Plan Used : {{getPricingPlan('promo','name')}} |
                            <!-- *ngIf="teeSlotNew && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlanPromotional" -->
                               <span *ngIf="!togglePlanPromoDetails">See more</span>
                               <span *ngIf="togglePlanPromoDetails">See less</span>
                               </h3>
                           <span style="text-align: left;" *ngIf="togglePlanPromoDetails  && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlanPromotional">
                               <ul>
                                   <li>{{getPricingPlan('promo','name')}}</li>
                                   <li>{{getPricingPlan('promo','description')}}</li>
                                   <li>Discounts Applicable : {{getPricingPlan('promo','dicounts')}}</li>
                                   <li>Promotional : {{getPricingPlan('promo','promotional')}}</li>
                               </ul>
                           </span>
                        </ion-item>
                            <ion-item *ngIf="getAllowUpdatePostPayment('deals')  && (prices || promoPrices)" style="text-align:center" no-padding>
                            <h1><span *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)" 
                                [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></h1>
                                <!-- <h2 *ngIf="playerReq>1"></h2>
                                <h4 *ngIf="playerReq>1"></h4> -->
                            <button style="height: 3em !important"  text-wrap *ngIf="getAllowUpdatePostPayment('deals') && (promoPrices || prices)" ion-button clear (click)="togglePrices()" >
                                <strong>
                                <span *ngIf="!displayPrices" class="voucher-header" style="color:red;font-size: large;"><i class="fas fa-fw fa-tags"></i>&nbsp;See other packages / deals</span>
                                <span *ngIf="displayPrices">Close</span>
                            </strong>
                            </button>
                            <ion-grid padding *ngIf="displayPrices">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Packages Available</button>
                                </ion-col>
                                <ion-row *ngFor="let price of getClubPackages('new')" col-12>
                                    <ng-container *ngIf="price.id">
                                    <ion-col no-padding class="price-field">{{price.name}}</ion-col>
                                    <ion-col no-padding class="price-param">
                                        <!-- <span style="color:#5DBC81;font-weight:bold;">{{teeTimeSlotDisplay.currency.symbol}} {{price.amount}}</span> -->
                                        <span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,price.id)"></span>
                                    </ion-col>
                                </ng-container>
                                </ion-row>
                                <div *ngIf="0">
                                <ion-row *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)">
                                    <ion-col class="price-field">Visitor</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.SENIOR) || (promoPrices && promoPrices.SENIOR)">
                                        <ion-col class="price-field">Senior Citizen</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'SENIOR')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.STAFF) || (promoPrices && promoPrices.STAFF)">
                                        <ion-col class="price-field">Staff Member</ion-col>
                                        <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STAFF')"></span></ion-col>
                                    </ion-row>
                                    <ion-row *ngIf="(prices && prices.LADIES) || (promoPrices && promoPrices.LADIES)">
                                            <ion-col class="price-field">Ladies</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'LADIES')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.ARMY) || (promoPrices && promoPrices.ARMY)">
                                        <ion-col class="price-field">Army</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'ARMY')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.GOVT) || (promoPrices && promoPrices.GOVT)">
                                        <ion-col class="price-field">Civil Servants</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GOVT')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.JUNIOR) || (promoPrices && promoPrices.JUNIOR)">
                                        <ion-col class="price-field">Junior</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'JUNIOR')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.MEMBER) || (promoPrices && promoPrices.MEMBER)">
                                        <ion-col class="price-field">Club Member</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'MEMBER')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.POLICE) || (promoPrices && promoPrices.POLICE)">
                                        <ion-col class="price-field">Police</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'POLICE')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.WOMAN) || (promoPrices && promoPrices.WOMAN)">
                                        <ion-col class="price-field">Women</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'WOMAN')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.GUEST) || (promoPrices && promoPrices.GUEST)">
                                        <ion-col class="price-field">Member's Guest</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GUEST')"></span></ion-col>
                                </ion-row>
                            </div>
                            </ion-grid>
                            <ion-row *ngIf="displayPrices && !getPromoPlan(teeTimeSlotDisplay.slot,'promo')">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Package Details</button>
                                </ion-col>        
                                <ion-col padding-left padding-right no-padding text-left>{{getNormalPlan(teeTimeSlotDisplay.slot,'name')}}
                                    <ul style="overflow-wrap: break-word;white-space: normal;">
                                        <li [innerHTML]="getNormalPlan(teeTimeSlotDisplay.slot,'description')"></li>
                                        <li>Discount(s) Applicable : {{getNormalPlan(teeTimeSlotDisplay.slot,'discounts')?'Yes':'No'}}</li>
                                    </ul>
                                </ion-col>
                            </ion-row>
                            <ion-row *ngIf="displayPrices && getPromoPlan(teeTimeSlotDisplay.slot,'promo')">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Promotion(s) Available</button>
                                </ion-col>        
                                <ion-col padding-left padding-right no-padding text-left>{{getPromoPlan(teeTimeSlotDisplay.slot,'name')}}
                                    <ul style="overflow-wrap: break-word;white-space: normal;">
                                        <li [innerHTML]="getPromoPlan(teeTimeSlotDisplay.slot,'description')"></li>
                                        <li>Discount(s) Applicable : {{getPromoPlan(teeTimeSlotDisplay.slot,'discounts')?'Yes':'No'}}</li>
                                    </ul>
                                </ion-col>
                            </ion-row>
                            <ion-row col-12 *ngIf="displayPrices && voucherSeries && voucherSeries.length>0">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">
                                        {{!fromClub && playerVoucher && playerVoucher.length > 0?playerVoucher.length:''}} Voucher(s) Available</button>
                                    <!-- (click)="clubs.showPromo = !clubs.showPromo" -->
                                </ion-col>
                                <ng-container *ngFor="let vs of voucherSeries" col-12>
                                    <div no-padding col-12>
                                    <ion-row col-12 no-padding>
                                        <ion-col col-12 padding-left padding-right no-padding text-left style="white-space:normal; font-weight: bold;">
                                            <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                            <b>{{vs.name}}</b>
                                        </ion-col>
                                    </ion-row>
                                    <ion-row col-12>
                                        <ion-col col-8 
                                        padding-left padding-right no-padding text-left>
                                    <ul>
                                        <li *ngIf="vs.description" [innerHTML]="escapeCRLF(vs.description)">
                                            <!-- {{vs.description}} -->
                                        </li>
                                           <li *ngIf="vs.allowOnWeekdays || vs.allowOnWeekends || vs.allowOnPublicHolidays">
                                                {{getVoucherApplicableText(vs,'allowDays')}}
                                            </li>
                                            <li *ngIf="vs.appliesToBookingAmount">
                                                {{getVoucherApplicableText(vs,'bookingAmount')}}
                                            </li>
                                            <li *ngIf="vs.appliesToFlight">
                                                {{getVoucherApplicableText(vs,'flight')}}
                                            </li>
            
                                            <!-- <li>
                                                {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency)}}
                                            </li>                                         -->
                                            <li>
                                                Validity {{vs.validityDays}} days
                                            </li>
                                    </ul>
                                </ion-col>
                                <ion-col col-4 padding-left padding-right no-padding text-right style="white-space:normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                    <!-- col-12 col-md-4 col-lg-4 col-xl-4  -->
                                    <span [innerHTML]="getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')">

                                    </span>
                                    <!-- {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')}} -->
                                </ion-col>
                                </ion-row>
                            </div>
                            </ng-container>
                            </ion-row>
                                <ion-row col-12 *ngIf="displayPrices && playerActiveClubDiscount && playerActiveClubDiscount.length>0">
                                <!-- <ion-col padding-left padding-right no-padding text-right col-6>- RM 30</ion-col> -->
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Club Discounts/Privilege Cards</button>
                                </ion-col>
                                <ng-container  *ngFor="let cDiscounts of playerActiveClubDiscount" col-12>
                                    <div *ngIf="cDiscounts && cDiscounts.active" no-padding col-12>
                                        <ion-row col-12 no-padding>
                                        <ion-col col-12 padding-left padding-right no-padding text-left style="white-space: normal;">
                                            <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                            <b>{{cDiscounts.name}}</b>
                                        </ion-col>
                                        
                                        </ion-row>
                                        <ion-row>
                                        <ion-col col-8 
                                         padding-left padding-right no-padding text-left>
                                            <ul>
                                        <li *ngIf="cDiscounts && cDiscounts.description" [innerHTML]="escapeCRLF(cDiscounts.description)">
                                            <!-- {{cDiscounts.description}} -->
                                        </li>
                                        <li>Valid <b>{{getDateText(cDiscounts.validFrom)}}</b> to <b >{{getDateText(cDiscounts.validUntil)}}</b></li>
                                        <li *ngIf="getDiscountText(cDiscounts, 'appliesFor')">{{getDiscountText(cDiscounts, 'appliesFor')}}</li> 
                                        <li *ngIf="getDiscountText(cDiscounts, 'appliesTo')">{{getDiscountText(cDiscounts, 'appliesTo')}}</li>
                                        <span *ngIf="0 && cDiscounts && !cDiscounts.applicableRate && cDiscounts.discountRates && cDiscounts.discountRates.length > 0">
                                            <li>Available Discounts rates :</li>
                                                    <ul *ngFor="let rate of cDiscounts.discountRates">
                                                        <li>{{rate.dayName}}</li>
                                                    </ul>
                                            </span>
                                            </ul>
                                        </ion-col>
                                        <ion-col col-4 padding-left padding-right no-padding text-right style="white-space: normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                            <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                                            <span [innerHTML]="getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')" 
                                            style="color:#5DBC81;font-weight:bold;">
                                             <!-- {{getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')}} -->
                                         </span>
                                        </ion-col>
                                    </ion-row>
                                </div>
                                      </ng-container>
                            </ion-row>
                            <button *ngIf="displayPrices" ion-button small clear block (click)="togglePrices()" class="voucher-header">
                                <span >Close</span>
                            </button>
                        </ion-item>
                    </ion-card-content>
                    
                    <ion-item *ngIf="!teeSlotNew && fromClub"  >
                        <!-- *ngIf="teeSlotNew" -->
                        <ion-label text-wrap item-end>Allow Players to Pay at the Club (avoids auto-cancellation)
                            <!-- &nbsp;&nbsp;<span style="color:green">{{bookingCancelGuard?"Yes":"No"}}</span> -->
                        </ion-label>
                        <ion-toggle (ionChange)="onBookingCancelGuard()" item-start [(ngModel)]="bookingCancelGuard"></ion-toggle>
                    </ion-item>
                    <!-- <ion-item> -->
                        <span >
                            <!-- *ngIf="grpTeeSlotInfo" -->
                        <button class="booking-book-button" (click)="onCancelBooking()" 
                        *ngIf="!teeSlotNew && bookingType!=='past'  && (bookingSlot.bookingStatus!=='CancelledByPlayer' && bookingSlot.bookingStatus !== 'CancelledByClub')" 
                        ion-button full color="danger">CANCEL THIS BOOKING</button>
                        <button class="booking-book-button" (click)="onUndoCancelBooking()" 
                        *ngIf="!teeSlotNew && fromClub && (bookingSlot.bookingStatus==='CancelledByPlayer' || bookingSlot.bookingStatus === 'CancelledByClub')"
                        ion-button full color="gold">UNDO CANCELLATION</button>
                        <ion-item *ngIf="teeSlotNew && botsOut" >
                            <!-- style='height:5em;' -->
                            <!-- <re-captcha (resolved)="resolved($event)" siteKey="6LdFJNcZAAAAAI1E_KFVSrbmAyUYIWRdp_Q4ayck"></re-captcha> -->
                            <!-- <re-captcha (resolved)="resolved($event)" siteKey="6LcJQM0ZAAAAAGVMmPWu6tTK4JzCj_TvNXm4gOIy"></re-captcha> -->
                            <!-- <re-captcha size="invisible" (resolved)="resolved($event)" siteKey="6LdNKdcZAAAAAD-Vweo5Fa4AqXJeN8UKknDIQE8z"></re-captcha> -->
        
                            <!-- resolved($event) -->
                            <!-- *ngIf="botsOut" -->
                            <re-captcha  style="visibility: hidden;"
                                #captchaRef="reCaptcha"
                                (resolved)="resolved($event)"
                                siteKey="6LcJQM0ZAAAAAGVMmPWu6tTK4JzCj_TvNXm4gOIy"
                                size="invisible"
                                ></re-captcha>
                                <button *ngIf="botsOut" style="height:3em;font-size:1.5rem;" item-start ion-button outline (click)="captchaRef.execute()">
                                    <i *ngIf="!captchaResponse" class="fa fa-fw fa-check"></i>
                                    <i *ngIf="captchaResponse" class="fas fa-fw fa-redo-alt"></i>
                                    &nbsp;Tap here before booking
                                   </button>
                                   <i *ngIf="botsOut" (click)="onTooltipRecaptcha()" item-start style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i>
                                   <button *ngIf="botsOut" ion-button clear item-end (click)="onRecaptchaToolTip()" style="height: auto;">
                                    <img style="height:2em; width:auto;" src="assets/img/recaptcha-seeklogo.com.svg">
                                </button>
                                

                       <!-- <button ion-button (click)="captchaRef.reset();captchaRef.execute()"><i class="fas fa-fw fa-redo-alt"></i>Retry</button>   -->
                                                     <!-- <pre>reCAPTCHA response log:
                                {{ captchaResponse || '(empty)' }}</pre> -->
                            
                        </ion-item>
                        <ion-item no-padding *ngIf="captchaResponse" style="font-size: 1.2rem;">
                            <!-- *ngIf="teeSlotNew" -->
                            <ion-label text-wrap item-end>Allow club to contact me on booking issue via Phone Number and Email
                                <!-- &nbsp;&nbsp;<span style="color:green">{{bookingCancelGuard?"Yes":"No"}}</span> -->
                            </ion-label>
                            <ion-toggle [disabled]="true" item-start [(ngModel)]="allowClubContactInfo"></ion-toggle>
                        </ion-item>
                    <button class="booking-book-button" [disabled]="(!captchaResponse && botsOut)"  (click)="onBookNow()" *ngIf="teeSlotNew" ion-button full color="gold">BOOK NOW</button>
                    <!-- [disabled]="!captchaResponse" -->
                </span>
                    
                    <!-- </ion-item> -->
                </ion-card>
                </ion-col>
                
                </ion-row>
            </ion-col>
            <ion-col *ngIf="teeSlotNew" no-padding col-12 col-lg col-xl>
                <ion-row>
                    <ion-col col-12>
                        <ion-item-divider sticky *ngIf="!teeSlotNew"
            style="margin:10px;margin-bottom:0;width:calc(100% - 1.3rem);padding-left:5px;padding-right:5px;
            border-style:solid;border-color:green;border-width:thin;border-radius:1em;background-color:#DDF6D6;">
            <ion-row >
                <ion-col col-6 style="text-align: left;font-size: medium;">
                    <strong>{{teeTimeSlotDisplay.slot.teeOffDate | date:"EEEE, d MMMM yyyy"}}</strong><br>
                    Status : <strong>{{getBookingDetails('status')}}</strong>
                </ion-col>
                <ion-col col-6 style="text-align: right;font-size:medium;font-weight: bold;">
                
                <span style="color:#1b6a34;">{{getProperTime(teeTimeSlotDisplay.slot.teeOffTime)}}</span><br>
                    <span style="font-size: 2.3rem;
                    letter-spacing: 1px;align-self: center;">
                    <strong>{{getBookingDetails('currency')}} {{getBookingDetails('price')  | number: '1.2-2'}}</strong>
                </span>
                </ion-col>
            </ion-row></ion-item-divider>
                    </ion-col>
                    <ion-col col-12 [class.center-box]="teeSlotNew" style="padding-top:0">
                <ion-card no-padding class="slot-box" style="margin-top:0"> <!-- booking information-->
                    <ion-card-header no-padding class="slot-subtitle-box">
                        <ion-row>
                            <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;"  (click)="toggleBookingClick(1)">
                                <img style="max-height:1.5em;width:webkit-fill-available"
                                    src="assets/img/booking-item-time.svg" />
                            </ion-col>
                            <ion-col col-9 style="background-color: white;letter-spacing: 2px;"  (click)="toggleBookingClick(1)">
                                Booking Information
                            </ion-col>
                            <ion-col col-1 style="padding-left:0;padding-right:0;">
                                <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                <i *ngIf="checkBookingTabsComplete('1')" class="fa fa-fw fa-check-circle "></i>
                                <i (click)="checkExclamationInfo('1')" *ngIf="!checkBookingTabsComplete('1')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                <!-- </ion-badge> -->
                            </ion-col> 
                        </ion-row>
                    </ion-card-header>
                    <ion-card-content  style="padding:1rem;" class="slot-detail-box">
                        <!-- *ngIf="grpTeeSlotInfo" -->
                        <!-- <ion-item>
                        Booked by {{bookingSlot.bookedByPlayer?bookingSlot.bookedByPlayer.playerName:''}}
                        </ion-item> -->
                        <ion-item style="text-align: center;letter-spacing:1px;padding:0;">
                            <h1 *ngIf="getClubCourseDetails('club')" style="font-weight:bold;text-overflow: ellipsis;overflow: hidden;">{{getClubCourseDetails('club')}}</h1>
                            <h2 style="font-weight:bold;text-overflow: ellipsis;overflow: hidden;margin-bottom:1rem">{{getClubCourseDetails('course')}}</h2>
                            <!-- <span> -->
                            <!-- </span> -->
                            <button *ngIf="!teeSlotNew && fromClub" ion-button clear full (click)="changeStartCourse()">Change course</button>
                            <span style="text-align: left;" *ngIf="!teeSlotNew 
                            && (bookingSlot.bookingStatus === 'CancelledByClub' || bookingSlot.bookingStatus === 'CancelledByPlayer')">
                            <p style="font-size:1.5rem;" *ngIf="bookingSlot.cancellationReason"><b>Reason for cancellation </b>: {{bookingSlot.cancellationReason?bookingSlot.cancellationReason:''}}</p>
                            <p style="font-size:1.5rem;" *ngIf="bookingSlot.canceledBy && bookingSlot.canceledBy.name"><b>Cancelled by</b>: {{bookingSlot.canceledBy?bookingSlot.canceledBy.name:''}}</p>
                            
                            </span>
                            <span *ngIf="!teeSlotNew && bookingSlot">
                                <div class="row" (click)="getContactInfo('bookingInfo')">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked by: </span><strong>{{bookingSlot?(bookingSlot.bookedByUser?bookingSlot.bookedByUser.name:bookingSlot.bookedByPlayer.playerName):''}}</strong><i class="fas fa-fw fa-phone"></i></div>
                                </div>
                                <div class="row" *ngIf="bookingSlot.bookingCreatedAt">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked on: </span><strong>{{getBookingDetails('bookedOn')}}</strong></div>
                                </div>
                                <!-- <div class="row" *ngIf="bookingSlot.bookingCreatedAt">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Booked on: </span><strong>{{getBookingDetails('bookedOn')}}</strong></div>
                                </div> -->
                                <div class="row">
                                    <div class="column" style="width:50%; text-align: left;"><span style="color:#30bb5b">Ref: </span><strong>{{getBookingDetails('reference')}}</strong></div>
                                </div>
                                <br>
                                <h1 style="color:#30bb5b; text-align:left;"><strong>Booking Details</strong></h1>
                                <div class="row">
                                    <div class="column info-item info-header" style="width:40%">Item</div>
                                    <div class="column info-requested info-header" style="width:40%;">Requested</div>
                                    <div class="column info-actual info-header" style="width:20%">Actual</div>
                                </div>
                                <div class="row" *ngIf="bookingSlot.slotAssigned.startCourse.id !== bookingSlot.slotPreferred.startCourse.id">
                                    <div class="column info-item">Course Played</div>
                                    <div class="column info-requested">{{bookingSlot.slotAssigned.startCourse.name}}</div>
                                    <div class="column info-actual">{{bookingSlot.slotPreferred.startCourse.name}}</div>
                                </div>
                                <div class="row" *ngIf="bookingSlot.slotAssigned.teeOffTime !== bookingSlot.slotPreferred.teeOffTime">
                                    <div class="column info-item">Tee Off Time</div>
                                    <div class="column info-requested">{{getProperTime(bookingSlot.slotPreferred.teeOffTime)}}</div>
                                    <div class="column info-actual">{{getProperTime(bookingSlot.slotAssigned.teeOffTime)}}</div>
                                </div>
                                <div class="row">
                                    <div (click)="onChangeNinesBooking()" class="column info-item">Holes to Play<i *ngIf="checkHolesAllowedEnable() && bookingType!=='past'  && (bookingSlot.bookingStatus!=='CancelledByPlayer' && bookingSlot.bookingStatus !== 'CancelledByClub')" class="fa fa-fw fa-cog"></i></div>
                                    <div class="column info-requested">{{bookingSlot.ninesPlayed?bookingSlot.ninesPlayed*9:'-'}}</div>
                                    <div class="column info-actual">{{bookingSlot.ninesPlayed?bookingSlot.ninesPlayed*9:'-'}}</div>
                                </div>
                                <div class="row">
                                    <div class="column info-item">Players</div>
                                    <div class="column info-requested">{{bookingSlot.totalPlayers}}</div>
                                    <div class="column info-actual">{{bookingSlot.bookingPlayers.length}}</div>
                                </div>
                                <div class="row">
                                    <div class="column info-item">Buggies</div>
                                    <div class="column info-requested">{{bookingSlot.buggyRequested}}</div>
                                    <div class="column info-actual">{{buggyReq}}</div>
                                </div>
                                <div class="row">
                                    <div class="column info-item">Caddies</div>
                                    <div class="column info-requested">{{bookingSlot.caddyRequested}}</div>
                                    <div class="column info-actual">{{caddyReq}}</div>
                                </div>
                                <div class="row" style="margin-bottom:1rem" (click)="onEstimatePriceClick()">
                                    <div class="column info-item">Estimated Cost ({{bookingSlot.slotAssigned.currency.symbol}})<i style="color:#30bb5b; font-size:2rem;" class="fa fa-fw fa-question-circle"></i></div>
                                    <div class="column info-requested">{{getEstimatedPrice('requested') | number: '1.0-2'}}</div>
                                    <div class="column info-actual">{{getEstimatedPrice('actual') | number: '1.0-2'}}</div>
                                </div>
                                <h3 (click)="onMoreTeeSlotSettings()" style=" text-align:left;">See Tee Slot Settings<i style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i></h3>
                                <h3 *ngIf="!teeSlotNew && bookingSlot && !bookingSlot.slotAssigned.pricingPlanPromotional" (click)="setTogglePromoDetails()" style="text-align: left;" >Pricing Plan Used : {{getPricingPlan('normal','name')}} |
                                    <!-- *ngIf="!teeSlotNew && bookingSlot && bookingSlot.slotAssigned.pricingPlan" -->
                                     <span *ngIf="!togglePlanDetails">See more</span>
                                     <span *ngIf="togglePlanDetails">See less</span>
                                    </h3>
                                <span style="text-align: left;" *ngIf="togglePlanDetails">
                                    <ul>
                                        <li>{{getPricingPlan('normal','name')}}</li>
                                        <li>{{getPricingPlan('normal','description')}}</li>
                                        <li>Discounts Applicable : {{getPricingPlan('normal','dicounts')}}</li>
                                        <li>Promotional : {{getPricingPlan('normal','promotional')}}</li>
                                    </ul>
                                </span>
                                <h3 *ngIf="!teeSlotNew && bookingSlot && bookingSlot.slotAssigned.pricingPlanPromotional" style="text-align: left;" (click)="setTogglePromoDetails('promo')" >Pricing Promo Plan Used : {{getPricingPlan('promo','name')}} |
                                    <!-- *ngIf="!teeSlotNew && bookingSlot && bookingSlot.slotAssigned.pricingPlanPromotional" -->
                                    <span *ngIf="!togglePlanPromoDetails">See more</span>
                                    <span *ngIf="togglePlanPromoDetails">See less</span>
                                    </h3>
                                <span style="text-align: left;" *ngIf="togglePlanPromoDetails && bookingSlot && bookingSlot.slotAssigned.pricingPlanPromotional">
                                    <ul>
                                        <li>{{getPricingPlan('promo','name')}}</li>
                                        <li>{{getPricingPlan('promo','description')}}</li>
                                        <li>Discounts Applicable : {{getPricingPlan('promo','dicounts')}}</li>
                                        <li>Promotional : {{getPricingPlan('promo','promotional')}}</li>
                                    </ul>
                                </span>
                             </span>
                           
                        </ion-item>
                        
                    
                <ion-item *ngIf="!teeSlotNew && getAllowUpdatePostPayment('deals')" style="text-align:center" no-padding>
                    <!-- *ngIf="prices || promoPrices" -->
                    <!-- <h1><span *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)" 
                        [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></h1> -->
                    <button style="height: 3em !important"  text-wrap ion-button clear (click)="togglePrices()" class="voucher-header">
                        <!-- *ngIf="promoPrices || prices" -->
                        <strong>
                        <span *ngIf="!displayPrices" style="color:red;font-size: large;"><i class="fas fa-fw fa-tags"></i>&nbsp;See other packages / deals</span>
                        <span *ngIf="displayPrices">Close</span>
                    </strong>
                    </button>
                    <ion-grid padding *ngIf="displayPrices">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Packages Available</button>
                        </ion-col>
                        <ion-row *ngFor="let price of getClubPackages()" col-12>
                            <ion-col no-padding class="price-field">{{price.name}}</ion-col>
                            <ion-col no-padding class="price-param">
                                <span style="color:#5DBC81;font-weight:bold;">{{bookingSlot.slotAssigned.currency.symbol}} {{numberWithCommas(price.amount)}}</span>
                                <!-- <span [innerHTML]="getSlotPrice(clubs.slots[0],price.id)"></span> -->
                            </ion-col>
                        </ion-row>
                        <div *ngIf="0">
                        <ion-row *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)">
                            <ion-col class="price-field">Visitor</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.SENIOR) || (promoPrices && promoPrices.SENIOR)">
                                <ion-col class="price-field">Senior Citizen</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'SENIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.STAFF) || (promoPrices && promoPrices.STAFF)">
                                <ion-col class="price-field">Staff Member</ion-col>
                                <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STAFF')"></span></ion-col>
                            </ion-row>
                            <ion-row *ngIf="(prices && prices.LADIES) || (promoPrices && promoPrices.LADIES)">
                                    <ion-col class="price-field">Ladies</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'LADIES')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.ARMY) || (promoPrices && promoPrices.ARMY)">
                                <ion-col class="price-field">Army</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'ARMY')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GOVT) || (promoPrices && promoPrices.GOVT)">
                                <ion-col class="price-field">Civil Servants</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GOVT')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.JUNIOR) || (promoPrices && promoPrices.JUNIOR)">
                                <ion-col class="price-field">Junior</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'JUNIOR')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.MEMBER) || (promoPrices && promoPrices.MEMBER)">
                                <ion-col class="price-field">Club Member</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'MEMBER')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.POLICE) || (promoPrices && promoPrices.POLICE)">
                                <ion-col class="price-field">Police</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'POLICE')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.WOMAN) || (promoPrices && promoPrices.WOMAN)">
                                <ion-col class="price-field">Women</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'WOMAN')"></span></ion-col>
                        </ion-row>
                        <ion-row *ngIf="(prices && prices.GUEST) || (promoPrices && promoPrices.GUEST)">
                                <ion-col class="price-field">Member's Guest</ion-col>
                            <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GUEST')"></span></ion-col>
                        </ion-row>
                    </div>
                    </ion-grid>
                    <ion-row *ngIf="displayPrices && !getPromoPlan(bookingSlot.slotAssigned,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Package Details</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getNormalPlan(bookingSlot.slotAssigned,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getNormalPlan(bookingSlot.slotAssigned,'description')"></li>
                                <li>Discount(s) Applicable : {{getNormalPlan(bookingSlot.slotAssigned,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row *ngIf="displayPrices && getPromoPlan(bookingSlot.slotAssigned,'promo')">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Promotion(s) Available</button>
                        </ion-col>
                        <ion-col padding-left padding-right no-padding text-left>{{getPromoPlan(bookingSlot.slotAssigned,'name')}}
                            <ul style="overflow-wrap: break-word;white-space: normal;">
                                <li [innerHTML]="getPromoPlan(bookingSlot.slotAssigned,'description')"></li>
                                <li>Discount(s) Applicable : {{getPromoPlan(bookingSlot.slotAssigned,'discounts')?'Yes':'No'}}</li>
                            </ul>
                        </ion-col>
                    </ion-row>
                    <ion-row col-12 *ngIf="displayPrices && voucherSeries && voucherSeries.length>0">
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">
                                {{!fromClub && playerVoucher && playerVoucher.length > 0?playerVoucher.length:''}} Voucher(s) Available</button>
                            <!-- (click)="clubs.showPromo = !clubs.showPromo" -->
                        </ion-col>
                        <ng-container *ngFor="let vs of voucherSeries" col-12>
                            <div no-padding col-12>
                            <ion-row col-12 no-padding>
                                <ion-col col-12 padding-left padding-right no-padding text-left style="white-space:normal; font-weight: bold;">
                                    <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                    {{vs.name}}
                                </ion-col>
                                
                            </ion-row>
                            <ion-row col-12>
                                <ion-col col-8 
                                padding-left padding-right no-padding text-left>
                            <ul>
                                <li *ngIf="vs.description" [innerHTML]="escapeCRLF(vs.description)">
                                    <!-- {{vs.description}} -->
                                </li>
                                   <li *ngIf="vs.allowOnWeekdays || vs.allowOnWeekends || vs.allowOnPublicHolidays">
                                        {{getVoucherApplicableText(vs,'allowDays')}}
                                    </li>
                                    <li *ngIf="vs.appliesToBookingAmount">
                                        {{getVoucherApplicableText(vs,'bookingAmount')}}
                                    </li>
                                    <li *ngIf="vs.appliesToFlight">
                                        {{getVoucherApplicableText(vs,'flight')}}
                                    </li>
    
                                    <!-- <li>
                                        {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency)}}
                                    </li>                                         -->
                                    <li>
                                        Validity {{vs.validityDays}} days
                                    </li>
                            </ul>
                        </ion-col>
                        <ion-col col-4 padding-left padding-right no-padding text-right style="white-space:normal; text-align: right;color:#5DBC81;font-weight:bold;">
                            <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                            <span 
                            [innerHTML]="getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')"></span>
                        </ion-col>
                        </ion-row>
                    </div>
                    </ng-container>
                    </ion-row>
                        <ion-row col-12 *ngIf="displayPrices && playerActiveClubDiscount && playerActiveClubDiscount.length>0">
                        <!-- <ion-col padding-left padding-right no-padding text-right col-6>- RM 30</ion-col> -->
                        <ion-col col-12>
                            <button ion-button outline full class="voucher-header">Club Discounts/Privilege Cards</button>
                        </ion-col>
                        <ng-container  *ngFor="let cDiscounts of playerActiveClubDiscount" col-12>
                            <div *ngIf="cDiscounts && cDiscounts.active" no-padding col-12>
                                <ion-row col-12 no-padding>
                                <ion-col col-12 padding-left padding-right no-padding text-left style="white-space: normal;">
                                    <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                    <b>{{cDiscounts.name}}</b>
                                </ion-col>
                                
                                </ion-row>
                                <ion-row col-12>
                                <ion-col col-8 
                                 padding-left padding-right no-padding text-left>
                                    <ul>
                                <li *ngIf="cDiscounts && cDiscounts.description" [innerHTML]="escapeCRLF(cDiscounts.description)">
                                    <!-- {{cDiscounts.description}} -->
                                </li>
                                <li>Valid <b>{{getDateText(cDiscounts.validFrom)}}</b> to <b >{{getDateText(cDiscounts.validUntil)}}</b></li>
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesFor')">{{getDiscountText(cDiscounts, 'appliesFor')}}</li> 
                                <li *ngIf="getDiscountText(cDiscounts, 'appliesTo')">{{getDiscountText(cDiscounts, 'appliesTo')}}</li>
                                <span *ngIf="0 && cDiscounts && !cDiscounts.applicableRate && cDiscounts.discountRates && cDiscounts.discountRates.length > 0">
                                    <li>Available Discounts rates :</li>
                                            <ul *ngFor="let rate of cDiscounts.discountRates">
                                                <li>{{rate.dayName}}</li>
                                            </ul>
                                    </span>
                                    </ul>
                                </ion-col>
                                <ion-col col-4 padding-left padding-right no-padding text-right style="white-space: normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                    <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                                    <span [innerHTML]="getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')"
                                    style="color:#5DBC81;font-weight:bold;">
                                     <!-- {{getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')}} -->
                                 </span>
                                </ion-col>
                            </ion-row>
                        </div>
                              </ng-container>
                    </ion-row>
                    <button *ngIf="displayPrices" ion-button small clear block (click)="togglePrices()" class="voucher-header">
                        <span >Close</span>
                    </button>
                </ion-item>
                        <ion-item *ngIf="teeSlotNew">
                            <h2>How many golfers playing?</h2>
                            <button class="button-subtract" clear icon-only color="danger" (click)="addPlayers(-1)" ion-button item-right>
                                <img src="assets/img/button-minus.svg" />
                            </button>
                            <button class="button-value" outline ion-button item-right>{{playerReq}}</button>
                            <button class="button-add"  clear icon-only (click)="addPlayers(1)" ion-button item-right>
                                <img src="assets/img/button-plus.svg" /> 
                            </button>
                       
                                <!-- <button class="button-subtract" outline color="danger" (click)="addPlayers(-1)" small ion-button item-right><i class="fas fa-minus"></i></button>
                                        <button class="button-value" outline ion-button item-right>{{playerReq}}</button>
                                        <button class="button-add" outline (click)="addPlayers(1)" small ion-button item-right><i class="fas fa-plus"></i></button>  -->
                                       
                        </ion-item>
                        <ion-item  *ngIf="teeSlotNew && fromClub" style="padding-left:0.5em">
                            <div class="row">
                                <div class="column" style="width:20%">
                                    <img style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em"
                                    [src]="getClubPlayerDetails('image')" onerror="this.src='img/default-user.jpg'">
                                </div>
                                <div class="column" style="width:80%">
                                    <div class="row">
                                        <div class="column" style="width:80%;white-space: nowrap;
                                        overflow: hidden;">
                                            <h2 style="font-size: medium;font-weight: bold;color: green;">{{getClubPlayerDetails('name')}} {{getClubPlayerDetails('id')}}</h2>
                                            <!-- <h3 [innerHTML]="getPlayerSlotDetails(99,'discount')"></h3> -->
                                        </div>
                                        <div class="column" style="width:20%;text-align:right" >
                                                 <button class="player-action" *ngIf="!clubBookingPlayers " (click)="onClubPlayerSelect()" clear ion-button>
                                                            <i class="fas fa-fw fa-plus-circle"></i>
                                                        </button>
                                                    <button class="player-action" *ngIf="clubBookingPlayers" (click)="onClubDeleteBookingPlayer()" ion-button clear >
                                                        <i style="color:red" class="fa fa-fw fa-times-circle "></i>
                                                    </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="column" style="width:80%">
                                            <span *ngIf="!clubBookingPlayers" style="display:inline-flex;">
                                                <input (keyup.enter)="searchClubBookingPlayer()" style="width:11rem;height:2rem;margin-right:2px" placeholder="Club Mship No." type="text" [disabled]="clubSearchById && clubSearchById > 0 || isBookingCancel()" [(ngModel)]="clubSearchByMembership"/> 
                                                <input (keyup.enter)="searchClubBookingPlayer()" style="width:6rem;height:2rem;margin-right:2px" type="number" placeholder="mg2u ID" [disabled]="clubSearchByMembership && clubSearchByMembership.length > 0  || isBookingCancel()" [(ngModel)]="clubSearchById"/>
                                              
                                            <button class="player-action" (click)="clearClubSearchPlayer()" ion-button clear >
                                                        <i style="color:grey" class="fa fa-fw fa-times-circle "></i>
                                                    </button>
                                                </span>
                                                
                                        </div>
                                        <div class="column" style="width:20%;text-align:right">
                                                <button (click)="searchClubBookingPlayer()" class="player-action" *ngIf="!clubBookingPlayers" clear ion-button >
                                                        <i class="fas fa-fw fa-search"></i>
                                                    </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="" -->
                        </ion-item>
                        <div *ngIf="teeSlotNew">
                            <!-- && teeTimeSlotDisplay.slot.allowWalking -->
                            <ion-item >
                                <!-- *ngIf="teeSlotNew" -->
                                <ion-label>*** Do you require buggy?&nbsp;&nbsp;<span style="color:green">{{buggyRequired?"Yes":"No"}}</span></ion-label>
                                <ion-toggle [disabled]="!teeTimeSlotDisplay.slot.allowWalking" [(ngModel)]="buggyRequired"></ion-toggle>
                      </ion-item>
                    </div>
                    
                <div *ngIf="teeSlotNew">
                    <!-- && !teeTimeSlotDisplay.slot.caddyMandatory -->
                      <ion-item>
                        <ion-label>*** Do you require caddy?&nbsp;&nbsp;<span style="color:green">{{caddyRequired?"Yes":"No"}}</span></ion-label>
                        <ion-toggle [disabled]="teeTimeSlotDisplay.slot.caddyMandatory" [(ngModel)]="caddyRequired"></ion-toggle>
              </ion-item>
            </div>
            <!-- <div *ngIf="teeTimeSlotDisplay.slot.allowWalking || !teeTimeSlotDisplay.slot.caddyMandatory">
                <span style="font-style:italic" *ngIf="teeSlotNew">*** You can change this setting later in the booking</span>
                <span style="font-style:italic" *ngIf="!teeSlotNew">*** Note :  This will only affect current booking session</span>
            </div> -->
                            <!-- <ion-item> -->
                                <ion-item *ngIf="teeSlotNew">
                                    <ion-label item-left>Playing 9 or 18 holes? <b style="color:green">{{holesPlayed==='1'?'9':'18'}}</b></ion-label>
                                    <ion-segment [disabled]="!checkHolesAllowedEnable()"  item-right no-padding [(ngModel)]="holesPlayed">
                                        <ion-segment-button value="1">
                                            9<span *ngIf="holesPlayed==='1'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                        <ion-segment-button value="2">
                                            18<span *ngIf="holesPlayed==='2'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                    </ion-segment>
                                </ion-item>
                                <ion-item *ngIf="teeSlotNew && !fromClub">
                                          <ion-label>Are you booking for someone else?&nbsp;&nbsp;<span style="color:green">{{bookForOther?"Yes":"No"}}</span></ion-label>
                                          <ion-toggle [(ngModel)]="bookForOther"></ion-toggle>
                                </ion-item> 
                                
                  <!-- <ion-item *ngIf="teeSlotNew">
                    <h2>How many buggies needed?</h2>
                    <button class="button-subtract" clear icon-only color="danger" (click)="addBuggy(-1)" ion-button item-right>
                        <img src="assets/img/button-minus.svg" />
                    </button>
                    <button class="button-value" outline ion-button item-right>{{buggyReq}}</button>
                    <button class="button-add"  clear icon-only (click)="addBuggy(1)" ion-button item-right>
                        <img src="assets/img/button-plus.svg" /> 
                    </button>
               
                     
                </ion-item> -->
                <!-- <ion-item *ngIf="teeSlotNew">
                    <h2>How many caddies needed?</h2>
                    <button class="button-subtract" clear icon-only color="danger" (click)="addCaddy(-1)" ion-button item-right>
                        <img src="assets/img/button-minus.svg" />
                    </button>
                    <button class="button-value" outline ion-button item-right>{{caddyReq}}</button>
                    <button class="button-add"  clear icon-only (click)="addCaddy(1)" ion-button item-right>
                        <img src="assets/img/button-plus.svg" /> 
                    </button>
               
                </ion-item> -->
        
                                <!-- <ion-item *ngIf="bookingSlot && bookingSlot.bookedByPlayer">Booked by {{bookingSlot.bookedByPlayer?bookingSlot.bookedByPlayer.playerName:''}}</ion-item> -->
        
                            <!-- <h3>{{this.teeTimeSlotDisplay.slot.eighteenHolesAllowed?18:9}} Holes</h3> -->
                            <ion-item  *ngIf="teeSlotNew">
                                <h2 (click)="onMoreTeeSlotSettings()" style=" text-align:left;">See Tee Slot Settings<i style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i></h2>
                            </ion-item>
                            <ion-item *ngIf="teeSlotNew && 0">
                            <h3 *ngIf="teeSlotNew && teeTimeSlotDisplay && !teeTimeSlotDisplay.slot.pricingPlanPromotional" (click)="setTogglePromoDetails()" style="text-align: left;" >Pricing Plan Used : {{getPricingPlan('normal','name')}} |
                                <!-- *ngIf="teeSlotNew && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlan" -->
                                <span *ngIf="!togglePlanDetails">See more</span>
                                <span *ngIf="togglePlanDetails">See less</span>
                               </h3>
                           <span style="text-align: left;" *ngIf="togglePlanDetails">
                               <ul>
                                   <li>{{getPricingPlan('normal','name')}}</li>
                                   <li>{{getPricingPlan('normal','description')}}</li>
                                   <li>Discounts Applicable : {{getPricingPlan('normal','dicounts')}}</li>
                                   <li>Promotional : {{getPricingPlan('normal','promotional')}}</li>
                               </ul>
                           </span>
                           <h3 *ngIf="teeSlotNew && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlanPromotional" style="text-align: left;" (click)="setTogglePromoDetails('promo')" >Pricing Promo Plan Used : {{getPricingPlan('promo','name')}} |
                            <!-- *ngIf="teeSlotNew && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlanPromotional" -->
                               <span *ngIf="!togglePlanPromoDetails">See more</span>
                               <span *ngIf="togglePlanPromoDetails">See less</span>
                               </h3>
                           <span style="text-align: left;" *ngIf="togglePlanPromoDetails  && teeTimeSlotDisplay && teeTimeSlotDisplay.slot.pricingPlanPromotional">
                               <ul>
                                   <li>{{getPricingPlan('promo','name')}}</li>
                                   <li>{{getPricingPlan('promo','description')}}</li>
                                   <li>Discounts Applicable : {{getPricingPlan('promo','dicounts')}}</li>
                                   <li>Promotional : {{getPricingPlan('promo','promotional')}}</li>
                               </ul>
                           </span>
                        </ion-item>
                            <ion-item *ngIf="getAllowUpdatePostPayment('deals')  && (prices || promoPrices)" style="text-align:center" no-padding>
                            <h1><span *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)" 
                                [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></h1>
                                <!-- <h2 *ngIf="playerReq>1"></h2>
                                <h4 *ngIf="playerReq>1"></h4> -->
                            <button style="height: 3em !important"  text-wrap *ngIf="getAllowUpdatePostPayment('deals') && (promoPrices || prices)" ion-button clear (click)="togglePrices()" >
                                <strong>
                                <span *ngIf="!displayPrices" class="voucher-header" style="color:red;font-size: large;"><i class="fas fa-fw fa-tags"></i>&nbsp;See other packages / deals</span>
                                <span *ngIf="displayPrices">Close</span>
                            </strong>
                            </button>
                            <ion-grid padding *ngIf="displayPrices">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Packages Available</button>
                                </ion-col>
                                <ion-row *ngFor="let price of getClubPackages('new')" col-12>
                                    <ng-container *ngIf="price.id">
                                    <ion-col no-padding class="price-field">{{price.name}}</ion-col>
                                    <ion-col no-padding class="price-param">
                                        <!-- <span style="color:#5DBC81;font-weight:bold;">{{teeTimeSlotDisplay.currency.symbol}} {{price.amount}}</span> -->
                                        <span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,price.id)"></span>
                                    </ion-col>
                                </ng-container>
                                </ion-row>
                                <div *ngIf="0">
                                <ion-row *ngIf="(prices && prices.STD) || (promoPrices && promoPrices.STD)">
                                    <ion-col class="price-field">Visitor</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STD')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.SENIOR) || (promoPrices && promoPrices.SENIOR)">
                                        <ion-col class="price-field">Senior Citizen</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'SENIOR')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.STAFF) || (promoPrices && promoPrices.STAFF)">
                                        <ion-col class="price-field">Staff Member</ion-col>
                                        <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'STAFF')"></span></ion-col>
                                    </ion-row>
                                    <ion-row *ngIf="(prices && prices.LADIES) || (promoPrices && promoPrices.LADIES)">
                                            <ion-col class="price-field">Ladies</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'LADIES')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.ARMY) || (promoPrices && promoPrices.ARMY)">
                                        <ion-col class="price-field">Army</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'ARMY')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.GOVT) || (promoPrices && promoPrices.GOVT)">
                                        <ion-col class="price-field">Civil Servants</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GOVT')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.JUNIOR) || (promoPrices && promoPrices.JUNIOR)">
                                        <ion-col class="price-field">Junior</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'JUNIOR')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.MEMBER) || (promoPrices && promoPrices.MEMBER)">
                                        <ion-col class="price-field">Club Member</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'MEMBER')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.POLICE) || (promoPrices && promoPrices.POLICE)">
                                        <ion-col class="price-field">Police</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'POLICE')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.WOMAN) || (promoPrices && promoPrices.WOMAN)">
                                        <ion-col class="price-field">Women</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'WOMAN')"></span></ion-col>
                                </ion-row>
                                <ion-row *ngIf="(prices && prices.GUEST) || (promoPrices && promoPrices.GUEST)">
                                        <ion-col class="price-field">Member's Guest</ion-col>
                                    <ion-col class="price-param"><span [innerHTML]="getSlotPrice(teeTimeSlotDisplay,'GUEST')"></span></ion-col>
                                </ion-row>
                            </div>
                            </ion-grid>
                            <ion-row *ngIf="displayPrices && !getPromoPlan(teeTimeSlotDisplay.slot,'promo')">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Package Details</button>
                                </ion-col>        
                                <ion-col padding-left padding-right no-padding text-left>{{getNormalPlan(teeTimeSlotDisplay.slot,'name')}}
                                    <ul style="overflow-wrap: break-word;white-space: normal;">
                                        <li [innerHTML]="getNormalPlan(teeTimeSlotDisplay.slot,'description')"></li>
                                        <li>Discount(s) Applicable : {{getNormalPlan(teeTimeSlotDisplay.slot,'discounts')?'Yes':'No'}}</li>
                                    </ul>
                                </ion-col>
                            </ion-row>
                            <ion-row *ngIf="displayPrices && getPromoPlan(teeTimeSlotDisplay.slot,'promo')">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Promotion(s) Available</button>
                                </ion-col>        
                                <ion-col padding-left padding-right no-padding text-left>{{getPromoPlan(teeTimeSlotDisplay.slot,'name')}}
                                    <ul style="overflow-wrap: break-word;white-space: normal;">
                                        <li [innerHTML]="getPromoPlan(teeTimeSlotDisplay.slot,'description')"></li>
                                        <li>Discount(s) Applicable : {{getPromoPlan(teeTimeSlotDisplay.slot,'discounts')?'Yes':'No'}}</li>
                                    </ul>
                                </ion-col>
                            </ion-row>
                            <ion-row col-12 *ngIf="displayPrices && voucherSeries && voucherSeries.length>0">
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">
                                        {{!fromClub && playerVoucher && playerVoucher.length > 0?playerVoucher.length:''}} Voucher(s) Available</button>
                                    <!-- (click)="clubs.showPromo = !clubs.showPromo" -->
                                </ion-col>
                                <ng-container *ngFor="let vs of voucherSeries" col-12>
                                    <div no-padding col-12>
                                    <ion-row col-12 no-padding>
                                        <ion-col col-12 padding-left padding-right no-padding text-left style="white-space:normal; font-weight: bold;">
                                            <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                            <b>{{vs.name}}</b>
                                        </ion-col>
                                    </ion-row>
                                    <ion-row col-12>
                                        <ion-col col-8 
                                        padding-left padding-right no-padding text-left>
                                    <ul>
                                        <li *ngIf="vs.description" [innerHTML]="escapeCRLF(vs.description)">
                                            <!-- {{vs.description}} -->
                                        </li>
                                           <li *ngIf="vs.allowOnWeekdays || vs.allowOnWeekends || vs.allowOnPublicHolidays">
                                                {{getVoucherApplicableText(vs,'allowDays')}}
                                            </li>
                                            <li *ngIf="vs.appliesToBookingAmount">
                                                {{getVoucherApplicableText(vs,'bookingAmount')}}
                                            </li>
                                            <li *ngIf="vs.appliesToFlight">
                                                {{getVoucherApplicableText(vs,'flight')}}
                                            </li>
            
                                            <!-- <li>
                                                {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency)}}
                                            </li>                                         -->
                                            <li>
                                                Validity {{vs.validityDays}} days
                                            </li>
                                    </ul>
                                </ion-col>
                                <ion-col col-4 padding-left padding-right no-padding text-right style="white-space:normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                    <!-- col-12 col-md-4 col-lg-4 col-xl-4  -->
                                    <span [innerHTML]="getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')">

                                    </span>
                                    <!-- {{getDealsAmount(vs.voucherAmount, vs.voucherAmountType,vs.club?vs.club.address.countryData.currencySymbol:currency,vs,'voucher')}} -->
                                </ion-col>
                                </ion-row>
                            </div>
                            </ng-container>
                            </ion-row>
                                <ion-row col-12 *ngIf="displayPrices && playerActiveClubDiscount && playerActiveClubDiscount.length>0">
                                <!-- <ion-col padding-left padding-right no-padding text-right col-6>- RM 30</ion-col> -->
                                <ion-col col-12>
                                    <button ion-button outline full class="voucher-header">Club Discounts/Privilege Cards</button>
                                </ion-col>
                                <ng-container  *ngFor="let cDiscounts of playerActiveClubDiscount" col-12>
                                    <div *ngIf="cDiscounts && cDiscounts.active" no-padding col-12>
                                        <ion-row col-12 no-padding>
                                        <ion-col col-12 padding-left padding-right no-padding text-left style="white-space: normal;">
                                            <!-- col-12 col-md-8 col-lg-8 col-xl-8 -->
                                            <b>{{cDiscounts.name}}</b>
                                        </ion-col>
                                        
                                        </ion-row>
                                        <ion-row>
                                        <ion-col col-8 
                                         padding-left padding-right no-padding text-left>
                                            <ul>
                                        <li *ngIf="cDiscounts && cDiscounts.description" [innerHTML]="escapeCRLF(cDiscounts.description)">
                                            <!-- {{cDiscounts.description}} -->
                                        </li>
                                        <li>Valid <b>{{getDateText(cDiscounts.validFrom)}}</b> to <b >{{getDateText(cDiscounts.validUntil)}}</b></li>
                                        <li *ngIf="getDiscountText(cDiscounts, 'appliesFor')">{{getDiscountText(cDiscounts, 'appliesFor')}}</li> 
                                        <li *ngIf="getDiscountText(cDiscounts, 'appliesTo')">{{getDiscountText(cDiscounts, 'appliesTo')}}</li>
                                        <span *ngIf="0 && cDiscounts && !cDiscounts.applicableRate && cDiscounts.discountRates && cDiscounts.discountRates.length > 0">
                                            <li>Available Discounts rates :</li>
                                                    <ul *ngFor="let rate of cDiscounts.discountRates">
                                                        <li>{{rate.dayName}}</li>
                                                    </ul>
                                            </span>
                                            </ul>
                                        </ion-col>
                                        <ion-col col-4 padding-left padding-right no-padding text-right style="white-space: normal; text-align: right;color:#5DBC81;font-weight:bold;">
                                            <!-- col-12 col-md-4 col-lg-4 col-xl-4 -->
                                            <span [innerHTML]="getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')" 
                                            style="color:#5DBC81;font-weight:bold;">
                                             <!-- {{getDealsAmount(cDiscounts.discount, cDiscounts.amountType,currency,cDiscounts, 'privilege')}} -->
                                         </span>
                                        </ion-col>
                                    </ion-row>
                                </div>
                                      </ng-container>
                            </ion-row>
                            <button *ngIf="displayPrices" ion-button small clear block (click)="togglePrices()" class="voucher-header">
                                <span >Close</span>
                            </button>
                        </ion-item>
                    </ion-card-content>
                    <ion-item text-wrap *ngIf="!teeSlotNew && fromClub">
                        <ion-label text-wrap item-end>Allow Players to Pay at the Club (avoids auto-cancellation)
                            <!-- &nbsp;&nbsp;<span style="color:green">{{bookingCancelGuard?"Yes":"No"}}</span> -->
                        </ion-label>
                        <ion-toggle (ionChange)="onBookingCancelGuard()"  item-start [(ngModel)]="bookingCancelGuard"></ion-toggle>
                    </ion-item>
                    <!-- <ion-item> -->
                        <span >
                            <!-- *ngIf="grpTeeSlotInfo" -->
                        <button class="booking-book-button" (click)="onCancelBooking()" 
                        *ngIf="!teeSlotNew && bookingType!=='past'  && (bookingSlot.bookingStatus!=='CancelledByPlayer' && bookingSlot.bookingStatus !== 'CancelledByClub')" 
                        ion-button full color="danger">CANCEL THIS BOOKING</button>
                        <button class="booking-book-button" (click)="onUndoCancelBooking()" 
                        *ngIf="!teeSlotNew && fromClub && (bookingSlot.bookingStatus==='CancelledByPlayer' || bookingSlot.bookingStatus === 'CancelledByClub')"
                        ion-button full color="gold">UNDO CANCELLATION</button>
                        <ion-item *ngIf="teeSlotNew && botsOut" >
                            <!-- style='height:5em;' -->
                            <!-- <re-captcha (resolved)="resolved($event)" siteKey="6LdFJNcZAAAAAI1E_KFVSrbmAyUYIWRdp_Q4ayck"></re-captcha> -->
                            <!-- <re-captcha (resolved)="resolved($event)" siteKey="6LcJQM0ZAAAAAGVMmPWu6tTK4JzCj_TvNXm4gOIy"></re-captcha> -->
                            <!-- <re-captcha size="invisible" (resolved)="resolved($event)" siteKey="6LdNKdcZAAAAAD-Vweo5Fa4AqXJeN8UKknDIQE8z"></re-captcha> -->
        
                            <!-- resolved($event) -->
                            <!-- *ngIf="botsOut" -->
                            <re-captcha  style="visibility: hidden;"
                                #captchaRef="reCaptcha"
                                (resolved)="resolved($event)"
                                siteKey="6LcJQM0ZAAAAAGVMmPWu6tTK4JzCj_TvNXm4gOIy"
                                size="invisible"
                                ></re-captcha>
                                <button *ngIf="botsOut" style="height:3em;font-size:1.5rem;" item-start ion-button outline (click)="captchaRef.execute()">
                                    <i *ngIf="!captchaResponse" class="fa fa-fw fa-check"></i>
                                    <i *ngIf="captchaResponse" class="fas fa-fw fa-redo-alt"></i>
                                    &nbsp;Tap here before booking
                                   </button>
                                   <i *ngIf="botsOut" (click)="onTooltipRecaptcha()" item-start style="color:hsl(139, 59%, 46%); font-size:2rem;" class="fa fa-fw fa-question-circle"></i>
                                   <button *ngIf="botsOut" ion-button clear item-end (click)="onRecaptchaToolTip()" style="height: auto;">
                                    <img style="height:2em; width:auto;" src="assets/img/recaptcha-seeklogo.com.svg">
                                </button>
                                

                       <!-- <button ion-button (click)="captchaRef.reset();captchaRef.execute()"><i class="fas fa-fw fa-redo-alt"></i>Retry</button>   -->
                                                     <!-- <pre>reCAPTCHA response log:
                                {{ captchaResponse || '(empty)' }}</pre> -->
                            
                        </ion-item>
                        <ion-item no-padding  *ngIf="captchaResponse" style="font-size: 1.2rem;">
                            <ion-label text-wrap item-end>Allow club to contact player on booking issue via Phone Number and Email
                            </ion-label>
                            <ion-toggle [disabled]="true" item-start [(ngModel)]="allowClubContactInfo"></ion-toggle>
                        </ion-item>
                    <button class="booking-book-button"  [disabled]="(!captchaResponse && botsOut)" (click)="onBookNow()" *ngIf="teeSlotNew" ion-button full color="gold">BOOK NOW</button>
                    <!-- [disabled]="!captchaResponse" -->
                </span>
                    
                    <!-- </ion-item> -->
                </ion-card>
                </ion-col>
                
                </ion-row>
            </ion-col>
            <ion-col no-padding col-12 col-lg-8 col-xl-8 id="booking-right" *ngIf="!teeSlotNew">
                
                <ion-row col-12 >
            <ion-col no-padding col-12 col-lg-12 col-xl-6>
                <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box"> <!-- players -->
                    <!-- || (teeSlotNew && fromClub) -->
                    <ion-card-header no-padding class="slot-subtitle-box" >
                        <ion-row>
                            <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;">
                                <img style="max-height:1.5em;width:webkit-fill-available"
                                    src="assets/img/booking-item-players.svg" 
                                    (click)="toggleBookingClick(2)"/>
                            </ion-col>
                            <ion-col col-9 style="background-color: white;letter-spacing: 2px;"
                            (click)="toggleBookingClick(2)">
                                Players
                            </ion-col>
                            <ion-col col-1 style="padding-left:0;padding-right:0;">
                                <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                <i *ngIf="checkBookingTabsComplete('2')" class="fa fa-fw fa-check-circle "></i>
                                <i (click)="checkExclamationInfo('2')" *ngIf="!checkBookingTabsComplete('2')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                <!-- </ion-badge> -->
                            </ion-col>
                        </ion-row>
                    </ion-card-header>
                    <ion-card-content class="slot-detail-box" no-padding style="padding-top:0">
                        <!-- *ngIf="grpPlayerDetails"  -->
                        <!-- <div *ngIf="bookingSlot.bookingPlayers && bookingSlot.bookingPlayers.length > 0" > -->

        
                                <ion-item *ngFor="let x of slots;" style="padding-left:0.5rem">
                                    <div class="row">
                                        <div class="column" style="width:20%;" (click)="getContactInfo('player',x)">
                                            <!-- margin-top:1.5rem -->
                                            <!-- style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em" -->
                                            <!-- <img class="player-img"
                                            [src]="getPlayerSlotDetails(x,'image')" onerror="this.src='img/default-user.jpg'"> -->
                                            <img  style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em"
                                        [src]="getPlayerSlotDetails(x,'image')" onerror="this.src='img/default-user.jpg'">
                                        <!-- *ngIf="getPlayerSlotDetails(x,'image')" -->
                                        <!-- <div style="max-width: 4em;height: 4em"
                                         class="circle" *ngIf="getPlayerSlotDetails(x,'image') === null">
                                        <span class="initials">{{getInitials(getPlayerSlotDetails(x,'name'))}}</span>
                                        </div> -->
                                        </div>
                                        <div class="column" style="width:80%">
                                            <div class="row">
                                                <div class="column" style="width:80%;white-space: nowrap;overflow: hidden;">
                                                    <!-- margin-top:1rem -->
                                                    <h2 (click)="getContactInfo('player',x)" style="font-size: medium;font-weight: bold;color: green;">{{getPlayerSlotDetails(x,'name')}} {{getPlayerSlotDetails(x,'id')}}
                                                        <i *ngIf="getPlayerSlotDetails(x,'name')!=='Tap + or enter Mship / myG2u #'" class="fas fa-fw fa-phone"></i></h2>
                                                        <!-- <button class="player-action" clear ion-button style="font-size:1.2em;font-size: medium;font-weight: bold;">
                                                            {{getPlayerSlotDetails(x,'name')}} {{getPlayerSlotDetails(x,'id')}}
                                                        </button> -->
    
                                                        <div class="row" style="white-space: normal; font-size: smaller;
                                                    display: flex;
                                                            flex-direction: row;
                                                            flex-wrap: wrap;">
                                                        <div class="column" style="margin:0; order: 1;flex-basis: auto;padding-right: 1rem; "
                                                        [innerHTML]="getPlayerSlotDetails(x,'discount')">
                                                        </div>
                                                        <div class="column" style="margin:0; order: 3;flex-basis: auto; padding-right: 1rem; "
                                                        *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length > 0" >
                                                         
                                                            <div (click)="onPlayerVoucher(x,'player','voucher')" 
                                                            style="color:red;">
                                                                <!-- <i class="fa fa-fw fa-tags"></i>&nbsp;{{getPlayerVoucherApplied(x)?getPlayerVoucherApplied(x).length:'No'}} voucher(s) applied -->
                                                                <span *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length>0"><i class="fa fa-fw fa-tags"></i>&nbsp;{{getPlayerVoucherApplied(x,'name')}}</span>
                                                           </div>
                                                        </div>
                                                        <!-- <div class="column" style="margin:0; order: 3;flex-grow: 1;flex-basis: auto;" item-end>
                                                            <div> Term Discount</div>
                                                        </div> -->
                                                        <div *ngIf="getPlayerCardsApplied(x) && getPlayerCardsApplied(x).length > 0" class="column" (click)="onPlayerVoucher(x,'player','discount')"
                                                          style="color:#387ef5; margin:0;  order: 2;flex-basis: auto;padding-right: 1rem;" >
                                                        
                                                        <i class="far fa-fw fa-credit-card"></i>&nbsp;{{getPlayerDiscountName(x)?getPlayerDiscountName(x):'No discount(s) applied'}}
                                                        </div>
                                                    </div>
                                                    <div *ngIf="0" class="row" style="white-space: normal; font-size: smaller">
                                                        <div class="column" item-start  style="margin:0; min-width:50%; width: auto">
                                                            <!-- width:50% -->
                                                            <div class="row" style="margin:0">
                                                                <div class="column" style="margin:0" item-start [innerHTML]="getPlayerSlotDetails(x,'discount')"></div>
                                                                <div class="column" style="margin:0" *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length > 0">
                                                                    <div (click)="onPlayerVoucher(x,'club','voucher')" 
                                                                    style="color:red;">
                                                                        <!-- <i class="fa fa-fw fa-tags"></i>&nbsp;{{getPlayerVoucherApplied(x)?getPlayerVoucherApplied(x).length:'No'}} voucher(s) applied -->
                                                                        <span *ngIf="getPlayerVoucherApplied(x) && getPlayerVoucherApplied(x).length>0"><i class="fa fa-fw fa-tags"></i>&nbsp;{{getPlayerVoucherApplied(x,'name')}}</span>
                                                                   </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="column" (click)="onPlayerVoucher(x,'club','discount')"  item-end style="color:#387ef5; margin:0; width:50%" 
                                                        *ngIf="getPlayerCardsApplied(x) && getPlayerCardsApplied(x).length > 0">
                                                        <i class="far fa-fw fa-credit-card"></i>&nbsp;{{getPlayerDiscountName(x)}}
                                                        </div>
                                                    </div>

                                                    <span *ngIf="!slotFilled(x)" style="display:inline-flex;">
                                                        <!-- 8em; -->
                                                        <input (keyup.enter)="searchBookingPlayer(x)" class="input-club-no" placeholder="Club Mship No." type="text" [disabled]="searchById[x] && searchById[x] > 0 || isBookingCancel()" [(ngModel)]="searchByMembership[x]"/> 
                                                        <!-- style="width:12rem;height:2em;margin-right:2px" -->
                                                        <input (keyup.enter)="searchBookingPlayer(x)" class="input-mg2u-no" type="number" placeholder="mg2u ID" [disabled]="searchByMembership[x] && searchByMembership[x].length > 0 || isBookingCancel()" [(ngModel)]="searchById[x]"/>
                                                        <!-- style="width:7rem;height:2em;margin-right:2px" -->
                                                        <!-- 5em -->
                                                    <button *ngIf="!slotFilled(x)" class="player-action" (click)="clearSearchPlayer(x)" ion-button clear >
                                                                <i style="color:grey" class="fa fa-fw fa-times-circle "></i>
                                                            </button>
                                                        </span>

                                                </div>
                                                <div class="column" style="width:20%;text-align:center" *ngIf="bookingType!=='past'">
                                                        <!-- <button class="player-action" *ngIf="slotFilled(x)" ion-button clear style="font-size:1.2em">
                                                                <i class="fas fa-pen"></i>
                                                            </button>
                                                            <button class="player-action" *ngIf="slotFilled(x)" ion-button clear style="font-size:1.2em">
                                                                <i class="fas fa-user-cog"></i>
                                                            </button> -->
                                                            <!-- && (slot === 2 || slotFilled(x - 1)) -->
                                                            

                                                            <button class="player-action" *ngIf="slotFilled(x)" (click)="onDeleteBookingPlayer(x)" clear ion-button>
                                                                <i style="color:gray" class="fa fa-fw fa-times-circle "></i>
                                                            </button><br *ngIf="slotFilled(x)" />
                                                                
                                                            <button class="player-action" *ngIf="slotFilled(x) && fromClub" (click)="onPlayerVoucher(x,'club','voucher')" clear ion-button>
                                                                <i style="color:red" class="fa fa-fw fa-tags "></i>
                                                            </button>
                                                            
                                                            <button class="player-action" *ngIf="!slotFilled(x) " (click)="onPlayerSelect(x)" clear ion-button>
                                                                    <i class="fas fa-fw fa-plus-circle"></i>
                                                                </button><br *ngIf="!slotFilled(x)" />
                                                                <button class="player-action" *ngIf="!slotFilled(x)" (click)="searchBookingPlayer(x)"  clear ion-button>
                                                                    <i class="fas fa-fw fa-search"></i>
                                                                </button>

                                                            
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                        <!-- <div class="" -->
                                    </ion-item>
                            <!-- </div> -->
                            
                                
        
                        <ion-item *ngIf="bookingType!=='past' && bookingSlot.bookingStatus !== 'PaymentFull' && !fromClub">
                            <button *ngIf="!groupSelected" (click)="onGetFlightClick()" ion-button clear item-left>
                                    <i class="fas fa-fw fa-heart"></i>Select Group</button>
                            <button *ngIf="canSaveFlight()" (click)="onSaveFlightClick()" ion-button clear item-left>
                                <i class="fas fa-fw fa-heart"></i>Save Group</button>
                            <!-- <button *ngIf="bookingSlot.bookingPlayers.length < 4" (click)="onPlayerSelect(p)" ion-button clear item-right style="font-size:1.5em"><i
                                    class="fas fa-fw fa-plus-circle"></i>Golfer</button> -->
                        </ion-item>
                        <ion-item *ngIf="bookingType!=='past' && fromClub">
                            <button *ngIf="!groupSelected" (click)="onManageVoucher()" ion-button clear item-left>
                                    <i class="fas fa-fw fa-tags"></i>&nbsp;Manage Vouchers</button>
                                    <button *ngIf="bookingItemBill && bookingItemBill.totalPayment > 0" (click)="onRefundClick()" ion-button clear item-right>
                                        <!-- bookingSlot.bookingStatus === 'PaymentFull' || bookingSlot.bookingStatus === 'PaymentPartial' -->
                                            <!-- <i class="fas fa-fw fa-tags"></i> -->
                                            <i class="fas fa-comments-dollar"></i>&nbsp;Refund/Adjustment</button>
                        </ion-item>
                    
                    </ion-card-content>
                </ion-card>
            </ion-col>
                <ion-col no-padding col-12 col-lg-12 col-xl-6>
                    <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box">
                        <ion-card-header no-padding class="slot-subtitle-box" >
                            <ion-row>
                                <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(3)">
                                    <img style="max-height:1.5em;width:webkit-fill-available"
                                        src="assets/img/booking-item-buggy.svg" />
                                </ion-col>
                                <ion-col col-9 style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(3)">
                                    Buggy & Caddie Pairing
                                </ion-col>
                                <ion-col col-1 style="padding-left:0;padding-right:0;">
                                    <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                    <i *ngIf="checkBookingTabsComplete('3')" class="fa fa-fw fa-check-circle "></i>
                                    <i (click)="checkExclamationInfo('3')" *ngIf="!checkBookingTabsComplete('3')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                    <!-- </ion-badge> -->
                                </ion-col>
                            </ion-row>
                        </ion-card-header>
                        <ion-card-content  class="slot-detail-box" no-padding>
                            <!-- *ngIf="grpAdditionals" -->
                            <ion-item no-padding *ngIf="!closeAdditionalNotice" style="padding-bottom: 1rem;">
                                <div class="row">
                                    <div class="column" style="width:20%">
                                        <img src="assets/img/booking-item-covid.svg" style="float:left;width: 3rem;margin: 0.5em;" />
                                    </div>
                                    <div class="column" style="width:70%">
                                        <h4 style="color:red;white-space: normal;">COVID-19. Some governments recommend that all players should include their
                                            addresses for contact tracing</h4>
                                    </div>
                                    <div class="column" style="width:10%">
                                        <button color="danger" no-padding (click)="closeAdditionalNotice = true" ion-button clear><i class="fa fa-times"></i></button>
                                    </div> 
                                </div>
                                
                                <!-- <h3 style="color:red">COVID-19 Important Notice</h3> -->
                                
                                
                            </ion-item>
                            <ion-grid style="text-align: -webkit-center;" no-padding >
                                <ion-row no-padding *ngIf="bookingType!=='past'" style="text-align: center;">
                                    <ion-col no-padding><h2>Buggies</h2></ion-col>
                                        <ion-col no-padding><h2>Caddies</h2></ion-col>
                                </ion-row>
                                <ion-row  style="text-align: center;">
                                        <ion-col>
                                            <!-- <button class="button-subtract" outline color="danger" (click)="addBuggy(-1)" small ion-button item-right> -->
                                            <button class="button-subtract" clear icon-only color="danger" (click)="addBuggy(-1)" ion-button item-right>
                                                <!-- <i style="font-size:large" class="fas fa-minus"></i> -->
                                            <img src="assets/img/button-minus.svg" />
                                            </button>
                                                        <button class="button-value" outline ion-button item-right>{{buggyReq}}</button>
                                                        
                                                        <!-- <button class="button-add" outline (click)="addBuggy(1)" small ion-button item-right> -->
                                                        <button class="button-add" clear icon-only (click)="addBuggy(1)" ion-button item-right>
                                                            <!-- <i style="font-size:large" class="fas fa-plus"></i> -->
                                                            <img src="assets/img/button-plus.svg" /> 
                                                        </button>
                                                    </ion-col>    
                                                        <ion-col>
                                                            <button class="button-subtract" clear icon-only color="danger" (click)="addCaddy(-1)" ion-button item-right>
                                                                <!-- <i style="font-size:large" class="fas fa-minus"></i> -->
                                                                <img src="assets/img/button-minus.svg" />
                                                            </button>
                                                            <button class="button-value" outline ion-button item-right>{{caddyReq}}</button>
                                                            <button class="button-add"  clear icon-only (click)="addCaddy(1)" ion-button item-right>
                                                                <!-- <i style="font-size:large" class="fas fa-plus"></i> -->
                                                                <img src="assets/img/button-plus.svg" /> 
                                                            </button>
                                                        </ion-col>
                                                              
                                        </ion-row>
                            </ion-grid>
                            
                            <ion-row no-padding *ngIf="hasPreferenceChanges()">
                                <ion-col col-3 no-padding>
                                    <button no-margin item-start ion-button block (click)="onResetPreference()">
                                        <i class="fas fa-fw fa-undo"></i>&nbsp;Reset
                                    </button>
                                </ion-col>
                                <ion-col col-9 no-padding>
                                    <button no-margin item-end ion-button block color="danger" (click)="onUpdatePreference()">
                                        <i class="fas fa-fw fa-save"></i>&nbsp;Update
                                    </button>
                                </ion-col>
                            </ion-row>
                            <ion-list>
                                <ion-list-header *ngIf="bookingPlayers && bookingPlayers.length > 0">Seatings</ion-list-header>
                                <ion-item   *ngFor="let x of bookingSlot.bookingPlayers; let i = index" style="padding-left:0.5em;padding-top:1rem">
                                        <div class="row" (click)="expandDetails(i,'toggle')">
                                            <!-- (click)="expandDetails(i,'toggle')" -->
                                            <div class="column" style="width:20%">
                                                <!-- class="player-img" -->
                                                <!-- style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em;" -->
                                                <img style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em;"
                                                
                                                    [src]="getPlayerSlotDetails(i+1,'image')" onerror="this.src='img/default-user.jpg'">
                                                    <!-- x.player && x.player.image?x.player.image:'' -->
                                            </div>
                                            <div class="column" style="width:80%">
                                                <div class="row">
                                                    <div class="column" style="width:80%;white-space: nowrap;
                                                    overflow: hidden;">
                                                        <h2 style="font-size: medium;font-weight: bold;color: green;">{{getPlayerSlotDetails(i+1,'name')}} {{getPlayerSlotDetails(i+1,'id')}}</h2>
                                                    </div>
                                                </div>
                                                <!-- <div *ngIf="!checkBuggyCaddyInfo(i)"  class="row">
                                                    <div class="column" style="width:80%">
                                                        Tap here for more options
                                                    </div>
                                                    <div  class="column"  style="width:20%;text-align:center">
                                                            <i style="font-size:1.4em;color:#30bb5b" class="fas fa-2x fa-fw fa-cog"></i>
                                                    </div>
                                                </div> -->
                                                <!-- *ngIf="checkBuggyCaddyInfo(i)" -->
                                                <div  class="row" style="margin-top:0.5rem">
                                                    <!-- (click)="setBuggySeating(i,$event)" -->
                                                    <div class="column" style="width:25%;text-align: left;">
                                                        <!-- <ion-avatar item-left> -->
                                                            <span *ngIf="x.pairingNo === 0" class="pairing-number"><i style="font-size: large;color:#1b6a34" class="fas fa-fw fa-walking"></i>Walk</span>
                                                                <!-- <img *ngIf="!x.pairingNo" item-left style="width: 2.6em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy-black.svg"> -->
                                                                <!-- <img *ngIf="x.pairingNo > 0" item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy-green-16x16.svg"> -->
                                                                
                                                                <img *ngIf="x.pairingNo > 0" item-left style="width: 3rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy-new.svg">
                                                        <!-- </ion-avatar> -->
                                                            &nbsp;<span class="pairing-number">{{x.pairingNo?'#'+x.pairingNo:''}}</span>
                                                            <!-- {{buggySlots.buggySlot?buggySlots[i].buggySlot:''}} -->
                                                    </div>
                                                    <!-- (click)="selectCaddy(i)" -->
                                                    <div class="column" style="width:25%;text-align: left;">
                                                        <!-- <ion-thumbnail item-left> -->
                                                                <img style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-caddie_.svg">
                                                                <!-- <img style="width: 0.8em;float:left;object-fit: cover;margin:0" src="assets/img/icon-caddie_.svg"> -->
                                                                <!-- margin-left:0.5em;margin-right:0.5em -->
                                                        <!-- </ion-thumbnail> -->
                                                        &nbsp;<span class="pairing-number">{{getCaddyPreferred(i)}}</span>
                                                        <!-- {{x.caddyPreferred.}} -->
                                                    </div>
                                                    <!-- (click)="setPlayerDriving(i,x)"  -->
                                                    <div class="column" style="width:25%;text-align: left;">
                                                        <!-- <div>Icons made by <a href="https://www.flaticon.com/authors/surang" title="surang">surang</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
                                                                    <!-- <img item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icons/icon-steering-wheel.svg"> -->
                                                                    <img item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icon-steering-wheel-new.svg">
                                                            
                                                                &nbsp;<span class="pairing-number">{{getPlayerDriving(i)}}</span>
                                                        </div>
                                                        <div class="column" class="player-action" *ngIf="0 === 1 && slotFilled(i+1)" (click)="goUpdatePlayerContact(x)" style="width:15%;text-align:right">
                                                                <img style="width: 2.5rem;float:left;object-fit: cover;margin:0" *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-bubble-exclamation.svg" />
                                                                <img style="width: 2.5rem;float:left;object-fit: cover;margin:0" *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-like.svg" />
                                                           
                                                </div>
                                                <div  class="column"  style="width:25%;text-align:center">
                                                    <!-- <button ion-button clear item-right (click)="expandDetails(i)"> -->
                                                        <i style="font-size:1.4em;color:#30bb5b" class="fas fa-2x fa-fw fa-cog"></i>
                                                    <!-- </button> -->
                                                    <!-- <i style="font-size:1.4em;" *ngIf="!expandPlayers[i]" class="fa fa-fw fa-chevron-circle-right"></i>
                                                    <i style="font-size:1.4em;" *ngIf="expandPlayers[i]" class="fa fa-fw fa-chevron-circle-down"></i> -->
                                                    <!-- <i style="font-size:1.4em;color:#1b6a34" class="fas fa-2x fa-fw fa-cog"></i> -->
                                                    <!-- <i style="font-size:1.4em;" *ngIf="!expandPlayers[i]" class="fa fa-fw fa-caret-right"></i>
                                                    <i style="font-size:1.4em;" *ngIf="expandPlayers[i]" class="fa fa-fw fa-caret-down"></i> -->
                                                </div>
                                                </div>
                                                <div *ngIf="x && (x.caddyPreferred || x.caddyAssigned)" class="row">
                                                    <div class="column">
                                                        <!-- Caddy Booked : {{getCaddyPreferred(i,'slot_pairing')}} {{getCaddyPreferred(i,'slot_pairing_id')}} -->
                                                        <span *ngIf="x.caddyPreferred"> Caddy Preferred : {{getCaddyPreferred(i,'name')}}</span><br *ngIf="x.caddyPreferred && x.caddyAssigned">
                                                        <!-- getCaddyPreferred(i,'name')!=='Select Favourite Caddy' -->
                                                        <span *ngIf="x.caddyAssigned"> Caddy Assigned : {{getCaddyAssigned(i,'name')}}</span>
                                                        <!-- getCaddyAssigned(i,'has') -->
                                                        <!-- {{getCaddyPreferred(i,'pairing')}}  -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="row" #expandHeader *ngIf="expandPlayers[i]">
                                            
                                        </div> -->
                                        <div id="expandRow" *ngIf="expandPlayers[i]">
                                            <ion-item class="row">
                                            <h3>Options for {{getPlayerSlotDetails(i+1,'name')}}</h3>
                                            <button (click)="onNewClearPlayerDetails(i)" clear ion-button item-right>Clear</button> 
                                            <!-- (click)="onClearPlayerDetails(i)" -->
                                            <button (click)="expandPlayers[i] = false" clear ion-button item-right>Close</button>
                                    </ion-item>
                                        <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                            <!-- "width:30%" -->
                                            <div class="column" style="width:30%">
                                                Buggy Seating
                                            </div>
                                            <div  class="column" style="width:50%">
                                                <button [disabled]="bookingType==='past'" ion-button outline small style="white-space: normal;" (click)="newSetBuggySeating(i,$event)">
                                            <strong>{{getBuggySlotDisplay(i)}}</strong>
                                            </button>
                                        </div>
                                        <div class="column" style="width:20%">
                                            <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newClearPreference(i,'buggyPairing')">
                                                <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                                <i class="fas fa-minus"></i>
                                            </button>
                                        </div>
                                        </div>
                                        <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                            <div class="column" style="width:30%;">
                                                        <!-- <img item-left style="width: 2.5rem;float:left;object-fit: cover;margin:0" src="assets/img/icons/icon-steering-wheel.svg"> -->
                                                        Driver ?
                                                        
                                            </div>
                                            <div  class="column" style="width:50%">
                                                <button [disabled]="bookingType==='past'" (click)="newSetPlayerDriving(i,x)" ion-button outline small style="white-space: normal;"  >
                                                    
                                                    <i *ngIf="getPlayerDriving(i)==='Yes'" class="fa fa-fw fa-check "></i>
                                                        <i *ngIf="getPlayerDriving(i)==='No'" class="fa fa-fw fa-times "></i>
                                                            &nbsp;<strong>{{getPlayerDriving(i)}}</strong>
                                                    </button>
                                        </div>
                                        <div class="column" style="width:20%">
                                            <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newClearPreference(i,'playerDriving')">
                                                <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                                <i class="fas fa-minus"></i>
                                            </button>
                                        </div>
                                            <!-- <ion-label>Driver?&nbsp;&nbsp;<span style="color:green">{{playerDriving[i]?"Me":"Other"}}</span></ion-label>
                                            <div class="column" style="width:30%">
                                                <ion-label>Driver ?</ion-label>
                                            </div>
                                            <div class="column" style="width:70%">
                                                <ion-segment item-right no-padding [(ngModel)]='playerDriving[i]' >
                                                
                                                    <ion-segment-button value="me" (click)="togglePlayerDriving(i,x,1)">
                                                        Me
                                                    </ion-segment-button>
                                                    <ion-segment-button value="other" (click)="togglePlayerDriving(i,x,2)">
                                                        Other
                                                    </ion-segment-button>
                                                </ion-segment>
                                        </div> -->
                                        </div>
                                        
                                        <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                            <div class="column" style="width:30%">
                                                <!-- <img item-left style="width: 2em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy.svg"> -->
                                                Caddy Pairing
                                            </div>
                                            <div  class="column" style="width:50%">
                                                <button [disabled]="bookingType==='past'" ion-button  outline small style="white-space: normal;" (click)="newSetCaddyPairing(i,$event)">
                                                <strong>{{getCaddyPreferred(i,'pairing')}}</strong>
                                                </button>
                                        </div>
                                        <div class="column" style="width:20%">
                                            <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newClearPreference(i,'caddyPairing')">
                                                <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                                <i class="fas fa-minus"></i>
                                            </button>
                                        </div>
                                        
                                        
                                        </div>
                                        <div class="row" style="margin-left: 1.5rem;margin-top: 1rem;">
                                            <div class="column" style="width:30%;overflow: auto;
                                            white-space: normal;">
                                                <!-- <img item-left style="width: 2em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy.svg"> -->
                                               Favourite Caddy?
                                               <!-- <br>
                                                <button *ngIf="x.caddyPreferred || x.caddySelectionCriteria.gender" ion-button  clear small style="white-space: normal;">
                                                    <strong style="color:red">+ RM 50</strong>
                                                    </button> -->
                                            </div>
                                            <!-- <div class="column" style="width:20%">
                                                <button (click)="setCaddySlot(i,x.caddyPairing)" item-right ion-button outline>
                                                    <i class="fa fa-user-check"></i>
                                                </button
                                                ></div> -->
                                            <div class="column" style="width:50%" >
                                                <!-- || (!fromClub && !bookingOptions.allowCaddiePreference) -->
                                                <button [disabled]="bookingType==='past'" ion-button outline small style="white-space: normal;" (click)="onNewSelectCaddy(i,x.caddyPairing)">
                                                <strong>{{getCaddyPreferred(i,'name')}} </strong>
                                                </button>
                                                
                                        </div>
                                        <div class="column" style="width:20%">
                                            <button [disabled]="bookingType==='past'" color="danger" ion-button outline small (click)="newRemoveCaddy(i,x.caddyPairing)">
                                                <!-- (click)="removeCaddyPairing(x.caddyPairing,i)" -->
                                                <i class="fa fa-user-times"></i>
                                            </button>
                                        </div>
                                        
                                        </div>
                                        <div class="row" style="margin-left: 1.5rem;">
                                            <div class="column" >
                                                <button ion-button color="danger" clear small style="white-space: normal;font-size:medium">
                                                    Note: Caddies/Buggies will only be confirmed during payment.
                                                </button>
                                                
                                            </div>
                                        </div>
                                        <div class="row" (click)="goUpdatePlayerContact(x)" style="margin-left: 1.5rem;">
                                            <!-- 85% -->
                                            <div class="column" style="width:85%;overflow: auto;
                                            white-space: normal;">
                                                <h4 *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')">You have not entered your phone number or address as per some government regulations. Tap to add</h4>
                                                <h4 *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')">You have entered your phone number or address as per some government regulations. Tap to edit</h4>
                                        </div>
                                        <div class="column" style="width:15%;"> 
                                                <!-- <img item-left style="width: 2em;float:left;object-fit: cover;margin:0" src="assets/img/icon-buggy.svg"> -->
                                                <img style="width: 1.5em;float:left;object-fit: cover;margin:5px;" *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-bubble-exclamation.svg" />
                                                <img style="width: 1.5em;float:left;object-fit: cover;margin:5px;" *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-like.svg" />
                                            </div>
                                        </div>
                                        
                                        <!-- <ion-row no-padding *ngIf="hasPreferenceChanges(i)">
                                            <ion-col col-3 no-padding>
                                                <button no-margin item-start ion-button block (click)="onResetPreference()">
                                                    <i class="fas fa-fw fa-undo"></i>&nbsp;Reset
                                                </button>
                                            </ion-col>
                                            <ion-col col-9 no-padding>
                                                <button no-margin item-end ion-button block color="danger" (click)="onUpdatePreference()">
                                                    <i class="fas fa-fw fa-save"></i>&nbsp;Update
                                                </button>
                                            </ion-col>
                                        </ion-row> -->
                                        
                                        
                                            
                                            <!-- <div class="column" style="width:20%">
                                                <img style="width: 1.5em;float:left;object-fit: cover;margin:0" *ngIf="!getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-exclamation-bubble.svg" />
                                                <img style="width: 1.5em;float:left;object-fit: cover;margin:0" *ngIf="getPlayerSlotDetails(i+1,'isContactComplete')" src="assets/img/icon-like.svg" />
                                            </div> -->
                                        </div>
                                    </ion-item>
                            </ion-list>
                        </ion-card-content>
                        <ion-row no-padding *ngIf="hasPreferenceChanges()">
                            <ion-col col-3 no-padding>
                                <button no-margin item-start ion-button block (click)="onResetPreference()">
                                    <i class="fas fa-fw fa-undo"></i>&nbsp;Reset
                                </button>
                            </ion-col>
                            <ion-col col-9 no-padding>
                                <button no-margin item-end ion-button block color="danger" (click)="onUpdatePreference()">
                                    <i class="fas fa-fw fa-save"></i>&nbsp;Update
                                </button>
                            </ion-col>
                        </ion-row>
                    </ion-card>
                </ion-col>
                <ion-col no-padding col-6 *ngIf="0">
                    <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box">
                        <!-- (click)="toggleBookingClick(4)" -->
                    <ion-card-header no-padding class="slot-subtitle-box" >
                        <ion-row>
                                <!-- #DDF6D6 -->
                            <ion-col col-2 style="background-color: grey;padding:0.5em;">
                                <img style="max-height:1.5em;width:webkit-fill-available"
                                    src="assets/img/booking-item-food.svg" />
                            </ion-col>
                            <ion-col col-9 style="background-color: white;letter-spacing: 2px;">
                                <span style="font-style:italic;font-size: 0.8em">Food Ordering (<i class="fas fa-bullhorn"></i>coming soon)</span>
                            </ion-col>
                            <ion-col col-1 style="padding-left:0;padding-right:0;">
                                <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                <!-- <i style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i> -->
                                <!-- </ion-badge> -->
                            </ion-col>
                        </ion-row>
                    </ion-card-header>
                    <ion-card-content *ngIf="grpFood" class="slot-detail-box">
                        <!-- <ion-list no-padding> -->
                            <!-- (click)="onActiveBookingClick()" -->
                        <ion-item *ngFor="let x of [1,2,3]" style="padding:0" >
                            <ion-row no-padding
                                style="border-color:#1b6a34;background-color: #DDF6D6;font-size:0.8em;border-style:solid;border-width:thin;border-radius:0.5em;border-bottom-right-radius: 0;border-bottom-left-radius: 0;">
                                <ion-col style="text-align:left;color:#1b6a34;">02:45 PM</ion-col>
                                <ion-col style="text-align:center">Wed, 22 May 2020</ion-col>
                                <ion-col style="text-align:right;color:#1b6a34;">Ref #21492</ion-col>
                            </ion-row>
                            <ion-row no-padding
                                style="border-color:#1b6a34;border-style:solid;border-width:thin;border-radius:0.5em;border-top-right-radius: 0;border-top-left-radius: 0;">
                                <ion-col no-padding>
                                    <img style="width: 4em;float:left;object-fit: cover;" src="img/course-default.png'"
                                        onerror="this.src='img/course-default.png'">
                                    <h3 style="color:#1b6a34;white-space:nowrap;overflow:hidden;text-overflow: ellipsis;">Tasik
                                        Puteri Golf & Country Club</h3>
                                    <p>Booking By: <span style="color:#1b6a34;">Fazel</span></p>
                                </ion-col>
                                <ion-col col-3
                                    style="text-align:center;border-color:#1b6a34;border-left-style:solid;border-left-width:thin">
                                    Total<br>
                                    <span style="color:#1b6a34;">RM 240</span></ion-col>
                            </ion-row>
                        </ion-item>
                        <!-- </ion-list> -->
                    </ion-card-content>
                </ion-card>
                
                </ion-col>
                <ion-col no-padding col-12>
                    <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box"> <!-- payment-->
                        <ion-card-header no-padding class="slot-subtitle-box" >
                            <ion-row>
                                <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(5)">
                                    <img style="max-height:1.5em;width:webkit-fill-available"
                                        src="assets/img/booking-item-payment.svg" />
                                </ion-col>
                                <ion-col col-7 style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(5)">
                                    Bills & Payments
                                </ion-col>
                                <ion-col col-3 style="padding-left:0;text-align:right">
                                    <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                    <!-- <i style="color:red" class="fa fa-fw fa-times-circle "></i> -->
                                    <i (click)="getBookingItemizedBill(false);recalculateBookingPricing()" class="fas fa-fw fa-sync"></i>
                                    <i *ngIf="checkBookingTabsComplete('5')" class="fa fa-fw fa-check-circle "></i>
                                    <i (click)="checkOverpaymentInfo()" *ngIf="checkOverpayment()" style="color:orange" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                    <i (click)="checkExclamationInfo('5')" *ngIf="!checkBookingTabsComplete('5')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                    <!-- style="color:red" -->
                                    <!-- </ion-badge -->
                                </ion-col>
                            </ion-row>
                        </ion-card-header>
                        <ion-card-content class="slot-detail-box">
                            <ion-list *ngIf="refresherBill">
                                <ion-item style="text-align:center">
                                    <i class="fas fa-sync fa-spin"></i>
                                </ion-item>
                            </ion-list>
                            <ion-item *ngIf="!refresherBill && !bookingItemBill" (click)="getBookingItemizedBill(false)">
                                Error getting Itemized Bill. Tap here to refresh.
                            </ion-item>
                            <ng-container 
                            *ngIf="!refresherBill && 
                            ((bookingItemBill && bookingItemBill.billItems && bookingItemBill.billItems.length > 0) ||
                            (bookingSlot.bookingStatus === 'CancelledByClub' || bookingSlot.bookingStatus === 'CancelledByPlayer'))">
                            <!-- <ion-list no-padding> -->
                                <div *ngIf="bookingItemBill && bookingItemBill.billItems && bookingItemBill.billItems.length > 0" class="row">
                                    <div class="column bill-description bill-header">Description</div>
                                    <div class="column bill-rate bill-header">Rate</div>
                                    <div class="column bill-quantity bill-header">Qty</div>
                                    <div class="column bill-price bill-header">Price</div>
                                </div>
                                <!-- <ion-scroll scrollY="true"> -->
                                <ng-container *ngIf="bookingItemBill && bookingItemBill.billItems && bookingItemBill.billItems.length > 0">
                                <div *ngFor="let item of bookingItemBill.billItems; let billIdx = index">
                                    <div class="row" *ngIf="item.itemPrice">
                                        <!-- *ngIf="item.unitPrice && item.itemCount" -->
                                        <div class="column bill-description">{{item.itemName}}</div>
                                        <div class="column bill-rate"><span  *ngIf="item.unitPrice">{{item.unitPrice | number: '1.2-2'}}</span></div>
                                        <div class="column bill-quantity" ><span *ngIf="item.itemCount">{{item.itemCount}}</span></div>
                                        <div class="column bill-price">{{item.itemPrice | number: '1.2-2'}}</div>
                                    </div>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="bookingItemBill && bookingItemBill.discounts && bookingItemBill.discounts.length > 0">
                                <div class="row" *ngFor="let discount of bookingItemBill.discounts; let billIdx = index">
                                    <div *ngIf="discount.amount > 0" class="column bill-discount">{{discount.name}}</div>
                                    <!-- <div class="column bill-rate">
                                    </div>
                                    <div class="column bill-quantity">
                                    </div> -->
                                    <div *ngIf="discount.amount > 0" class="column bill-price">-{{discount.amount | number: '1.2-2'}}</div>
                                </div>
                            </ng-container>
                
                            <hr *ngIf="bookingItemBill && bookingItemBill.billItems" style="background-color: black;">
                            <ng-container *ngIf="getBookingDetails('price')>0">
                                <!-- *ngIf="bookingItemBill && bookingItemBill.billItems.length > 0" -->
                                <!-- border-top-width: thin;border-top-style: solid; -->
                                <div class="row" style="font-size: medium;">
                                    <div class="column bill-description" style="width: 40%; white-space: nowrap;"><b>Net Chargeable Amount</b></div>
                                    <!-- <div class="column bill-rate">&nbsp;</div> -->
                                    <!-- <div class="column bill-quantity">&nbsp;</div> -->
                                    <div class="column bill-price" style="width: 60%; white-space: nowrap; text-align: right;">
                                        <b>{{getBookingDetails('currency')}} {{getBookingDetails('price')  | number: '1.2-2'}}</b>
                                    </div>
                                </div>
                            </ng-container>
                        <!-- </ion-scroll> -->
                                <!-- <div class="row">
                                    <div class="column bill-description">Green Fees</div>
                                    <div class="column bill-rate">200</div>
                                    <div class="column bill-quantity">4</div>
                                    <div class="column bill-price">800.00</div>
                                </div>
                                <div class="row">
                                    <div class="column bill-description">Buggy Fees</div>
                                    <div class="column bill-rate">60</div>
                                    <div class="column bill-quantity">2</div>
                                    <div class="column bill-price">120.00</div>
                                </div>
                                <div class="row">
                                    <div class="column bill-description">Caddie Fees</div>
                                    <div class="column bill-rate">75</div>
                                    <div class="column bill-quantity">2</div>
                                    <div class="column bill-price">150.00</div>
                                </div>
                                <div class="row">
                                    <div class="column bill-description">Caddie Booking</div>
                                    <div class="column bill-rate">50</div>
                                    <div class="column bill-quantity">1</div>
                                    <div class="column bill-price">50.00</div>
                                </div><br>
                                <div class="row">
                                    <div class="column bill-description">Government Tax (SST)</div>
                                    <div class="column bill-rate">6%</div>
                                    <div class="column bill-quantity">&nbsp;</div>
                                    <div class="column bill-price">67.20</div>
                                </div><br> -->
                                <br>
                                
                                <div *ngIf="bookingItemBill && bookingItemBill.totalPayment > 0  && bookingItemBill.balance !== 0" class="row" 
                                    style="color:#30bb5b;font-weight:bold;font-size:2rem;">
                                    <!-- && bookingItemBill.totalPayment < bookingItemBill.totalPayable -->
                                    <div class="column" style="width:50%">
                                        Paid amount
                                    </div>
                                    <div class="column" style="width:50%; text-align: right;">
                                        {{bookingSlot.slotAssigned.currency.symbol}} {{getBookingPayment()}}<!--a-->
                                        <!-- | number :'1.2-2' -->
                                    </div>
                                    </div>
                                    <!-- <span style="color:#30bb5b" *ngIf="hasRedeemedAmount()">(Redeemed {{bookingSlot.slotAssigned.currency.symbol}} {{getTotalRedeemAmount()}})</span> -->


                                <div *ngIf="bookingItemBill" class="row" style="font-weight:bold;font-size:2rem;">
                                    <!-- *ngIf="bookingSlot.amountPayable !== (bookingSlot.amountPaid + bookingSlot.totalDeductions)"  -->
                                    
                                    <div class="column bill-description" style="width:50%">
                                        <!-- <span style="color:red;" *ngIf="bookingItemBill.totalPayment === 0 && bookingItemBill && bookingItemBill.balance > 0">Total amount</span>  -->
                                        <span style="color:#30bb5b" *ngIf="bookingItemBill.totalPayment > 0   && bookingItemBill.balance !== 0 && hasRedeemedAmount()">(Redeemed {{bookingSlot.slotAssigned.currency.symbol}} {{getTotalRedeemAmount()}})</span>
                                        <span style="color:red;" *ngIf="bookingItemBill.totalPayment > 0 && bookingItemBill && bookingItemBill.balance > 0"><br *ngIf="hasRedeemedAmount()">Remaining Amount</span>
                                        <span style="color:#30bb5b" *ngIf="bookingItemBill.totalPayment > 0 && bookingItemBill.balance === 0">Paid Amount</span>
                                        <span style="color:#30bb5b" *ngIf="bookingItemBill.totalPayment > 0 && bookingItemBill.balance === 0 && hasRedeemedAmount()">(Redeemed {{bookingSlot.slotAssigned.currency.symbol}} {{getTotalRedeemAmount()}})</span>
                                    </div>
                                    <!-- <div class="column bill-rate">&nbsp;</div> -->
                                    <!-- <div class="column bill-quantity">&nbsp;</div> -->
                                    <div class="column bill-price" style="width:50%">
                                        
                                        <br *ngIf="bookingItemBill.totalPayment > 0   && bookingItemBill.balance !== 0 && hasRedeemedAmount()">
                                        <span style="color:#30bb5b;" *ngIf="bookingItemBill.totalAmount > 0 && bookingItemBill.balance === 0; else needPay">
                                        
                                            <!--                             *ngIf="bookingItemBill.totalAmount&&bookingItemBill&&(bookingSlot.amountPayable === bookingSlot.amountPaid); 
                                        else needPay" -->
                                            {{bookingSlot.slotAssigned.currency.symbol}} {{bookingItemBill && bookingItemBill.totalPayment?getBookingPayment():0  }}<!--a-->
                                            <!-- | number :'1.2-2' -->
                                            <!-- {{getBookingTotalAmount() | number :'1.2-2'}} -->
                                        </span>
                                        <br *ngIf="bookingItemBill.totalPayment > 0   && bookingItemBill.balance === 0 && hasRedeemedAmount()">

                                        <ng-template #needPay>
                                        <span style="color:red;" *ngIf="(bookingItemBill.totalPayment > 0 && bookingItemBill && bookingItemBill.balance > 0) 
                                            || (bookingItemBill.totalPayment > 0 && bookingItemBill && bookingItemBill.balance > 0)">
                                            {{bookingSlot.slotAssigned.currency.symbol}} {{bookingItemBill && bookingItemBill.balance?getBookingBalance():0  }}<!--a-->
                                            <!-- | number :'1.2-2' -->
                                        </span>
                                    </ng-template>
                                        <!-- <span *ngIf=""> {{bookingItemBill.totalAmount | number :'1.2-2'}}</span> -->
                                        <!-- {{bookingItemBill.totalAmount?bookingItemBill.totalAmount:bookingSlot.amountPayable?bookingSlot.amountPayable:0 | number: '1.2-2'}} -->
                                        
                                    </div>
                                    <!-- bookingItemBill?bookingItemBill.totalAmount:0 -->
                                </div>
                                    <div *ngIf="bookingItemBill && bookingItemBill.totalPayment > 0 &&  bookingItemBill.balance < 0" class="row" style="color:red;font-weight:bold;font-size:2rem">
                                        <!-- bookingItemBill.totalPayment > bookingItemBill.totalPayable && -->
                                        <div class="column" style="width:50%">
                                            Overpaid by *
                                        </div>
                                        <div class="column" style="width:50%; text-align: right;">
                                            {{bookingSlot.slotAssigned.currency.symbol}} {{(-1*bookingItemBill.balance) | number :'1.2-2'}}<!--a-->
                                        </div>
                                        </div>
                                        
                                        <ion-item style="font-size:smaller; color:red" *ngIf="bookingItemBill && bookingItemBill.totalPayment > bookingItemBill.totalPayable && bookingItemBill.balance < 0">
                                            <!-- <ion-label>* Please contact club</ion-label> -->
                                            </ion-item>
                                <br>
                                <ion-item *ngIf="!paymentClickedBoolean && !asgmtDiff && 
                                (paymentStatus.toLowerCase() !== 'paid' || bookingSlot.bookingStatus.toLowerCase() !== 'paymentfull') && bookingType!=='past'">
                                    <span  style="overflow-wrap: normal; white-space: normal">
                                        <span style="text-decoration: underline; font-weight: bold;">
                                            Please Note
                                        </span> : This price may change upon payment depending on buggy/caddie availability.
                                    </span>
                                </ion-item>
                                <!-- <div *ngIf="bookingType!=='past' && (!paymentClickedBoolean) && (paymentStatus.toLowerCase() !== 'paid' || paymentStatus.toLowerCase() !== 'paymentfull' || bookingSlot.bookingStatus !== 'PaymentFull')" class="row" style="font-size:1.8rem;padding: 1rem;">
                                    <div class="column" style="width:40%">
            
                                        <ion-label item-left>Pay Amount</ion-label>
                                    </div>
                                    <div class="column" style="width:60%;padding: 0.5rem">
                                        <ion-segment item-right no-padding [(ngModel)]="paymentAmountType">
                                            <ion-segment-button value="full">
                                                Full<span *ngIf="paymentAmountType==='full'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                            </ion-segment-button>
                                            <ion-segment-button value="deposit">
                                                Deposit<span *ngIf="paymentAmountType==='deposit'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                            </ion-segment-button>
                                            <ion-segment-button value="mine" *ngIf="!fromClub">
                                                Mine<span *ngIf="paymentAmountType==='mine'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                            </ion-segment-button>
                                        </ion-segment>
                                    </div>
                                </div> -->
                                <ion-item *ngIf="bookingType!=='past' && (!paymentClickedBoolean) && 
                                (bookingSlot.bookingStatus !== 'PaymentFull')">
                                <!-- paymentStatus.toLowerCase() !== 'paid' || paymentStatus.toLowerCase() !== 'paymentfull' ||  -->
                                <!-- class="row" style="font-size:1.8rem;padding: 1rem;" -->
                                    <ion-label>Pay Amount</ion-label>
                                    <ion-segment item-right no-padding [(ngModel)]="paymentAmountType">
                                        <ion-segment-button value="full">
                                            Full<span *ngIf="paymentAmountType==='full'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                        <ion-segment-button (click)="onCheckDeposit(true)" value="deposit">
                                            Deposit<span *ngIf="paymentAmountType==='deposit'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                        <ion-segment-button value="mine" *ngIf="!fromClub">
                                            Mine<span *ngIf="paymentAmountType==='mine'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                    </ion-segment>
                                </ion-item>
                                <ion-item *ngIf="paymentAmountType === 'deposit'">
                                    <ion-row >
                                        <ion-col class="mg-txt-left">Deposit amount to pay</ion-col>
                                        <ion-col class="mg-txt-right">{{bookingSlot.slotAssigned.currency.symbol}}
                                            <input step="0.01" (blur)="onCheckDeposit()" type="number" [disabled]="paymentStatus.toLowerCase() === 'paid'" [(ngModel)]="depositAmount" style="max-width: 5em;text-align:right"/>
                                        </ion-col>
                                    </ion-row>
                                    <ion-row>
                                        Assignments only upon full/portion payment.
                                        <!-- Caddies will only be assigned upon full/portion payment. -->
                                    </ion-row>
                                </ion-item>
                                <ion-item *ngIf="paymentAmountType === 'mine'">
                                    <ion-row>
                                        Your portion amount will be displayed in next page
                                    </ion-row>
                                    <!-- <ion-row >
                                        <ion-col class="mg-txt-left">Your portion to pay</ion-col>
                                        <ion-col class="mg-txt-right">{{bookingSlot.slotAssigned.currency.symbol}}
                                            <input type="number" [disabled]="true" [(ngModel)]="playerChargeAmount" style="max-width: 5em;text-align:right"/>
                                        </ion-col>
                                    </ion-row> -->
                                </ion-item>
                                <ion-item *ngIf="fromClub && paymentStatus.toLowerCase() !== 'paid' && !isBookingCancel()">
                                    <ion-label>Who pays</ion-label>
                                        <ion-segment *ngIf="fromClub" item-right no-padding [(ngModel)]="clubPayment">
                                            <ion-segment-button value="true">
                                                <span class="hide-grid">Club Payment</span>
                        <span class="hide-card">Club</span>
                        <span *ngIf="clubPayment==='true'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                            </ion-segment-button>
                                            <ion-segment-button value="false">
                                                <span class="hide-grid">Self Payment</span>
                        <span class="hide-card">Self</span>
                        <span *ngIf="clubPayment==='false'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                            </ion-segment-button>
                                        </ion-segment>
                                </ion-item>
                                
                                <!-- <ion-item (click)="goRedeemPlayerCredits()" *ngIf="fromClub && paymentStatus.toLowerCase() !== 'paid'">
                                    <ion-label>Redeem Player(s) Credits here</ion-label>
                                </ion-item> -->
                                <ion-item (click)="goVoucherList('club')" *ngIf="0 && fromClub && !isBookingCancel()" style="color:red;letter-spacing: 1px; font-weight: 700;">
                                    <i class="fas fa-fw fa-tags"></i>&nbsp;Deal(s) available, tap here to apply
                                </ion-item>
                                <ion-list *ngIf="bookingDiscounts && bookingDiscounts.length > 0">
                                    <ion-list-header (click)="viewVoucherApplied = !viewVoucherApplied">{{bookingDiscounts&&bookingDiscounts.length>0?bookingDiscounts.length:'No'}} Voucher(s) applied, tap here to see more</ion-list-header>
                                    <!-- <h3>Vouchers applied</h3> -->
                                    <div  *ngIf="viewVoucherApplied">
                                    <ng-container *ngFor="let voucher of bookingDiscounts">
                                        <ion-item >
                                            <h3 item-start>{{voucher.voucherApplied.name}} ({{voucher.voucherApplied.playerAssigned.playerName}})</h3>
                                            <h3 item-end>- {{getVoucherAppliedAmount(voucher)}}</h3>
                                            <!-- {{currency.symbol}} {{voucher.voucherApplied.voucherAmount}} -->
                                            <button ion-button item-end (click)="onRemoveThisVoucher(voucher.voucherApplied)" outline color="danger">
                                                <i class="fas fa-fw fa-times"></i>
                                            </button>
                                        </ion-item>
                                    </ng-container>
                                </div>
                                    
                                </ion-list>
                                <button color="danger" ion-button outline block (click)="goRedeemPlayerCredits()" 
                                *ngIf="playersBalance > 0 
                                && (paymentStatus.toLowerCase() !== 'paymentfull' || bookingSlot.bookingStatus.toLowerCase() !== 'paymentfull')
                                && bookingType !== 'past'
                                && (bookingItemBill && bookingItemBill.balance > 0)">
                                    <!-- *ngIf="getPlayerClubCredits() > 0" -->
                        <span class="hide-grid">Redeem Player Credits here</span>
                        <span class="hide-card">Redeem Player Credits</span>
                                </button>
                                <ion-row col-12 *ngIf="bookingType!=='past' && (!paymentClickedBoolean)">
                                    <ion-col>
                                        <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onBillFullDetails()"
                                        item-left ion-button color="primary">Itemized Bill</button>
                                    </ion-col>
                                    <ion-col style="text-align:right">
                                        
                                    <button *ngIf="(bookingSlot.bookingStatus === 'PaymentFull' || bookingSlot.bookingStatus === 'PaymentPartial') || paymentStatus.toLowerCase() === 'paid'" style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                                    item-right ion-button color="primary">View Assignments</button> 
                                        <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" 
                                        *ngIf="(bookingSlot && bookingSlot.bookingStatus !== 'CancelledByClub' && bookingSlot.bookingStatus !== 'CancelledByPlayer'
                                        && bookingSlot.bookingStatus !== 'PaymentFull')
                                        && paymentStatus.toLowerCase() !== 'paid' && paymentStatus.toLowerCase() !== 'pending'" (click)="onCheckBuggyCaddyAssignment()"
                                    item-right ion-button color="gold">Proceed to Payment</button>
                                    </ion-col>
                                </ion-row>
                                
                <ion-item *ngIf="bookingType==='past'">
                    <button item-start style="padding-left: 3rem;padding-right: 3rem;width:30vw;" class="booking-book-button" (click)="onBillFullDetails()"
                    item-left ion-button color="primary">Itemized Bill</button>
                    
                    <button item-end style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                    item-right ion-button color="primary">View Assignments</button> 
                </ion-item>
                <button (click)="onClubManualRecalculate()" full ion-button text-wrap color="danger"
                 *ngIf="fromClub && allowClubManualRecalculate()">
                    Re-calculate 
                </button>
                                <ion-item *ngIf="!displayPayHistory && ((fromClub && bookingSlot && bookingSlot.amountPaid > 0) || bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull') && (bookingItemBill && bookingItemBill.payments)">
                                    <button 
                             ion-button full clear (click)="togglePayHistory()">
                                <span *ngIf="!displayPayHistory">See payment history</span>
                                <!-- <span *ngIf="displayPayHistory">Close</span> -->
                            </button>
                                </ion-item>
                                <ion-item *ngIf="!displayRefundHistory && 
                                (
                                    ((bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull') && bookingSlot && bookingSlot.totalRefund > 0 && bookingSlot.refunds)
                                    || (bookingSlot && bookingSlot.totalRefund > 0 && (bookingSlot.bookingStatus === 'CancelledByPlayer' || bookingSlot.bookingStatus === 'CancelledByClub'))
                                )
                                ">
                                    <button color="danger"
                             ion-button full clear (click)="toggleRefundHistory()">
                                <span *ngIf="!displayRefundHistory">See refund history</span>
                                <!-- <span *ngIf="displayRefundHistory">Close</span> -->
                            </button>
                                </ion-item>
                                <!-- <ion-item *ngIf="bookingType!=='past' && (!paymentClickedBoolean)">
                                    <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onBillFullDetails()"
                                    item-left ion-button color="primary">Itemized Bill</button>
                                    <ion-segment style="width:24em" *ngIf="fromClub" no-padding [(ngModel)]="clubPayment">
                                        <ion-segment-button value="true">
                                            Club Payment<span *ngIf="clubPayment==='true'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                        <ion-segment-button value="false">
                                            Self Payment<span *ngIf="clubPayment==='false'">&nbsp;&nbsp;<i  class="fa fa-fw fa-check"></i></span>
                                        </ion-segment-button>
                                    </ion-segment>
                                    <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" *ngIf="paymentStatus.toLowerCase() !== 'paid'" (click)="onCheckBuggyCaddyAssignment()"
                                    item-right ion-button color="gold">Proceed to Payment</button>
                             
                            </ion-item> -->
                            <!-- <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" 
                            (click)="onLocalBill()"
                                    item-right ion-button color="gold">Get Local Bill (debug only)</button> -->
                            <!-- <ion-item *ngIf="paymentClickedBoolean && (asgmtDiff || buggyDiff || caddyDiff)"> -->
                            <ion-item *ngIf="paymentClickedBoolean && (bookingItemBill.changes && bookingItemBill.changes.length>0)">

                                <i style="color:red" class="fa fa-fw fa-exclamation-circle "></i> We were not able to fulfill all your requests :<br>
                                <span *ngFor="let changes of bookingItemBill.changes">
                                    - {{changes}}<br>
                                </span>
                                <span style="font-weight: bold;">Your bill has been adjusted accordingly.</span>
                                <!-- <ul *ngIf="getAsgmtDiffDetails('buggies','req') !== getAsgmtDiffDetails('buggies','avl')">
                                    - Buggies requested {{getAsgmtDiffDetails('buggies','req')}}, available {{getAsgmtDiffDetails('buggies','avl')}}
                                </ul>
                                <ul *ngIf="getAsgmtDiffDetails('caddies','req') !== getAsgmtDiffDetails('caddies','avl')">- Caddies requested {{getAsgmtDiffDetails('caddies','req')}}, available {{getAsgmtDiffDetails('caddies','avl')}}
                                </ul>
                                <div *ngIf="caddyDiff">
                                <ul *ngFor="let c of caddyDiff">
                                    - {{c.caddyPreferred.firstName}} was not available.
                                </ul>
                                <span style="font-weight: bold;">Your bill has been adjusted accordingly.</span>
                            </div> -->
                            
                        </ion-item>
                            <ion-item *ngIf="paymentClickedBoolean">
                                <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onBillFullDetails()"
                                    item-left ion-button color="primary">Itemized Bill</button>
                                    <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onViewAssignmentDetails()"
                                    item-right ion-button color="primary">View Assignments</button> 
                            </ion-item>
                            <ion-item *ngIf="paymentClickedBoolean || 
                            (paymentStatus.toLowerCase() === 'pending'
                            && bookingSlot.bookingStatus !== 'CancelledByClub'
                            && bookingSlot.bookingStatus !== 'CancelledByPlayer')
                            && bookingSlot.bookingStatus !== 'PaymentFull'">
                                <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" (click)="onCancelAssignment()"
                                item-left ion-button color="danger">Cancel</button>
                                <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" *ngIf="bookingSlot.bookingStatus !== 'PaymentFull'" 
                                (click)="onPayNow()"
                                item-right ion-button color="gold">Continue</button>
                                <!-- (click)="onCheckBuggyCaddyAssignment()" -->
                                
                            </ion-item>

                            <ion-item *ngIf="displayPayHistory">
                                <button 
                         ion-button full (click)="togglePayHistory()">
                            <span *ngIf="displayPayHistory">See payment history</span>
                        </button>
                            </ion-item>

                            <div *ngIf="displayPayHistory && (fromClub || bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull' || bookingItemBill && bookingItemBill.payments)">
                                <div class="row">
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:20%">When</div>
                                    <!-- <div class="column" style="font-size:1.5rem;font-weight:bold;width:25%">Type</div> -->
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:20%">Paid By</div>
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:15%">Pay. Method</div>
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:10%" *ngIf="fromClub">Bill Id</div>
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:35%;text-align: right">Amount&nbsp;{{bookingSlot.slotAssigned&&bookingSlot.slotAssigned.currency.symbol?'('+bookingSlot.slotAssigned.currency.symbol+')':''}}</div>
                                </div>
                                <div class="row"  *ngFor="let payment of bookingItemBill.payments">
                                    <div class="column" style="width:20%">
                                        {{payment.datePaid | date:"EEE, d MMM 'yy"}}&nbsp;<br *ngIf="!fromClub" />
                                        {{payment.datePaid | date:"h:mm a"}}</div>
                                    <!-- <div class="column" style="width:25%">{{payment.whatIsPaid}}</div> -->
                                    <div class="column" style="width:20%">{{payment.paidBy}}</div>
                                    <div class="column" style="width:15%">{{payment.paymentMethod}}</div>
                                    <div class="column" style="width:10%" *ngIf="fromClub">{{payment.billId}}</div>
                                    <div class="column" style="width:35%;text-align: right"> {{payment.amountPaid | number: '1.2-2'}} {{isRedeemAmount(payment)}}</div>

                                </div>
                            </div>
                            <ion-item *ngIf="displayPayHistory">
                                <button 
                         ion-button full (click)="togglePayHistory()">
                            <span *ngIf="displayPayHistory">Close</span>
                        </button>
                            </ion-item>
                            
                            <ion-item *ngIf="displayRefundHistory">
                                <button color="danger"
                         ion-button full (click)="toggleRefundHistory()">
                            <span *ngIf="displayRefundHistory">See refund history</span>
                        </button>
                            </ion-item>
                            <div *ngIf="displayRefundHistory && (fromClub || bookingSlot.bookingStatus=== 'PaymentPartial' || bookingSlot.bookingStatus === 'PaymentFull') && bookingSlot.totalRefund > 0 && bookingSlot.refunds">
                                <div class="row">
                                    <!-- <div class="column" style="font-size:1.5rem;font-weight:bold;width:25%">Type</div> -->
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:25%">When</div>
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:20%">Refund To</div>
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:15%">Issue By</div>
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:10%">Mode</div>
                                    <div class="column" style="font-size:1.5rem;font-weight:bold;width:30%;text-align: right">Amount&nbsp;{{bookingSlot&&bookingSlot.slotAssigned.currency.symbol?'('+bookingSlot.slotAssigned.currency.symbol+')':''}} </div>
                                </div>
                                <div class="row"  *ngFor="let refund of bookingSlot.refunds">
                                    <!-- <div class="column" style="width:25%">{{payment.whatIsPaid}}</div> -->
                                    <div class="column" style="width:25%">{{refund.createdOn | date:"EEE, d MMM 'yy"}}&nbsp;<br *ngIf="!fromClub" />
                                        {{refund.createdOn | date:"h:mm a"}}
                                    </div><!-- h:mm a -->
                                    <div class="column" style="width:20%">{{refund.playerRefunded.playerName}}</div>
                                    <div class="column" style="width:15%">{{refund.refundIssuedBy.name}}</div>
                                    <div class="column" style="width:10%">{{refund.refundMode}}</div>
                                    <div class="column" style="width:30%;text-align: right">{{refund.refundAmount | number: '1.2-2'}}</div>

                                </div>
                            </div>
                            <ion-item *ngIf="displayRefundHistory">
                                <button color="danger"
                         ion-button full (click)="toggleRefundHistory()">
                            <span *ngIf="displayRefundHistory">Close</span>
                        </button>
                            </ion-item>
                        </ng-container>
            
                                
                                <h2 *ngIf="0 && bookingType!=='past'">Payment Method</h2>
                                <ion-list radio-group [(ngModel)]="selectPaymentMethod" *ngIf="0 && bookingType!=='past'">
                                    
                                        <!-- <h4 class="small-label" style="margin-left:1.5rem;">Where do you want to play ?</h4> -->
                                            <ion-item class="booking-option">
                                                    <!-- (click)="goCoursePicklist()" -->
                                                    <ion-radio id="payment-radio" item-left value="online" checked></ion-radio>
                                                    <!-- <ion-avatar *ngIf="clubInfo && clubInfo.clubName" item-left style="margin: 0;">
                                                            <img [src]="getClubImage(clubInfo)" 
                                                            onerror="this.src='img/default_club.png'"/>
                                                        </ion-avatar> -->
                                                        <!-- {{getClubName()}} -->
                                              <ion-label  style="font-size: 2rem;">Online Banking</ion-label>
                                              
                                              <!-- <button ion-button clear item-right (click)="clearClubSelection()">
                                                  <i style="color:red" class="fas fa-2x fa-fw fa-times"></i>
                                                </button> -->
                                            </ion-item>
                                            <ion-item  class="booking-option">
                                                <ion-radio id="payment-radio" item-left value="debit-credit-card"></ion-radio>  
                                          <ion-label style="font-size: 2rem;">Credit / Debit Card</ion-label>                                
                                        </ion-item>
                                            <!-- <ion-item  class="booking-option">
                                                <ion-radio item-left value="debit-card"></ion-radio>  
                                          <ion-label style="font-size: 2rem;">Debit Card</ion-label>                                
                                        </ion-item>
                            
                                            <ion-item  class="booking-option">
                                                    <ion-radio item-left value="credit-card"></ion-radio>  
                                              <ion-label style="font-size: 2rem;">Credit Card</ion-label>                                
                                            </ion-item> -->
                                            <ion-item  class="booking-option">
                                                <ion-radio id="payment-radio" item-left value="paypal"></ion-radio>  
                                          <ion-label style="font-size: 2rem;">PayPal</ion-label>                                
                                        </ion-item>
                                        <ion-item  class="booking-option">
                                            <ion-radio id="payment-radio" item-left value="e-wallet"></ion-radio>  
                                      <ion-label style="font-size: 2rem;">E-Wallet</ion-label>                                
                                    </ion-item>
                                            <ion-item  class="booking-option">
                                                    <ion-radio id="payment-radio" item-left value="charge-account"></ion-radio>  
                                              <ion-label style="font-size: 2rem;">Charge to Account 
                                                <span style="font-style:italic;font-size:xx-small">(Requires Club Confirmation)</span></ion-label>
                                                </ion-item>
                                            </ion-list>
                                            <!-- <h3>Amount to be paid</h3> -->
                                            <!-- <ion-item no-padding> -->
                                                
                                                    
                                                <!-- </ion-item> -->
                                                <!-- <ion-item *ngIf="bookingType!=='past'">
                                                        <button style="padding-left: 3rem;padding-right: 3rem;" class="booking-book-button" *ngIf="paymentStatus.toLowerCase() !== 'paid'" (click)="onPayNow()" item-right ion-button color="gold">Pay Now</button> -->
                                                        <!-- <button class="booking-book-button" *ngIf="!teeSlotNew && bookingType!=='past'" ion-button full color="danger">CANCEL THIS BOOKING</button> -->
            
                                                <!-- </ion-item> -->
                                                
                        </ion-card-content>
                    </ion-card>
                    
                </ion-col>
                <ion-col no-padding col-12>
    <ion-card *ngIf="!teeSlotNew" no-padding class="slot-box"> <!-- check in-->
                        <ion-card-header no-padding class="slot-subtitle-box" >
                            <ion-row>
                                <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(6)">
                                    <img style="max-height:1.5em;width:webkit-fill-available"
                                        src="assets/img/booking-item-checkin.svg" />
                                </ion-col>
                                <ion-col style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(6)">
                                    Check-In  
                                    <!-- <span *ngIf="bookingSlot.bookingStatus.toLowerCase() === 'secured' ||
                                    bookingSlot.bookingStatus.toLowerCase() === 'paid' 
                                    || bookingSlot.bookingStatus.toLowerCase() === 'paymentfull'">{{counterDisplay()}}</span> -->
                                    <!-- <span id="demo"></span> -->
                                    <!-- <countdown-timer *ngIf="bookingSlot.bookingStatus.toLowerCase() === 'secured' || bookingSlot.bookingStatus.toLowerCase() === 'secured'" [end]="countdownTeeTime()"></countdown-timer> -->
                                </ion-col>
                                <ion-col col-1 style="padding-left:0;padding-right:0;">
                                    <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                    <!-- <i style="color:red" class="fa fa-fw fa-times-circle "></i> -->
                                    <i *ngIf="checkBookingTabsComplete('6')" class="fa fa-fw fa-check-circle "></i>
                                    <i (click)="checkExclamationInfo('6')" *ngIf="!checkBookingTabsComplete('6')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                    <!-- </ion-badge> -->
                                </ion-col>
                            </ion-row>
                        </ion-card-header> 
                        <ion-card-content class="slot-detail-box" style="padding-left: 0.5em;">
                            <!-- Timer mode:
            <countdown-timer [start]="'2020-06-25 00:00:00'"></countdown-timer>
             <br>
            Countdown: -->
            <!-- <countdown-timer [end]="countdownTeeTime()"></countdown-timer> -->
            
            <!-- Countdown with zero trigger: -->
            <!-- <countdown-timer (zeroTrigger)="yourOwnFunction()" [end]="'2018-01-01 00:00:00'"></countdown-timer> -->
                            <!-- <ion-list no-padding> -->
                                <ion-item style="padding-left: 0.5em;" *ngIf="!checkBookingTabsComplete('6') && bookingType!=='past'">
                                <ion-checkbox item-left [(ngModel)]="checkInAllPlayers" (ionChange)="onCheckInAll()" style="margin-right: 1rem;"></ion-checkbox>
                                    <ion-label item-right style="font-weight: bold;font-size: larger;">Check In For All Players</ion-label>
                                </ion-item>
                                <ion-list>
                                <ion-item *ngFor="let x of bookingSlot.bookingPlayers; let i = index" style="padding-left:0.5em">
                                    <ion-checkbox *ngIf="x && !x.confirmed && bookingType!=='past'" item-left style="margin-right: 1rem;" [(ngModel)]="checkInPlayers[i]" ></ion-checkbox>
                                    <ion-label style="display: contents;">
                                        <img item-left style="max-width: 4em;float:left;object-fit: cover;border-radius:1em; height: 4em;"
                                                [src]="getPlayerSlotDetails(i+1,'image')" onerror="this.src='img/default-user.jpg'">
                                                <h2 item-right style="font-size: medium;font-weight: bold;color: green;white-space: normal;">{{getPlayerSlotDetails(i+1,'name')}} {{getPlayerSlotDetails(i+1,'id')}}</h2>
                                                <!-- x.player && x.player.image?x.player.image:'' -->
                                    </ion-label>
                                    
                                    
                                </ion-item>
                            </ion-list>
                            <ion-list *ngIf="!checkBookingTabsComplete('6') && bookingType!=='past'" radio-group [(ngModel)]="arrivalOption">
                                    
                                <!-- <h4 class="small-label" style="margin-left:1.5rem;">Where do you want to play ?</h4> -->
                                    <ion-item class="booking-option">
                                            <ion-radio item-left value="arrived"></ion-radio>
                                      <ion-label  style="font-size: 2rem;">I / We have arrived at the club</ion-label>
                                    </ion-item>
                                    <ion-item class="booking-option">
                                        <ion-radio item-left value="eta"></ion-radio>
                                      <ion-label  style="font-size: 2rem;">On the way, ETA (in mins)</ion-label>
                                    </ion-item>
                                    <div *ngIf="arrivalOption === 'eta'" style="text-align:-webkit-center">
                                        <button class="button-subtract" clear icon-only color="danger" (click)="addETAcounter(-1)" ion-button item-right>
                                            <!-- <i style="font-size:large" class="fas fa-minus"></i> -->
                                            <img src="assets/img/button-minus.svg" />
                                        </button>
                                        <button class="button-value" outline ion-button item-right>{{etaCounter}}</button>
                                        <button class="button-add"  clear icon-only (click)="addETAcounter(1)" ion-button item-right>
                                            <!-- <i style="font-size:large" class="fas fa-plus"></i> -->
                                            <img src="assets/img/button-plus.svg" /> 
                                        </button>
                                    </div>
                                    </ion-list>
                            <!-- <ion-row>
                                <ion-col col-sm-6 col-12 style="text-align: -webkit-center;">
                                    <button ion-button outline (click)="toggleETAoption()" style="text-align: -webkit-center;font-size: medium;font-weight: bold;">
                                        <span [innerHTML]="displayArrivalOpt()"></span>
                                    </button>
                                </ion-col>
                                <ion-col col-sm-6 col-12 *ngIf="arrivalOption === 'eta'" style="text-align: -webkit-center;">
                                    <button class="button-subtract" clear icon-only color="danger" (click)="addETAcounter(-1)" ion-button item-right>
                                        <img src="assets/img/button-minus.svg" />
                                    </button>
                                    <button class="button-value" outline ion-button item-right>{{etaCounter}}</button>
                                    <button class="button-add"  clear icon-only (click)="addETAcounter(1)" ion-button item-right>
                                        <img src="assets/img/button-plus.svg" /> 
                                    </button>
                                </ion-col>
                            </ion-row> -->
                                <button *ngIf="!checkBookingTabsComplete('6') && bookingType!=='past'" ion-button full item-right (click)="onCheckInClick()">Check In</button>
                            
                        </ion-card-content>
                    </ion-card>
                    
                </ion-col>
                <ion-col no-padding col-6>
                    <ion-card *ngIf="!teeSlotNew && bookingType==='past' && !doneRating && !isBookingCancel()" no-padding class="slot-box"> <!-- feedback / comment-->
                        <ion-card-header no-padding class="slot-subtitle-box" >
                            <ion-row>
                                <ion-col col-2 style="background-color: #DDF6D6;padding:0.5em;" (click)="toggleBookingClick(7)">
                                    <img style="max-height:1.5em;width:webkit-fill-available"
                                        src="assets/img/booking-item-review.svg" />
                                </ion-col>
                                <ion-col col-9 style="background-color: white;letter-spacing: 2px;" (click)="toggleBookingClick(7)">
                                    Feedback / Comments
                                    <!-- <countdown-timer *ngIf="bookingSlot.bookingStatus.toLowerCase() === 'secured' || bookingSlot.bookingStatus.toLowerCase() === 'secured'" [end]="countdownTeeTime()"></countdown-timer> -->
                                </ion-col>
                                <ion-col col-1 style="padding-left:0;padding-right:0;">
                                    <!-- <ion-badge item-right class="custom-badge" style="color:red;"> -->
                                    <!-- <i style="color:red" class="fa fa-fw fa-times-circle "></i> -->
                                    <i *ngIf="checkBookingTabsComplete('7')" class="fa fa-fw fa-check-circle "></i>
                                    <i (click)="checkExclamationInfo('7')" *ngIf="!checkBookingTabsComplete('7')" style="color:red" class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                    <!-- </ion-badge> -->
                                </ion-col>
                            </ion-row>
                        </ion-card-header>
                        <ion-card-content class="slot-detail-box" style="padding-left: 0.5em;">
                            <ion-item>
                                <h1 style="color:#30bb5b;font-weight: bold;">Overall Club Experience</h1>
                                <ion-item style="text-align: center; color: yellowgreen; font-size:2.5rem">
                                    <ion-icon *ngIf="getStar('club',1,'set')" (click)="setStar('club',1,'unset')" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',2,'set')" (click)="setStar('club',2,'unset')" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',3,'set')" (click)="setStar('club',3,'unset')" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',4,'set')" (click)="setStar('club',4,'unset')" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',5,'set')" (click)="setStar('club',5,'unset')" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',1,'unset')" (click)="setStar('club',1,'set')" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',2,'unset')" (click)="setStar('club',2,'set')" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',3,'unset')" (click)="setStar('club',3,'set')" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',4,'unset')" (click)="setStar('club',4,'set')" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('club',5,'unset')" (click)="setStar('club',5,'set')" name="star-outline"></ion-icon>
                                </ion-item>
                            </ion-item>
                            <div *ngFor="let item of clubRatingItems; let idx = index">
                            <ion-item *ngIf="idx > 0" >
                            
                             <h1 style="color:#30bb5b;font-weight: bold;">{{item.name}}</h1>
                                <ion-item style="text-align: center; color: yellowgreen; font-size:2.5rem">
                                    <ion-icon *ngIf="getStar('clubItem'+idx,1,'set',idx)" (click)="setStar('clubItem'+idx,1,'unset',idx)" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,2,'set',idx)" (click)="setStar('clubItem'+idx,2,'unset',idx)" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,3,'set',idx)" (click)="setStar('clubItem'+idx,3,'unset',idx)" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,4,'set',idx)" (click)="setStar('clubItem'+idx,4,'unset',idx)" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,5,'set',idx)" (click)="setStar('clubItem'+idx,5,'unset',idx)" name="star"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,1,'unset',idx)" (click)="setStar('clubItem'+idx,1,'set',idx)" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,2,'unset',idx)" (click)="setStar('clubItem'+idx,2,'set',idx)" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,3,'unset',idx)" (click)="setStar('clubItem'+idx,3,'set',idx)" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,4,'unset',idx)" (click)="setStar('clubItem'+idx,4,'set',idx)" name="star-outline"></ion-icon>
                                    <ion-icon *ngIf="getStar('clubItem'+idx,5,'unset',idx)" (click)="setStar('clubItem'+idx,5,'set',idx)" name="star-outline"></ion-icon>
                                    </ion-item>
            
                            </ion-item>
                            </div>
                            <ion-item (click)="onRateApp()">
                                <h1 style="color:#30bb5b;font-weight: bold;">Booking App Experience</h1> 
                                <h3 style="text-align: center; color: yellowgreen; font-size:2rem">Please tap here to rate</h3>
                            </ion-item>
                        <ion-item *ngIf="0">
                            <h1 style="color:#30bb5b;font-weight: bold;">Booking Experience {{bookingRating}}</h1> 
                            <ion-item style="text-align: center; color: yellowgreen; font-size:2.5rem">
                                <ion-icon *ngIf="getStar('booking',1,'set')" (click)="setStar('booking',1,'unset')" name="star"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',2,'set')" (click)="setStar('booking',2,'unset')" name="star"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',3,'set')" (click)="setStar('booking',3,'unset')" name="star"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',4,'set')" (click)="setStar('booking',4,'unset')" name="star"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',5,'set')" (click)="setStar('booking',5,'unset')" name="star"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',1,'unset')" (click)="setStar('booking',1,'set')" name="star-outline"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',2,'unset')" (click)="setStar('booking',2,'set')" name="star-outline"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',3,'unset')" (click)="setStar('booking',3,'set')" name="star-outline"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',4,'unset')" (click)="setStar('booking',4,'set')" name="star-outline"></ion-icon>
                                <ion-icon *ngIf="getStar('booking',5,'unset')" (click)="setStar('booking',5,'set')" name="star-outline"></ion-icon>
                                <!-- <ion-icon name="star-half"></ion-icon> -->
                                <!-- <i class="fas fa-fw fa-star"></i>
                                <i class="fas fa-fw fa-star"></i>
                                <i class="fas fa-fw fa-star"></i>
                                <span class="fa-stack">
                                      <i class="fas fa-star-half fa-stack-1x "></i>
                                      <i class="far fa-star-half fa-stack-1x fa-flip-horizontal"></i>
                                </span>
                                <i class="far fa-fw fa-star"></i> -->
                                <!-- <i class="far fa-fw fa-star-half"></i> -->
                            </ion-item>
                            <!-- <ionic3-star-rating #bookingRating
                            activeIcon = "ios-star"
                            defaultIcon = "ios-star-outline"
                            activeColor = "#FFD700" 
                            defaultColor = "#1b6a34"
                            readonly="false"
                            rating="3"
                            fontSize = "32px"
                            (ratingChanged)="logBookingRating($event)">
                        </ionic3-star-rating> -->
                        </ion-item>
                        <ion-item *ngIf="uniqCaddy && uniqCaddy.length > 0 && hasCaddyAssigned()" (click)="getCaddy()" style="padding-right:0">  
                            <h1  style="color:#30bb5b;font-weight: bold;">Caddie Experience</h1>
                                <ion-row *ngFor="let caddy of uniqCaddy; let caddyIdx = index">
                                    <ion-col col-3>
                                        <img (click)="onZoomImageCaddy(caddy)" style="max-width: 5rem;object-fit: cover;border-radius:1em; height: 5rem;margin-top:0.5rem"
                                        [src]="caddy.caddyAssigned?caddy.caddyAssigned.caddyImage:''" onerror="this.src='img/default-user.jpg'">
                                    </ion-col>
                                    <ion-col col-3 style="overflow:hidden">
                                        <span style="overflow:hidden">{{caddy.caddyAssigned?caddy.caddyAssigned.firstName:''}}</span>
                                        <br>{{caddy.caddyAssigned?"("+caddy.caddyAssigned.staffId+")":''}}
                                    </ion-col>
                                    <ion-col col-6 style="text-align: center; color: yellowgreen; font-size:2rem">
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,1,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,1,'unset',caddyIdx)" name="star"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,2,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,2,'unset',caddyIdx)" name="star"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,3,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,3,'unset',caddyIdx)" name="star"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,4,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,4,'unset',caddyIdx)" name="star"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,5,'set',caddyIdx)" (click)="setStar('caddy'+caddyIdx,5,'unset',caddyIdx)" name="star"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,1,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,1,'set',caddyIdx)" name="star-outline"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,2,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,2,'set',caddyIdx)" name="star-outline"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,3,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,3,'set',caddyIdx)" name="star-outline"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,4,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,4,'set',caddyIdx)" name="star-outline"></ion-icon>
                                        <ion-icon *ngIf="getStar('caddy'+caddyIdx,5,'unset',caddyIdx)" (click)="setStar('caddy'+caddyIdx,5,'set',caddyIdx)" name="star-outline"></ion-icon>
                                    </ion-col>
                                </ion-row>
                            
                        </ion-item>
                        <ion-item>
                            <h1 style="color:#30bb5b;font-weight: bold;">Comments</h1> 
                        </ion-item>
                        
                        <textarea #myInput id="myInput" rows="3" maxLength="500" (keyup)="resize()" placeholder="Please add comment here" [(ngModel)]="myStuff"></textarea>
                        <ion-item style="text-align: center;">
                        <button ion-button item-left clear>Thank you for Rating Us</button>
                        <button ion-button item-right (click)="onRateSubmit()">Submit</button>
                        </ion-item>
                        </ion-card-content>
                    </ion-card>
    
                </ion-col>
             </ion-row>
        
        </ion-col>
        </ion-row>
    </ion-grid>
    </ion-item-group>



<!-- </ion-grid> -->
</ion-content>
<ion-footer *ngIf="0" style="background-color: #DDF6D6 !important;">
    <ion-row style="text-align: center;" >
        <!-- [disabled]="paymentClickedBoolean" -->
        <ion-col col-2 (click)="onMyBookingsClick()">
            <img style="height: 5rem; padding:1rem;" class="footer-icons" src="assets/img/footer-icon-calendar.png" />
        </ion-col>
        <ion-col col-2 (click)="onNotificationsClick()">
            <img style="height: 5rem; padding:1rem;" class="footer-icons" src="assets/img/footer-icon-notification.png" />
        </ion-col>
        <ion-col col-4 (click)="onHomeClick()">
            <img style="height: 5rem;" src="assets/img/footer-icon-mg2u.png" />
        </ion-col>
        <ion-col col-2 (click)="onFAQClick()">
            <img style="height: 5rem; padding:1rem;" class="footer-icons" src="assets/img/icon-question-only.png" />
        </ion-col>
        <ion-col col-2 (click)="openProfile()">
            <img style="height: 5rem; padding:1rem;" class="footer-icons" src="assets/img/footer-icon-player.png" />
        </ion-col>
    </ion-row>

</ion-footer>